<!doctype html><!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]--><!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]--><!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"> <!--<![endif]--><head><meta charset="UTF-8"><title>AOSA Chapter on Yesod</title><meta name="description" content="Yesod is a Haskell web framework for productive development of type-safe, RESTful, high performance web applications."><meta name="viewport" content="width=device-width,initial-scale=1"><link href="/feed" type="application/atom+xml" rel="alternate" title="Yesod Web Framework Blog">
<style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio,canvas,video{display:inline-block;*display:inline;*zoom:1}audio:not([controls]){display:none}[hidden]{display:none}html{font-size:100%;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body{margin:0}body,button,input,select,textarea{font-family:sans-serif}a{color:#00e}a:visited{color:#551a8b}a:focus{outline:thin dotted}a:hover,a:active{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}blockquote{margin:1em 40px}dfn{font-style:italic}mark{background:#ff0;color:#000}pre,code,kbd,samp{font-family:"DejaVu Sans Mono", "Droid Sans Mono", consolas, "courier new", monospace;_font-family:'courier new', monospace;font-size:.85em}pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}q{quotes:none}q:before,q:after{content:'';content:none}small{font-size:75%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}ul,ol{margin:1em 0;padding:0 0 0 40px}dd{margin:0 0 0 40px}nav ul,nav ol{list-style:none;list-style-image:none}img{border:0;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}figure{margin:0}form{margin:0}fieldset{margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;*margin-left:-7px}button,input,select,textarea{font-size:100%;margin:0;vertical-align:baseline;*vertical-align:middle}button,input{line-height:normal;*overflow:visible}table button,table input{*overflow:auto}button,html input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}pre code{display:block;padding:0.5em;background:#F4F4F4}pre code,pre .ruby .subst,pre .tag .title,pre .lisp .title{color:black}pre .string,pre .title,pre .constant,pre .parent,pre .tag .value,pre .rules .value,pre .rules .value .number,pre .preprocessor,pre .ruby .symbol,pre .ruby .symbol .string,pre .ruby .symbol .keyword,pre .ruby .symbol .keymethods,pre .instancevar,pre .aggregate,pre .template_tag,pre .django .variable,pre .smalltalk .class,pre .addition,pre .flow,pre .stream,pre .bash .variable,pre .apache .tag,pre .apache .cbracket,pre .tex .command,pre .tex .special,pre .erlang_repl .function_or_atom{color:#800}pre .comment,pre .annotation,pre .template_comment,pre .diff .header,pre .chunk{color:#888}pre .number,pre .date,pre .regexp,pre .literal,pre .smalltalk .symbol,pre .smalltalk .char,pre .go .constant,pre .change{color:#080}pre .label,pre .javadoc,pre .ruby .string,pre .decorator,pre .filter .argument,pre .localvars,pre .array,pre .attr_selector,pre .important,pre .pseudo,pre .pi,pre .doctype,pre .deletion,pre .envvar,pre .shebang,pre .apache .sqbracket,pre .nginx .built_in,pre .tex .formula,pre .erlang_repl .reserved,pre .input_number{color:#88F
}pre .css .tag,pre .javadoctag,pre .phpdoc,pre .yardoctag{font-weight:bold}pre .keyword,pre .id,pre .phpdoc,pre .title,pre .built_in,pre .aggregate,pre .smalltalk .class,pre .winutils,pre .bash .variable,pre .apache .tag,pre .go .typename,pre .tex .command{font-weight:bold}pre .nginx .built_in{font-weight:normal}pre .xml .css,pre .xml .javascript,pre .xml .vbscript,pre .tex .formula{opacity:0.5}#archive li > span{cursor:pointer}#comments{margin-top:2em;border-top:1px dashed #000;padding-top:1em;font-weight:300;font-size:1.8em;color:#474f6b;font-family:Lato}code{background-color:#f4f4f4}.github-link{font-size:0.6em}.github-link a,.github-link a:visited{text-decoration:none}#main figure{border:1px solid #CCC;box-shadow:0 0 3px #CCC inset;padding:1em;margin:2ex 0}#main figure figcaption{text-size:.9em;text-align:center;color:#555}#main figure img{border:solid 1px #CCC}#container{min-width:1094px}dd,p{text-align:justify}body{font-family:'Crimson Text', serif;font-size:1.2em;background-color:#e5eef9}a,a:visited{color:#000}a:hover,a:active{color:#823}nav{box-shadow:0 -5px 20px 20px rgba(41,55,78,0.12);z-index:100;background-color:#29374e;padding:5px;font-family:'Lato';font-size:0.80em;font-weight:400;position:fixed;width:100%;top:0}nav ul{margin:0;padding:0;text-align:right}nav ul li{display:inline;margin-right:3em}nav ul li.googleplus{position:relative;top:2px;margin-right:3em}nav ul li.feedlink{position:relative;top:3px}nav a,nav a:visited{color:#eee;text-decoration:none}#spotlight{background-image:-webkit-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:-moz-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:-o-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:-ms-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);position:absolute;width:1050px;height:300px;top:0;left:50%;margin-left:-475px;z-index:-1}div.headergroup{width:1050px;margin:0 auto;padding-top:2.6em;padding-bottom:1.3em}div.headergroup a{text-decoration:none;display:flex}div.headergroup div.homepage-logo{text-align:center;width:550px;height:105px;margin-left:75px}div.headergroup div.homepage-logo div.logo-image{background:url(/static/logo-home2-no-esod-smaller2.png?etag=uBLSXtRu) no-repeat center center;width:100%;height:75px}div.headergroup div.homepage-logo div.logo-text{color:#29374e;padding-top:0.2em;font-family:'Lato';font-weight:300;font-size:1.2em;padding-bottom:0.3em}div.headergroup div.homepage-info{text-align:left;font-family:'Lato';font-weight:300;font-size:0.8em;line-height:1.6em;width:220px}div.headergroup h2{margin-bottom:0;font-size:1.4em;margin-top:0;padding-top:0.4em;padding-bottom:1em}h1,h2,h3,h4,h5,h6,dt{color:#474f6b;font-family:'Lato';font-weight:400}h1{font-weight:300;font-size:1.8em}h2,section > section > h1{font-weight:400;font-size:1.5em;margin-bottom:0.5em}h3,section > section > section > h1{font-weight:400;font-size:1.2em;margin-bottom:0.5em}h1 span{display:none}section{display:table-cell}section h2{margin-top:2.2em;margin-bottom:0}section img{max-width:100%}section section{display:block;width:auto;padding:0;margin:0}section.why{width:600px;padding-left:90px;padding-right:90px}section.why article{width:600px}section.getting-started{background-color:#f4f4f4;width:300px;padding-left:50px;padding-right:50px}section.getting-started h2{font-size:1.2em;margin-bottom:0.7em;margin-top:1.8em}section.getting-started ul{font-family:'Lato';font-size:0.75em;font-weight:500;margin-bottom:20px;line-height:2em;list-style-type:none;margin-bottom:50px;padding-left:0}section.getting-started ul ul{font-size:.9em }section.getting-started div{font-family:'Lato';padding-left:20px}#main{box-shadow:0 10px 25px 25px rgba(41,55,78,0.05);background-color:#fff;position:relative;width:1050px;margin:0 auto}aside#announcement{box-shadow:0 0 20px 10px rgba(41,55,78,0.12);height:20px;margin:0 auto;position:relative;width:1080px;background-color:#29374e;color:#eee;padding:0.5em;font-family:'Lato';font-weight:400;font-size:0.8em;z-index:50}aside#announcement div.msg{margin-left:105px}aside#announcement div.tri-left,aside#announcement div.tri-right{width:0;height:0;position:absolute;bottom:-21px;border-style:solid}aside#announcement div.tri-left{left:0;border-width:11px 11px 10px 11px;border-color:#0b1b30 #0b1b30 transparent transparent}aside#announcement div.tri-right{right:0;border-width:11px 11px 11px 10px;border-color:#0b1b30 transparent transparent #0b1b30}aside#announcement a,aside#announcement a:visited{color:#eee;text-decoration:underline}aside#announcement span.date{font-style:italic;font-size:0.8em}#feedlink{display:inline-block;height:16px;width:16px;background:url(/static/blog.png?etag=oPHrQ5qo)}#feedlink span{display:none}dt{font-weight:400;font-size:1.05em;margin-bottom:0.7em;margin-top:2.3em}dd,p{margin:0;font-size:1em;line-height:155%;margin-bottom:0.5em}p.what{display:none;font-size:1.4em;padding:0 200px}#instantclick{display:none}@media print, (max-width: 700px) {body{background-color:#fff;padding:3px}.googleplus,.feedlink,.headergroup,#announcement,#comments,#disqus_thread,#spotlight,#license,.github-link,.oreilly,.main-listing{display:none}div .headergroup{display:none}#container > nav{background-color:#fff;box-shadow:none}#container > nav > ul{text-align:left}#container > nav > ul a,#container > nav > ul a:visited{color:#00f}#main,div#container,section.why > article{width:auto;min-width:0}#main{box-shadow:none;position:static;margin:0}section.why,section.getting-started{display:block;width:auto;padding:0;background-color:#fff}hgroup h1[itemprop=name],hgroup h2,hgroup h3{margin:0}hgroup h1[itemprop=name] img,hgroup h2 img,hgroup h3 img{display:none}dd,p,dt{margin:12px}}@media print {nav{display:none}section.getting-started{display:none}}</style><!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link href="//fonts.googleapis.com/css?family=Crimson+Text:400,400italic,600,600italic,700,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic" rel="stylesheet" type="text/css"><script>document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/,'js');</script></head><body itemscope itemtype="http://schema.org/Product"><div id="spotlight"></div><div id="container"><nav><ul><li><a href="/book">book</a></li><li><a href="/wiki">cookbook</a></li><li><a href="/blog">blog</a></li><li><a href="/wiki/Home">wiki</a></li><li class="feedlink"><a href="/feed" id="feedlink"><span>newsfeed</span></a></li></ul></nav><div class="headergroup"><a href="/"><div class="homepage-logo"><div class="logo-image"></div><div class="logo-text">Yesod Web Framework</div></div><div class="homepage-info">Yesod is a Haskell web framework for productive development of type-safe, RESTful, high performance web applications.</div></a></div><aside id="announcement"><div class="tri-left"></div><div class="tri-right"></div><div class="msg"><span class="subject">AOSA Chapter on Yesod</span></div></aside><div id="main" role="main"><section class="why"><h1>AOSA Chapter on Yesod</h1><h2>January 17, 2012</h2><h3><img width="80" height="80" itemprop="image" src="https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?size=80" alt="Gravatar">By Michael Snoyman</h3><p class="github-link"><a href="https://github.com/yesodweb/yesodweb.com-content/tree/master/blog/2012/1/aosa-chapter.html">View source on Github</a></p><article><h1>AOSA Chapter on Yesod</h1>
<p class="hascomments">The upcoming <a href="http://www.aosabook.org/en/index.html">Architecture of Open Source Applications, volume 2</a> will include a chapter on Yesod. A big thanks to Amy Brown and Greg Wilson for including us. Here&#39;s a sneak peek for the impatient.</p>
<section class="subtopic" id="file1394-introduction"><h1>Introduction</h1>
  <p class="hascomments" id="file1394-introduction-x-3">Yesod is a web framework written in the Haskell programming language. While many
   popular web frameworks exploit the dynamic nature of their host languages, Yesod exploits the static nature of Haskell to produce safer, faster code.</p>
  <p class="hascomments" id="file1394-introduction-x-11">Development began about two years ago, and has been going strong ever since. Yesod cut its
   teeth on real life projects, with all of its initial features borne out of an actual, real life
   need. At first, development was almost entirely a one-man show. After about a year of development, the community efforts kicked
   in, and Yesod has since blossomed into a thriving open-source project.</p>
  <p class="hascomments" id="file1394-introduction-x-4">During the embryonic phase, when Yesod was incredibly ephemeral and ill-defined, it
   would have been counter-productive to try and get a team to work on it. By the time it stabilized
   enough to be useful to others, it was the right time to find out the downsides to some of the
   decisions that had been made. Since then, we have made major changes to the user-facing API to
   make it more useful, and are quickly solidifying a 1.0 release.</p>
  <p class="hascomments" id="file1394-introduction-x-5">The question you may ask is: why another web framework? Let&#39;s instead redirect to a
   different question: why use Haskell? It seems that most of the world is happy with one of two
   styles of language:</p>
  <ul id="file1394-introduction-ul_abba76f6-38db-46aa-8bd9-4699289ea8d4"><li id="file1394-introduction-x-6">Statically typed languages, like Java, C# and C++. These languages provide speed and type
    safety, but are more cumbersome to program with.</li>
   <li id="file1394-introduction-x-7">Dynamically typed languages, like Ruby and Python. These languages greatly increase
    productivity (at least in the short run), but run slowly and have very little support from the
    compiler to ensure correctness. (The solution to this last point is unit testing. We&#39;ll get to
    that later.)</li>
  </ul>
  <p class="hascomments" id="file1394-introduction-x-8">This is a false dichotomy. There&#39;s no reason why statically typed languages need to be
   so clumsy. Haskell is able to capture a huge amount of the expressivity of Ruby and Python, while
   remaining a strongly typed language. In fact, Haskell&#39;s type system catches many more bugs than
   Java and its ilk. Null pointer exceptions are completely eliminated; immutable data structures
   simplify reasoning about your code and simplify parallel and concurrent programming.</p>
  <p class="hascomments" id="file1394-introduction-x-9">So why Haskell? It is an efficient, developer-friendly language which provides many
   compile-time checks of program correctness.</p>
  <p class="hascomments" id="file1394-introduction-x-10">The goal of Yesod is to extend Haskell&#39;s strengths into web development. Yesod
   strives to make your code as concise as possible. As much as possible, every line of your code is
   checked for correctness at compile time. Instead of requiring large libraries of unit tests to
   test basic properties, the compiler does it all for you. Under the surface, Yesod uses as many
   advanced performance techniques as we can muster to make your high-level code fly.</p>
 </section><section class="subtopic" id="file1483-conceptId"><h1>Compared to other frameworks</h1>
  <p class="hascomments" id="file1483-conceptId-x-3">In general terms, Yesod is more similar than different when compared to the leading frameworks,
   such as Rails and Django. It generally follows the Model-View-Controller (MVC) paradigm, has a
   templating system that separates view from logic, provides an Object Relational Mapping (ORM)
   system, and has a front controller approach to routing.</p>
  <p class="hascomments" id="file1483-conceptId-x-4">The devil is in the details. Yesod strives to push as much error catching to the
   compile phase instead of runtime, and to automatically catch both bugs and security flaws through
   the type system. While Yesod tries to maintain a user-friendly, high-level API, it uses a number
   of newer techniques from the functional programming world to achieve high performance, and is not
   afraid to expose these internals to developers.</p>
  <p class="hascomments" id="file1483-conceptId-x-5">The main architectural challenge in Yesod is balancing these two seemingly conflicting
   goals. For example, there is nothing revolutionary about Yesod&#39;s approach to routing (called
    <a href="http://www.yesodweb.com/redirector/home%2F1%2Fwriting%2Faosa%2Fyesod%2Froutes.dita">type-safe URLs</a>).
   Historically, implementing such a solution was a tedious, error-prone process. Yesod&#39;s innovation
   is to use Template Haskell (a form of code generation) to automate the boilerplate required to
   bootstrap the process. Similarly, type-safe HTML has been around for a long while; Yesod tries to
   keep the developer-friendly aspect of common template languages while keeping the power of type
   safety.</p>
 </section><section class="subtopic" id="file1401-conceptId"><h1>Web Application Interface</h1>
  <p class="hascomments" id="file1401-conceptId-x-3">A web application needs some way to communicate with a server. One possible approach is to bake
   the server directly into the framework, but doing so necessarily limits your options for
   deployment and leads to poor interfaces. Many languages have created standard interfaces to
   address this issue: Python has WSGI and Ruby has Rack. In Haskell, we have WAI.</p>
  <p class="hascomments" id="file1401-conceptId-x-4">WAI is not intended to be a high level interface. It has two specific goals:
   generality and performance. By staying general WAI has been able to support backends for
   everything from standalone servers to old school CGI and even works directly with Webkit to
   produce faux desktop applications. The performance side will introduce us to a number of the cool
   features of Haskell.</p>
  <figure id="file1401-conceptId-x-5"><figcaption>Overall structure of a Yesod application</figcaption>
   
   <img id="file1401-conceptId-image_szu_quw_le" src="http://www.yesodweb.com/redirector/home%2F1%2Fwriting%2Faosa%2FYesodoverviewdiagram.png"/></figure>
 <section class="subtopic" id="file1395-conceptId"><h1>Datatypes</h1>
  <p class="hascomments" id="file1395-conceptId-x-3">One of the biggest advantages of Haskell - and one of the things we make the most use of in
   Yesod - is strong static typing. Before we begin to write the code for how to solve something, we
   need to think about what the data will look like. WAI is a perfect example of this paradigm. The
   core concept we want to express is that of an application. An application&#39;s most basic expression
   is a function that takes a request and returns a response. In Haskell lingo:
   <pre class="codeblock" id="file1395-conceptId-x-4">type Application = Request -&gt; Response</pre></p>
  <p class="hascomments" id="file1395-conceptId-x-5">This just raises the question: what do Request and Response look like? A Request has a
   number of pieces of information, but the most basic are the requested path, query string, request
   headers, and request body. And a Response has just three components: a status code, response
   headers and response body.</p>
  <p class="hascomments" id="file1395-conceptId-x-6">How do we represent something like a query string? Haskell keeps a strict separation between
   binary and textual data. The former is represented by ByteString, the latter by Text. Both are
   highly optimized datatypes that provide a high level, safe API. In the case of query string we
   store the raw bytes transferred over the wire as a ByteString and the parsed, decoded values as
   Text. </p>
 </section><section class="subtopic" id="file1396-conceptId"><h1>Streaming</h1>
  <p class="hascomments" id="file1396-conceptId-x-3">A ByteString represents a single memory buffer. If we were to naively use a plain ByteString
   for holding the entire request or response bodies, our applications could never scale to large
   requests or responses. Instead, we use a technique called enumerators, very similar in concept to
   generators in Python. Our application becomes a consumer of a stream of ByteStrings representing
   the incoming request body, and a producer of a separate stream for the response.</p>
  <p class="hascomments" id="file1396-conceptId-x-4">We now need to slightly revise our definition of an application. An application will
   take a request value, containing headers, query string, etc, and will consume a stream of
   ByteStrings, producing a Response. So the revised definition of an Application
   is:<pre class="codeblock" id="file1396-conceptId-x-5">type Application = Request -&gt; Iteratee ByteString IO Response</pre>The
   IO simply explains what types of side effects an application can perform. In the case of IO, it
   can perform any kind of interaction with the outside world, an obvious necessity for the vast
   majority of web applications.</p>
 </section><section class="subtopic" id="file1397-conceptId"><h1>Builder</h1>
  <p class="hascomments" id="file1397-conceptId-x-3">The trick in our arsenal is how we produce our response buffers. We have a two
   competing desires here: minimizing system calls, and minimizing buffer copies. On the one hand,
   we want to minimize system calls for sending data over the socket. To do this we need to store
   outgoing data in a buffer. However, if we make this buffer too large, we will exhaust our memory
   and slow down the application&#39;s response time. On the other hand, we want to minimize the number
   of times data is copied between buffers, preferably copying just once from the source to
   destination buffer.</p>
  <p class="hascomments" id="file1397-conceptId-x-4">Haskell&#39;s solution is the builder. A builder is an instruction for how to fill a
   memory buffer, such as place the five bytes &quot;hello&quot; in the next open position. Instead of passing
   a stream of memory buffers to the server, a WAI application passes a stream of these
   instructions. The server takes the stream and uses it to fill up optimally sized memory buffers.
   As each buffer is filled, the server makes a system call to send the data over over the wire and
   then starts filling up the next buffer.<aside class="note" id="file1397-conceptId-x-5">The optimal size for a buffer will depend
    on many factors such as cache size. The underlying blaze-builder library underwent significant
    performance testing to determine the best trade-off.</aside></p>
  <p class="hascomments" id="file1397-conceptId-x-6">In theory, this kind of optimization could be performed in the application itself.
   However, by encoding this approach in the interface itself, we are able to simply prepend the
   response headers to the response body. The result is that, for small to medium sized responses,
   the entire response can be sent with a single system call and memory is copied only once.</p>
 </section><section class="subtopic" id="file1398-conceptId"><h1>Handlers</h1>
  <p class="hascomments" id="file1398-conceptId-x-3">Now that we have an application, we need some way to run it. In WAI parlance, this is a
    <dfn id="file1398-conceptId-x-4">handler</dfn>. WAI has some basic, standard handlers, such as a standalone server (Warp,
   discussed below), FastCGI, SCGI and CGI. This spectrum allows WAI applications to be run on
   anything from dedicated servers down to shared hosting. But in addition to these, WAI has some
   more interesting backends:<dl id="file1398-conceptId-x-5"><dt id="file1398-conceptId-x-7">Webkit</dt>
     <dd id="file1398-conceptId-x-8">This backend embeds a Warp server and calls out to QtWebkit. By launching a server,
      followed by launching a new standalone browser window, we have faux desktop applications.</dd>
    
    
     <dt id="file1398-conceptId-x-10">Launch</dt>
     <dd id="file1398-conceptId-x-11">This is a slight variant on Webkit. Having to deploy the Qt and Webkit libraries can be a
      bit burdensome, so instead we just launch the user&#39;s default browser.</dd>
    
    
     <dt id="file1398-conceptId-x-13">Test</dt>
     <dd id="file1398-conceptId-x-14">Even testing counts as a handler. After all, testing is simply the act of running
      an application and inspecting the responses.</dd>
    
   </dl></p>
  <p class="hascomments" id="file1398-conceptId-x-15">Most developers will likely use Warp. It is lightweight enough to be used for
   testing. It requires no config files, no folder hierarchy and no long-running, administrator
   owned process. It&#39;s a simple library that gets compiled into your application or run via the
   Haskell interpreter. On the flip side, Warp is an incredibly fast server, with protection from
   all kinds of attack vectors, such as slow loris and infinite headers. Warp can be the only web
   server you need, though it is also quite happy to sit behind a reverse HTTP proxy.</p>
  <p class="hascomments" id="file1398-conceptId-x-21">The PONG benchmark measures the requests per second of various servers for the 4-byte response
   body &quot;PONG&quot;. In this graph, Yesod is measured as a framework on top of Warp. As can be seen, the
   Haskell servers (Warp, Happstack and Snap) lead the pack.</p>
  <figure id="file1398-conceptId-x-16"><figcaption>Warp PONG Benchmark</figcaption>
   
   <img id="file1398-conceptId-image_xrh_agm_gd" src="http://www.yesodweb.com/static/benchmarks/2011-03-17/extra-large.png"/></figure>
  <p class="hascomments" id="file1398-conceptId-x-18">Most of the reasons for Warp&#39;s speed have already been spelled out in the overall
   description of WAI: enumerators, builders and packed datatypes. The last piece in the puzzle is
   from the Glasgow Haskell Compiler&#39;s (GHC&#39;s) multithreaded runtime. GHC, Haskell&#39;s flagship
   compiler, has light-weight green threads. Unlike system threads, it is possible to spin up
   thousands of these without serious performance hits. Therefore, in Warp, each connection is
   handled by its own green thread.</p>
  <p class="hascomments" id="file1398-conceptId-x-19">The next trick is asynchronous I/O. Any web server hoping to scale to tens of thousands of
   requests per second will need some type of asynchronous communication. In most languages, this
   involves complicated programming involving callbacks. GHC lets us cheat: we program as if we&#39;re
   using a synchronous API, and GHC automatically switches between different green threads waiting
   for activity.</p>
  <p class="hascomments" id="file1398-conceptId-x-20">Under the surface, GHC uses whatever system is provided by the host operating system,
   such as <i id="file1398-conceptId-x-22">kqueue</i>, <i id="file1398-conceptId-x-23">epoll</i> and <i id="file1398-conceptId-x-24">select</i>. This gives us all the performance of an
   event-based IO system, without worrying about cross-platform issues or writing in a
   callback-oriented way.</p>
 </section><section class="subtopic" id="file1399-conceptId"><h1>Middleware</h1>
  <p class="hascomments" id="file1399-conceptId-x-3">In between handlers and applications, we have middlewares. Technically, a middleware
   is an <dfn id="file1399-conceptId-x-4">application transformer</dfn>: it takes one application, and returns a new
   one. This is defined as <code id="file1399-conceptId-x-5">type Middleware = Application -&gt;
   Application</code>. The best way to understand the purpose of a middleware is to look at some
   common ones:<ul id="file1399-conceptId-ul_kau_msu_id"><li id="file1399-conceptId-x-6"><b id="file1399-conceptId-x-15">gzip</b> automatically compresses the response from an application.</li>
    <li id="file1399-conceptId-x-7"><b id="file1399-conceptId-x-16">jsonp</b> automatically converts JSON responses to <a href="http://en.wikipedia.org/wiki/JSONP">JSON-P</a>
     responses when the client provided a callback parameter.</li>
    <li id="file1399-conceptId-x-9"><b id="file1399-conceptId-x-17">autohead</b> will generate appropriate HEAD responses based on the GET response
     of an application.</li>
    <li id="file1399-conceptId-x-10"><b id="file1399-conceptId-x-18">debug</b> will print debug information to the console or a log on each
     request.</li>
   </ul></p>
  <p class="hascomments" id="file1399-conceptId-x-11">The theme here is to factor out common code from applications and let it be shared easily. Note
   that, based on the definition of a middleware, we can easily stack these things up. The general
   workflow of a middleware is:<ol id="file1399-conceptId-ol_npi_zsu_id"><li id="file1399-conceptId-x-12">Take the request value and apply some modifications.</li>
    <li id="file1399-conceptId-x-13">Pass the modified request to the application and receive a response.</li>
    <li id="file1399-conceptId-x-14">Modify the response and return it to the handler.</li>
   </ol>In the case of stacked middlewares, instead of passing to the application or handler, the
   middleware will actually be passing to the inner and outer middlewares, respectively.</p>
 </section><section class="subtopic" id="file1400-conceptId"><h1>wai-test</h1>
  <p class="hascomments" id="file1400-conceptId-x-3">No amount of static typing will obviate the need for testing. We all know that
   automated testing is a necessity for any serious applications. <b id="file1400-conceptId-x-4">wai-test</b> is the recommended
   approach to testing a WAI application. Since requests and responses are simple datatypes, it is
   easy to mock up a fake request, pass it to an application, and test properties about the
   response. wai-test simply provides some convenience functions for testing common properties like
   the presence of a header or a status code.</p>
 </section></section><section class="subtopic" id="file1406-conceptId"><h1>Templates</h1>
  <p class="hascomments" id="file1406-conceptId-x-3">In the typical Model-View-Controller (MVC) paradigm, one of the goals is to separate logic from
   the view. Part of this separation is achieved through the use of a template language. However,
   there are many different ways to approach this issue. At one end of the spectrum, for example,
   PHP/ASP/JSP will allow you to embed any arbitrary code within your template. At the other end,
   you have systems like StringTemplate and QuickSilver, which are passed some arguments and have no
   other way of interacting with the rest of the program.</p>
  <p class="hascomments" id="file1406-conceptId-x-4">Each system has its pros and cons. Having a more powerful template system can be a
   huge convenience. Need to show the contents of a database table? No problem, pull it in with the
   template. However, such an approach can quickly lead to convoluted code, interspersing database
   cursor updates with HTML generation. This can be commonly seen in a poorly written ASP
   project.</p>
  <p class="hascomments" id="file1406-conceptId-x-5">While weak template systems make for simple code, they also tend towards a lot of
   redundant work. You will often need to not only keep your original values in datatypes, but also
   create dictionaries of values to pass to the template. Maintaining such code is not easy, and
   usually there is no way for a compiler to help you out.</p>
  <p class="hascomments" id="file1406-conceptId-x-6">Yesod&#39;s family of template languages, the Shakespearean languages, strive for a middle ground.
   By leveraging Haskell&#39;s standard referential transparency, we can be assured that our templates
   produce no side effects. However, they still have full access to all the variables and functions
   available in your Haskell code. Also, since they are fully checked for both well-formedness,
   variable resolution and type safety at compile time, typos are much less likely to have you
   searching through your code trying to pin down a bug.</p>
  <aside class="note" id="file1406-conceptId-x-7">Why the name Shakespeare? The HTML language, Hamlet, was the first language written, and
   originally based its syntax on Haml. Since it was at the time a &quot;reduced&quot; Haml, Hamlet seemed
   appropriate. As we added CSS and Javascript options, we decided to keep the naming theme with
   Cassius and Julius. At this point, Hamlet looks nothing like Haml, but the name stuck
   anyway.</aside>
 <section class="subtopic" id="file1402-conceptId"><h1>Types</h1>
  <p class="hascomments" id="file1402-conceptId-x-3">One of the overarching themes in Yesod is proper use of types to make developers&#39;
   lives easier. In Yesod templates, we have two main examples:<ol id="file1402-conceptId-ol_pnw_rvy_id"><li id="file1402-conceptId-x-4">All content embedded into a Hamlet template must have a type of <code id="file1402-conceptId-x-5">Html</code>. As we&#39;ll see later, this forces us to properly escape dangerous HTML when
     necessary, while avoiding accidental double-escaping as well.</li>
    <li id="file1402-conceptId-x-6">Instead of concatenating URLs directly in our template, we have datatypes- known as
     type-safe URLs- which represent the routes in our application.</li>
   </ol></p>
  <p class="hascomments" id="file1402-conceptId-x-7">As a real-life example, suppose that a user submits his/her name to an application via
   a form. This data would be represented with the Text datatype. Now we would like to display this
   variable, called <b id="file1402-conceptId-x-21">name</b>, in a page. The type system- at compile time- prevents it from being
   simply stuck into a Hamlet template, since it&#39;s not of type Html. Instead we must convert it
   somehow. For this, there are two conversion functions:<ol id="file1402-conceptId-ol_sfn_nwy_id"><li id="file1402-conceptId-x-8">toHtml will automatically escape any entities. So if a user submits the string
      <code id="file1402-conceptId-x-9">&lt;script src=&quot;http://example.com/evil.js&quot;&gt;&lt;/script&gt;</code>, the
     less than signs will automatically be converted to <code id="file1402-conceptId-x-10">&amp;lt;</code>.</li>
    <li id="file1402-conceptId-x-11">preEscapedText, on the other hand, will leave the content precisely as it is
     now.</li>
   </ol>So in the case of untrusted input from a possibly nefarious user, toHtml would be our
   recommended approach. On the other hand, let us say we have some static HTML stored on our server
   that we would like to insert into some pages verbatim. In that case, we could load it into a Text
   value and then apply preEscapedText, thereby avoiding any double-escaping.</p>
  <p class="hascomments" id="file1402-conceptId-x-12">By default, Hamlet will use the toHtml function on any content you try to interpolate.
   Therefore, you only need to explicitly perform a conversion if you want to avoid escaping. This
   follows the dictum of erring on the side of caution.</p>
  <figure id="file1402-conceptId-x-13"><figcaption>Proper HTML Handling</figcaption>
   
   <pre class="codeblock" id="file1402-conceptId-x-15">name &lt;- runInputPost $ ireq textField &quot;name&quot;
snippet &lt;- readFile &quot;mysnippet.html&quot;
return [hamlet|
    &lt;p&gt;Welcome #{name}, you are on my site!
    &lt;div .copyright&gt;#{preEscapedText snippet}
|]</pre>
  </figure>
  <p class="hascomments" id="file1402-conceptId-x-16">The first step in type-safe URLs is creating a datatype that represents all the
   routes in your site. Let us say you have a site for displaying Fibonacci numbers. The site will
   have a separate page for each number in the sequence, plus the homepage. This could be modeled
   with the Haskell datatype<pre class="codeblock" id="file1402-conceptId-x-17">data FibRoute = Home | Fib Int</pre>We could
   then create a page like
   so:<pre class="codeblock" id="file1402-conceptId-x-18">&lt;p&gt;You are currently viewing number #{show index} in the sequence. Its value is #{fib index}.
&lt;p&gt;
    &lt;a href=@{Fib (index + 1)}&gt;Next number
&lt;p&gt;
    &lt;a href=@{Home}&gt;Homepage</pre>Then
   all we need is some function to convert a type-safe URL into a string representation. In our
   case, that could look something like
   this:<pre class="codeblock" id="file1402-conceptId-x-19">render :: FibRoute -&gt; Text
render Home = &quot;/home&quot;
render (Fib i) = &quot;/fib/&quot; ++ show i</pre></p>
  <p class="hascomments" id="file1402-conceptId-x-20">Fortunately, all of the boilerplate of defining and rendering type-safe URL datatypes is
   handled for the developer automatically by Yesod. We will cover that in more depth later.</p>
 </section><section class="subtopic" id="file1404-conceptId"><h1>The Other Languages</h1>
  <p class="hascomments" id="file1404-conceptId-x-3">In addition to Hamlet, there are three other languages. Julius is used for Javascript.
   However, it&#39;s a simple pass-through language, just allowing for interpolation. In other words,
   barring accidental use of the interpolation syntax, any piece of Javascript could be dropped into
   Julius and be valid. For example, to test the performance of Julius, jQuery was run through the
   language without an issue.</p>
  <p class="hascomments" id="file1404-conceptId-x-7">The other two languages are alternate CSS syntaxes. Those familiar with the difference between
   Sass and Less will recognize this immediately: Cassius is whitespace delimited, while Lucius uses
   braces. Lucius is in fact a superset of CSS, meaning all valid CSS files are valid Lucius files.
   In addition to allowing text interpolation, there are some helper datatypes provided to model
   unit sizes and colors. Also, type-safe URLs work in these languages, making it convenient for
   specifying background images.</p>
  <p class="hascomments" id="file1404-conceptId-x-4">Aside from the type safety and compile-time checks mentioned above, having specialized
   languages for CSS and Javascript give us a few other advantages:</p>
  <ul id="file1404-conceptId-ul_agn_iwn_zd"><li id="file1404-conceptId-x-5">For production, all the CSS and Javascript is compiled into the final executable, increasing
    performance (by avoiding file I/O) and simplifying deployment.</li>
   <li id="file1404-conceptId-x-6">By being based around the efficient builder construct described earlier, the
    templates can be rendered very quickly.</li>
   <li id="file1404-conceptId-x-8">There is built-in support for automatically including these in final webpages. We
    will get into this in more detail when describing widgets below.</li>
  </ul>
 </section></section><section class="subtopic" id="file1412-persistent"><h1>Persistent</h1>
  <p class="hascomments" id="file1412-persistent-x-3">Most web applications will want to store information in a database. Traditionally, this has
   meant some kind of SQL database. In that regard, Yesod continues a long tradition, with
   PostgreSQL as our most commonly used backend. But as we have been seeing in recent years, SQL
   isn&#39;t always the answer to the persistence question. Therefore, Yesod was designed to work well
   with NoSQL databases as well, and ships with a MongoDB backend as a first-class citizen.</p>
  <p class="hascomments" id="file1412-persistent-x-4">The result of this design decision is Persistent, Yesod&#39;s preferred storage option. There are
   really two guiding lights for Persistent: make it as backend agnostic as possible, and let user
   code be completely type-checked.</p>
  <p class="hascomments" id="file1412-persistent-x-5">At the same time, we fully recognize that it is impossible to completely shield the
   user away from all details of the backend. Therefore, we provide two types of escape routes:</p>
  <ul id="file1412-persistent-ul_d97fb29c-e69e-46be-958c-331addbddd2f"><li id="file1412-persistent-x-6">Provide backend-specific functionality as necessary. For example, Persistent provides
    features for SQL joins and MongoDB lists and hashes. Proper portability warnings will apply, but
    if you want this functionality, it&#39;s there.</li>
   <li id="file1412-persistent-x-7">Easy access to performing raw queries. We don&#39;t believe it&#39;s possible for any
    abstraction to cover every use case of the underlying library. If you just have to write a
    5-table, correlated subquery in SQL, go right ahead.</li>
  </ul>
 <section class="subtopic" id="file1407-terminology"><h1>Terminology</h1>
  <p class="hascomments" id="file1407-terminology-x-3">The most primitive datatype in Persistent is the <code id="file1407-terminology-x-4">PersistValue</code>. This represents
   any raw data that can appear within the database, such as a number, a date, or a string. Of
   course, sometimes you&#39;ll have some more user-friendly datatypes you want to store, like HTML. For
   that, we have the <code id="file1407-terminology-x-5">PersistField</code> class. Internally, a
    <code id="file1407-terminology-x-6">PersistField</code> expresses itself to the database in terms of a
    <code id="file1407-terminology-x-7">PersistValue</code>.</p>
  <p class="hascomments" id="file1407-terminology-x-8">All of this is very nice, but we will want to combine different fields together into a
   larger picture. For this, we have a <code id="file1407-terminology-x-9">PersistEntity</code>, which is basically a
   collection of <code id="file1407-terminology-x-10">PersistField</code>s. And finally, we have a <code id="file1407-terminology-x-11">PersistBackend</code> that describes how to create, read, update and delete these
   entities.</p>
  <p class="hascomments" id="file1407-terminology-x-12">As a practical example, consider storing a person in a database. We want to store the
   person&#39;s name, birthday, and a profile image (a PNG file). We create a new entity <code id="file1407-terminology-x-13">Person</code> with three fields: a <code id="file1407-terminology-x-14">Text</code>, a <code id="file1407-terminology-x-15">Day</code> and a <code id="file1407-terminology-x-16">PNG</code>. Each of those get stored in the
   database using a different <code id="file1407-terminology-x-17">PersistValue</code> constructor: <code id="file1407-terminology-x-18">PersistText</code>, <code id="file1407-terminology-x-19">PersistDay</code> and <code id="file1407-terminology-x-20">PersistByteString</code>, respectively.</p>
  <p class="hascomments" id="file1407-terminology-x-21">There is nothing surprising about the first two mappings, but the last one is
   interesting. There is no specific constructor for storing PNG content in a database, so instead
   we use a more generic type (a ByteString, which is just a sequence of bytes). We could use the
   same mechanism to store other types of arbitrary data.</p>
  <aside class="note" id="file1407-terminology-x-22">The commonly held best practice for storing images is to keep the data on the
   filesystem and just keep a path to the image in the database. We do not advocate against using
   that approach, but are rather using database-stored images as an illustrative example.</aside>
  <p class="hascomments" id="file1407-terminology-x-23">How is all this represented in the database? Consider SQL as an example: the <code id="file1407-terminology-x-24">Person</code> entity becomes a table with three columns (name, birthday, and
   picture). Each field is stored as a different SQL type: <code id="file1407-terminology-x-25">Text</code> becomes a
    <code id="file1407-terminology-x-26">VARCHAR</code>, <code id="file1407-terminology-x-27">Day</code> becomes a <code id="file1407-terminology-x-28">Date</code> and <code id="file1407-terminology-x-29">PNG</code> becomes a <code id="file1407-terminology-x-30">BLOB</code> (or
    <code id="file1407-terminology-x-31">BYTEA</code>).</p>
  <p class="hascomments" id="file1407-terminology-x-32">The story for MongoDB is very similar. <code id="file1407-terminology-x-33">Person</code> becomes its own
    <dfn id="file1407-terminology-x-34">document</dfn>, and its three fields each become a MongoDB <dfn id="file1407-terminology-x-35">field</dfn>. There is
   no need for data types or creation of a schema in MongoDB.</p>
  <table id="file1407-terminology-simpletable_zxa_klv_le"><thead id="file1407-terminology-x-36"><td id="file1407-terminology-x-37">Persistent</td>
    <td id="file1407-terminology-x-38">SQL</td>
    <td id="file1407-terminology-x-39">MongoDB</td>
   </thead>
   <tr id="file1407-terminology-x-40"><td id="file1407-terminology-x-41">PersistEntity</td>
    <td id="file1407-terminology-x-42">Table</td>
    <td id="file1407-terminology-x-43">Document</td>
   </tr>
   <tr id="file1407-terminology-x-44"><td id="file1407-terminology-x-45">PersistField</td>
    <td id="file1407-terminology-x-46">Column</td>
    <td id="file1407-terminology-x-47">Field</td>
   </tr>
   <tr id="file1407-terminology-x-48"><td id="file1407-terminology-x-49">PersistValue</td>
    <td id="file1407-terminology-x-50">Column type </td>
    <td id="file1407-terminology-x-51"><i id="file1407-terminology-x-52">N/A</i></td>
   </tr>
  </table>
 </section><section class="subtopic" id="file1408-type-safety"><h1>Type Safety</h1>
  <p class="hascomments" id="file1408-type-safety-x-3">Persistent handles all of the data marshaling concerns behind the scenes. As a user of
   Persistent, you get to completely ignore the fact that a <code id="file1408-type-safety-x-4">Text</code> becomes a
    <code id="file1408-type-safety-x-5">VARCHAR</code>. You are able to simply declare your datatypes and use
   them.</p>
  <p class="hascomments" id="file1408-type-safety-x-6">Every interaction with Persistent is strongly typed. This prevents you from
   accidentally putting a number in the date fields; the compiler will not accept it. Entire classes
   of subtle bugs simply disappear at this point.</p>
  <p class="hascomments" id="file1408-type-safety-x-7">Nowhere is the power of strong typing more pronounced than in refactoring. Let&#39;s say
   you have been storing users&#39; ages in the database, and you realize that you really wanted to
   store birthdays instead. You are able to make a single line change to your entities declaration
   file, hit compile, and automatically find every single line of code that needs to be updated.</p>
  <p class="hascomments" id="file1408-type-safety-x-8">In most dynamically-typed languages, and their web frameworks, the recommended
   approach to solving this issue is writing unit tests. If you have full test coverage, then
   running your tests will immediately reveal what code needs to be updated. This is all well and
   good, but it is a weaker solution than true types:</p>
  <ul id="file1408-type-safety-ul_a07db389-836b-4cef-8d56-d788396d30f9"><li id="file1408-type-safety-x-9">It is all predicated on having full test coverage. This takes extra time, and worse,
    is boilerplate code that the compiler should be able to do for you.</li>
   <li id="file1408-type-safety-x-10">You might be a perfect developer who never forgets to write a test, but can you say the same
    for every person who will touch your codebase?</li>
   <li id="file1408-type-safety-x-11">Even 100% test coverage doesn&#39;t guarantee that you really have tested every case. All it&#39;s
    done is proven you&#39;ve tested every line of code.</li>
  </ul>
 </section><section class="subtopic" id="file1409-persistent-syntax"><h1>Cross-database Syntax</h1>
  <p class="hascomments" id="file1409-persistent-syntax-x-3">Creating an SQL schema that works for multiple SQL engines can be tricky enough. How
   do you create a schema that will also work with a non-SQL database like MongoDB?</p>
  <p class="hascomments" id="file1409-persistent-syntax-x-4">Persistent allows you to define your entities in a high-level syntax, and will
   automatically create the SQL schema for you. In the case of MongoDB, we currently use a
   schema-less approach. This also allows Persistent to ensure that your Haskell datatypes match
   perfectly with the database&#39;s definitions.</p>
  <p class="hascomments" id="file1409-persistent-syntax-x-5">Additionally, having all this information gives Persistent the ability to perform more advanced
   functions for you automatically, such as migrations.</p>
 </section><section class="subtopic" id="file1410-migrations"><h1>Migrations</h1>
  <p class="hascomments" id="file1410-migrations-x-3">Persistent not only creates schema files as necessary, but will also automatically
   apply database migrations if possible. Database modification is one of the less-developed pieces
   of the SQL standard, and thus each engine has a different take on the process. As such, each
   Persistent backend defines its own set of migration rules. In PostgreSQL, which has a rich set of
    <code id="file1410-migrations-x-6">ALTER TABLE</code> rules, we use those extensively. Since SQLite lacks much
   of that functionality, we are reduced to creating temporary tables and copying rows. MongoDB&#39;s
   schema-less approach means no migration support is required.</p>
  <p class="hascomments" id="file1410-migrations-x-4">This feature is purposely limited to prevent any kind of data loss. It will not remove any
   columns automatically; instead, it will give you an error message, telling you the unsafe
   operations that are necessary in order to continue. You will then have the option to either
   manually run the SQL it provides you, or to change your data model to avoid the dangerous
   behavior.</p>
 </section><section class="subtopic" id="file1411-Relations"><h1>Relations</h1>
  <p class="hascomments" id="file1411-Relations-x-3">Persistent is non-relational in nature, meaning it has no requirement for backends to
   support relations. However, in many use cases, we may want to use relations. In those cases,
   developers will have full access to them.</p>
  <p class="hascomments" id="file1411-Relations-x-4">Assume we want to now store a list of skills with each user. If we were writing a
   MongoDB-specific app, we could go ahead and just store that list as a new field in the original
   Person entity. But that approach would not work in SQL. In SQL, we call this kind of relationship
   a one-to-many relationship.</p>
  <p class="hascomments" id="file1411-Relations-x-5">The idea is to store a reference to the &quot;one&quot; entity (person) with each &quot;many&quot; entity (skill).
   Then if we want to find all the skills a person has, we simply find all skills that reference
   that person. For this reference, every entity has an ID. And as you might expect by now, these
   IDs are completely type-safe. The datatype for a Person ID is <code id="file1411-Relations-x-6">PersonId</code>. So to
   add our new skill, we would just add the following to our entity definition:</p>
  <pre class="codeblock" id="file1411-Relations-x-7">Skill
    person PersonId
    name Text
    description Text
    UniqueSkill person name</pre>
  <p class="hascomments" id="file1411-Relations-x-8">This ID datatype concept comes up throughout Persistent and Yesod. You can dispatch based on an
   ID. In such a case, Yesod will automatically marshal the textual representation of the ID to the
   internal one, catching any parse errors along the way. These IDs are used for lookup and deletion
   with the <code id="file1411-Relations-x-9">get</code> and <code id="file1411-Relations-x-10">delete</code> functions, and are returned by the
   insertion and query functions <code id="file1411-Relations-x-11">insert</code> and <code id="file1411-Relations-x-12">selectList</code>.</p>
 </section></section><section class="subtopic" id="file1418-yesod"><h1>Yesod</h1>
  <p class="hascomments" id="file1418-yesod-x-3">If we are looking through the typical Model-View-Controller (MVC) paradigm, Persistent
   is the model and Sheakespeare is the view. This would leave Yesod as the controller.</p>
  <p class="hascomments" id="file1418-yesod-x-4">The most basic feature of Yesod is routing. It features a declarative syntax and
   type-safe dispatch. Layered on top of this, Yesod provides many other features: streaming content
   generation, widgets, i18n, static files, forms and authentication. But the core feature added by
   Yesod is really routing.</p>
  <p class="hascomments" id="file1418-yesod-x-5">This layered approach makes it simpler for users to swap different components of the system.
   Some people are not interested in using Persistent. For them, nothing in the core system even
   mentions Persistent. Likewise, while commonly used features, not everyone needs authentication or
   static file serving.</p>
  <p class="hascomments" id="file1418-yesod-x-6">On the other hand, many users <i id="file1418-yesod-x-7">will</i> want to integrate all of these features. And doing
   so- while enabling all the optimizations available in Yesod- is not always straightforward. To
   simplify the process, Yesod provides a scaffolding tool as well that sets up a basic site with
   the most commonly used features.</p>
 <section class="subtopic" id="file1414-routes"><h1>Routes</h1>
  <p class="hascomments" id="file1414-routes-x-3">Given that routing is really the main function of Yesod, let&#39;s start there. The routing syntax
   is very simple: a <dfn id="file1414-routes-x-4">resource pattern</dfn>, a name, and request methods. For example, a
   simple blog site might look like:</p>
  <pre class="codeblock" id="file1414-routes-x-5">/ HomepageR GET
/add-entry AddEntryR GET POST
/entry/#EntryId EntryR GET</pre>
  <p class="hascomments" id="file1414-routes-x-6">The first line defines the homepage. This says &quot;I respond to the root path of the domain, I&#39;m
   called HomepageR, and I answer GET requests.&quot;<aside class="note" id="file1414-routes-x-7">The trailing &quot;R&quot; on the resource names is
    simply a convention, it doesn&#39;t hold any special meaning besides giving a cue to the developer
    that something is a route.</aside></p>
  <p class="hascomments" id="file1414-routes-x-8">The second line defines the add entry page. This time, we answer both GET and POST
   requests. You might be wondering why Yesod, as opposed to most frameworks, requires you to
   explicitly state your request methods. The reason is that Yesod tries to adhere to RESTful
   principles as much as possible, and a GET and POST request really have very different meanings.
   Not only do you state these two methods separately, but later you will define their handler
   functions separately.</p>
  <aside class="note" id="file1414-routes-x-9">This is actually an optional feature in Yesod. If you want, you can leave off the list of
   methods and your handler function will deal with all methods.</aside>
  <p class="hascomments" id="file1414-routes-x-10">The third line is a bit more interesting. After the second slash we have <code id="file1414-routes-x-11">#EntryId</code>. This defines a parameter of type <code id="file1414-routes-x-12">EntryId</code>. In the Persistent section, we already alluded to this feature: Yesod will now
   automatically marshal the path component into the relevant ID value. Assuming an SQL backend
   (Mongo is addressed later), if a user requests <code id="file1414-routes-x-13">/entry/5</code>, the handler
   function will get called with an argument <code id="file1414-routes-x-14">EntryId 5</code>. But if the user
   requests <code id="file1414-routes-x-15">/entry/some-blog-post</code>, Yesod will return a 404.</p>
  <p class="hascomments" id="file1414-routes-x-16">This is obviously possible in most other web frameworks as well. The approach taken
   by Django, for instance, would use a regular expression for matching the routes, e.g. <code id="file1414-routes-x-17">r&quot;/entry/(\d+)&quot;</code>. The Yesod approach, however, provides some advantages:</p>
  <ul id="file1414-routes-ul_b9e08670-a14a-4ad7-833b-20e1e7e38b2d"><li id="file1414-routes-x-18">Typing &quot;EntryId&quot; is much more semantic/developer-friendly than a regular
    expression.</li>
   <li id="file1414-routes-x-19">Regular expressions cannot express everything (or at least, can&#39;t do so
    succinctly). We can use <code id="file1414-routes-x-20">/calendar/#Day</code> in Yesod; do you want to type
    a regex to match dates in your routes?</li>
   <li id="file1414-routes-x-21">Yesod also automatically marshals the data for us. In our calendar case, our handler function
    would receive a <code id="file1414-routes-x-22">Day</code> value. In the Django equivalent, the function would receive
    a piece of text which it would then have to marshal itself. This is tedious, repetitive and
    inefficient.</li>
   <li id="file1414-routes-x-23">So far we&#39;ve assumed that a database ID is just a string of digits. But what if it&#39;s more
    complicated? MongoDB uses GUIDs, for example. In Yesod, your #EntryId will still work, and the
    type system will instruct Yesod how to parse the route. In a regex system, you would have to go
    through all of your routes and change the (\d+) to whatever monstrosity of regex is needed to
    match.</li>
  </ul>
 <section class="subtopic" id="file1413-type-safe-urls"><h1>Type-safe URLs</h1>
  <p class="hascomments" id="file1413-type-safe-urls-x-3">This approach to routing gives birth to one of Yesod&#39;s most powerful features:
   type-safe URLs. Instead of just splicing together pieces of text to refer to a route, every route
   in your application can be represented by a Haskell value. This immediately eliminates a large
   number of 404 not found errors: it is simply not possible to produce an invalid URL.</p>
  <aside class="note" id="file1413-type-safe-urls-x-4">It is still possible to produce a 404 URL, such as by referring to a blog post that
   does not exist. However, all URLs will be formed correctly.</aside>
  <p class="hascomments" id="file1413-type-safe-urls-x-5">So how does this magic work? Each site has a route datatype, and each resource pattern gets its
   own constructor. In our previous example, we would get something that looks like:</p>
  <pre class="codeblock"><pre style="padding: 0;margin: 0;"><span style="color: green;font-weight: bold;">data</span> <span style="color: blue;">MySiteRoute</span> = <span style="color: blue;">HomepageR</span>
                 | <span style="color: blue;">AddEntryR</span>
                 | <span style="color: blue;">EntryR</span> <span style="color: blue;">EntryId</span>
</pre></pre>
  <p class="hascomments" id="file1413-type-safe-urls-x-7">If you want to link to the homepage, you use <code id="file1413-type-safe-urls-x-8">HomepageR</code>. To link to a specific
   entry, you would use the <code id="file1413-type-safe-urls-x-9">EntryR</code> constructor with an <code id="file1413-type-safe-urls-x-10">EntryId</code>
   parameter. For example, to create a new entry and redirect to it, you could write:</p>
  <pre class="codeblock"><pre style="padding: 0;margin: 0;"><span style="color: blue;font-weight: bold;">entryId</span> &lt;- insert (<span style="color: blue;">Entry</span> <span style="color: green;">&quot;My Entry&quot;</span> <span style="color: green;">&quot;Some content&quot;</span>)
<span style="color: blue;font-weight: bold;">redirect</span> <span style="color: blue;">RedirectTemporary</span> (<span style="color: blue;">EntryR</span> entryId)
</pre></pre>
  <p class="hascomments" id="file1413-type-safe-urls-x-12">Hamlet, Lucius and Julius all include built-in support for these type-safe URLs.
   Inside a Hamlet template, you can easily create a link to the add entry page:</p>
  <pre class="codeblock"><pre style="padding: 0;margin: 0;"><span style="color: blue;">&lt;a</span> <span style="color: green;font-weight: bold;">href</span>=@{AddEntryR}<span style="color: blue;">&gt;</span>Create a new entry.
</pre></pre>
  <p class="hascomments" id="file1413-type-safe-urls-x-14">The best part? Just like Persistent entities, the compiler will keep you honest. If you change
   any of your routes (e.g., you want to include the year and month in your entry routes), Yesod
   will force you to update every single reference throughout your codebase.</p>
 </section></section><section class="subtopic" id="file1415-handlers"><h1>Handlers</h1>
  <p class="hascomments" id="file1415-handlers-x-3">Once you define your routes, you need to tell Yesod how you want to respond to
   requests. This is where <dfn id="file1415-handlers-x-4">handler functions</dfn> come into play. The setup is
   simple; for each resource (e.g., HomepageR) and request method, create a function named
   methodResourceR. For our previous example, we would need four functions: <code id="file1415-handlers-x-5">getHomepageR</code>, <code id="file1415-handlers-x-6">getAddEntryR</code>, <code id="file1415-handlers-x-7">postAddEntryR</code>, and <code id="file1415-handlers-x-8">getEntryR</code>.</p>
  <p class="hascomments" id="file1415-handlers-x-9">All of the parameters collected from the route are passed in as arguments to the handler
   function. <code id="file1415-handlers-x-10">getEntryR</code> will take a first arugment of type EntryId, while all the
   other functions will take no arguments.</p>
  <p class="hascomments" id="file1415-handlers-x-11">The handler functions live in a <code id="file1415-handlers-x-12">Handler</code> monad, which
   provides a great deal of functionality, such as redirecting, accessing sessions, and running
   database queries. For the last one, a typical way to start of the <code id="file1415-handlers-x-13">getEntryR</code> function would be:</p>
  <pre class="codeblock" id="file1415-handlers-x-14">getEntryR entryId = do
    entry &lt;- runDB $ get404 entryId</pre>
  <p class="hascomments" id="file1415-handlers-x-15">This will run a database action that will get the entry associated with the given ID from the
   database. If there is no such entry, it will return a 404 response.</p>
  <p class="hascomments" id="file1415-handlers-x-16">Each handler function will return some value, which must be an instance of
    <code id="file1415-handlers-x-17">HasReps</code>. This is another RESTful feature at play: instead of just returning
   some HTML or some JSON, you can return a value that will return either one, depending on the HTTP
   Accept request header. In other words, in Yesod, a resource is a specific piece of data, and it
   can be returned in one of many <dfn id="file1415-handlers-x-18">representations</dfn>.</p>
 </section><section class="subtopic" id="file1416-widgets"><h1>Widgets</h1>
  <p class="hascomments" id="file1416-widgets-x-3">Assume you want to include a navbar on a few different pages of your site. This navbar
   will load up the five most recent blog posts (stored in your database), generate some HTML, and
   then need some CSS and Javascript to style and enhance.</p>
  <p class="hascomments" id="file1416-widgets-x-4">Without a higher-level interface to tie these components together, this could be a
   pain to implement. You could add the CSS to the sitewide CSS file, but that&#39;s adding extra
   declarations you don&#39;t always need. Likewise with the Javascript, though a bit worse: having that
   extra Javascript might cause problems on a page it was not intended to live on. You will also be
   breaking modularity by having to generate the database results from multiple handler
   functions.</p>
  <p class="hascomments" id="file1416-widgets-x-5">In Yesod, we have a very simple solution: widgets. A widget is a piece of code that
   ties together HTML, CSS and Javascript, allowing you to add content to both the &lt;head&gt; and
   &lt;body&gt;, and can run any arbitrary code that belongs in a handler. For example, to implement
   our navbar:</p>
  <pre class="codeblock"><pre style="padding: 0;margin: 0;"><span style="color: gray;">-- Get last five blog posts. The &quot;lift&quot; says to run this code like we&#39;re in the handler.</span>
<span style="color: blue;font-weight: bold;">entries</span> &lt;- lift $ runDB $ selectList [] [<span style="color: blue;">LimitTo</span> <span style="color: teal;">5</span>, <span style="color: blue;">Desc</span> <span style="color: blue;">EntryPosted</span>]
<span style="color: blue;font-weight: bold;">toWidget</span> [hamlet|
&lt;ul .navbar&gt;
    $forall entry &lt;- entries
        &lt;li&gt;#{entryTitle entry}
|]
<span style="color: blue;font-weight: bold;">toWidget</span> [lucius| .navbar { color: red } |]
<span style="color: blue;font-weight: bold;">toWidget</span> [julius|alert(<span style="color: green;">&quot;Some special Javascript to play with my navbar&quot;</span>);|]
</pre></pre>
  <p class="hascomments" id="file1416-widgets-x-7">But there is even more power at work here. When you produce a page in Yesod, the
   standard approach is to combine a number of widgets together into a single widget containing all
   your page content, and then apply defaultLayout. This function is defined per site, and applies
   the standard site layout.</p>
  <p class="hascomments" id="file1416-widgets-x-8">There are two out-of-the-box approaches to handle where the CSS and Javascript
   goes:</p>
  <ol id="file1416-widgets-ul_d94f42ac-dd25-4a5f-a166-225af4b03c11"><li id="file1416-widgets-x-9">Concatenate them and place them into &lt;style&gt; and &lt;script&gt; tags, respectively, within
    your HTML.</li>
   <li id="file1416-widgets-x-10">Place them in external files and refer to them with &lt;link&gt; and &lt;script&gt; tags,
    respectively.</li>
  </ol>
  <p class="hascomments" id="file1416-widgets-x-11">In addition, your Javascript can be automatically minified. Option 2 is the preferred
   approach, since it allows a few extra optimizations:</p>
  <ol id="file1416-widgets-ol_32f7c374-f394-4809-94f5-00480a982d5d"><li id="file1416-widgets-x-12">The files are created with names based on a hash of the contents. This means you can place
    cache values far in the future without worries of users receiving stale content.</li>
   <li id="file1416-widgets-x-13">Your Javascript can be asynchronously loaded.</li>
  </ol>
  <p class="hascomments" id="file1416-widgets-x-14">The second point requires a bit of elaboration. Widgets not only contain raw
   Javascript, they also contain a list of Javascript dependencies. For example, many sites will
   refer to the jQuery library and then add some Javascript that uses it. Yesod is able to
   automatically turn all of that into an asynchronous load via yepnope.js.</p>
  <p class="hascomments" id="file1416-widgets-x-15">In other words, widgets allow you to create modular, composable code that will result in
   incredibly efficient serving of your static resources.</p>
 </section><section class="subtopic" id="file1417-subsites"><h1>Subsites</h1>
  <p class="hascomments" id="file1417-subsites-x-3">Many websites share common pieces of functionality. Perhaps the two most common examples of
   this are serving static files and authentication. In Yesod, you can easily drop in this code
   using a <dfn id="file1417-subsites-x-4">subsite</dfn>. All you need to do is add an extra line to your routes. For
   example, to add the static subsite, you would write:</p>
  <pre class="codeblock" id="file1417-subsites-x-5">/static StaticR Static getStatic</pre>
  <p class="hascomments" id="file1417-subsites-x-6">The first argument tells where in the site the subsite starts. The static subsite is
   usually used at /static, but you could use whatever you want. StaticR is the name of the route;
   this is also entirely up to you, but convention is to use StaticR. Static is the name of the
   static subsite; this is one you do not have control over. <code id="file1417-subsites-x-9">getStatic</code> is a
   function that returns the settings for the static site, such as where the static files are
   located.</p>
  <p class="hascomments" id="file1417-subsites-x-7">Like all of your handlers, the subsite handlers also have access to the
    <code id="file1417-subsites-x-8">defaultLayout</code> function. This means that a well designed subsite will
   automatically use your site skin without any extra intervention on your part.</p>
 </section></section><section class="subtopic" id="file1636-conceptId"><h1>Lessons Learned</h1>
  <p class="hascomments" id="file1636-conceptId-x-3">Yesod has been a very rewarding project to work on. It has given me an opportunity to work on a
   large system with a diverse group of developers. One of the things that has truly shocked me is
   how different the end product has become versus what I had originally intended. I started off
   Yesod by creating a list of goals. Very few of the main features we currently tout in Yesod are
   in that list, and a good portion of that list is no longer something I plan to implement. The
   first lesson is:</p>
  <blockquote id="file1636-conceptId-x-4">You will have a better idea of the system you need after you start working on it. Do not tie
   yourself down to your initial ideas.</blockquote>
  <p class="hascomments" id="file1636-conceptId-x-5">As this was my first major piece of Haskell code, I&#39;ve learnt a lot about the language during
   Yesod&#39;s development. I&#39;m sure others can relate to the feeling of &quot;How did I ever write code like
   this?&quot; Even though that initial code was not of the same caliber as the code we have in Yesod at
   this point, it was solid enough to kick-start the project. The second lesson is:</p>
  <blockquote id="file1636-conceptId-x-6">Don&#39;t be deterred due to supposed lack of mastery of the tools at hand. Write the best code
   you can, and keep improving it.</blockquote>
  <p class="hascomments" id="file1636-conceptId-x-7">One of the most difficult steps in Yesod&#39;s development was moving from a single-person team-
   me- to collaborating with others. It started off simply with merging pull requests on Github, and
   eventually moved to having a number of core maintainers. I had established some of my own
   development patterns, which were nowhere explained or documented. As a result, contributors found
   it difficult to pull my latest unreleased changes and play around with them. This hindered others
   both from contributing and testing.</p>
  <p class="hascomments" id="file1636-conceptId-x-8">When Greg Weber came aboard as another lead on Yesod, he put in place a lot of the coding
   standards that were sorely lacking. To compound the problems, there were some inherent
   difficulties playing with the Haskell development toolchain, specifically dealing with Yesod&#39;s
   large number of packages. One of the goals of the entire Yesod team has since been to create
   standard scripts and tools to automate building. Many of these tools are making their way back
   into the general Haskell community. The final lesson is:</p>
  <blockquote id="file1636-conceptId-x-9">Consider early on how to make your project approachable for others.</blockquote>
  
 </section></article><p id="comments">Comments</p><div id="disqus_thread"></div><p><a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></p></section><script type="text/javascript">var disqus_shortname = 'yesoddocs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><section class="getting-started"><h2>Archives</h2><div id="archive"><ul><li id="nav-2021"><span>2021</span><ul><li id="nav-202102"><span>February</span><ul><li class="leaf"><a href="/blog/2021/02/chatwisely-intro">We Made ChatWisely With Haskell</a></li></ul></li></ul></li><li id="nav-2020"><span>2020</span><ul><li id="nav-202005"><span>May</span><ul><li class="leaf"><a href="/blog/2020/05/blogannouncement">A new Haskell/Yesod Beginners Blog</a></li></ul></li></ul></li><li id="nav-2019"><span>2019</span><ul><li id="nav-201912"><span>December</span><ul><li class="leaf"><a href="/blog/2019/12/bookportuguese">A new Yesod book in Portuguese</a></li></ul></li><li id="nav-201902"><span>February</span><ul><li class="leaf"><a href="/blog/2019/02/deprecating-googleemail2">Deprecating GoogleEmail2</a></li></ul></li></ul></li><li id="nav-2018"><span>2018</span><ul><li id="nav-201801"><span>January</span><ul><li class="leaf"><a href="/blog/2018/01/upcoming-yesod-breaking-changes">Upcoming Yesod breaking changes</a></li></ul></li></ul></li><li id="nav-2017"><span>2017</span><ul><li id="nav-201711"><span>November</span><ul><li class="leaf"><a href="/blog/2017/11/mega-sdist">mega-sdist: the mega repo helper</a></li></ul></li><li id="nav-201706"><span>June</span><ul><li class="leaf"><a href="/blog/2017/06/updated-yesod-scaffolding">Updated Yesod Scaffolding</a></li></ul></li><li id="nav-201702"><span>February</span><ul><li class="leaf"><a href="/blog/2017/02/changes-yesods-ci">Changes to Yesod&#39;s CI</a></li></ul></li></ul></li><li id="nav-2016"><span>2016</span><ul><li id="nav-201611"><span>November</span><ul><li class="leaf"><a href="/blog/2016/11/new-yesod-devel-server">The New (Experimental) Yesod Development Server - Feedback Requested!</a></li><li class="leaf"><a href="/blog/2016/11/use-mysql-safely-in-yesod">Use MySQL Safely in Yesod Applications</a></li></ul></li><li id="nav-201609"><span>September</span><ul><li class="leaf"><a href="/blog/2016/09/better-ci-yesod-scaffoldings">Better CI for the Yesod scaffoldings</a></li></ul></li><li id="nav-201607"><span>July</span><ul><li class="leaf"><a href="/blog/2016/07/http2-server-push">Implementing HTTP/2 server push</a></li><li class="leaf"><a href="/blog/2016/07/new-http-client-mono-traversable">New http-client and mono-traversable releases</a></li></ul></li><li id="nav-201605"><span>May</span><ul><li class="leaf"><a href="/blog/2016/05/are-unused-import-warnings-harmful">Are unused import warnings harmful?</a></li></ul></li><li id="nav-201604"><span>April</span><ul><li class="leaf"><a href="/blog/2016/04/split-db">Supporting separate read and write databases in persistent</a></li><li class="leaf"><a href="/blog/2016/04/stackifying-the-cookbook">Stackifying the cookbook</a></li><li class="leaf"><a href="/blog/2016/04/fixing-monad-either">Fixing the Monad instance for Either</a></li></ul></li><li id="nav-201603"><span>March</span><ul><li class="leaf"><a href="/blog/2016/03/why-i-prefer-typeclass-based-libraries">Why I prefer typeclass-based libraries</a></li></ul></li><li id="nav-201602"><span>February</span><ul><li class="leaf"><a href="/blog/2016/02/first-class-stream-fusion">First class stream fusion</a></li></ul></li><li id="nav-201601"><span>January</span><ul><li class="leaf"><a href="/blog/2016/01/auto-generate-docbook-xml">Auto generate Docbook XML for the Yesod book</a></li></ul></li></ul></li><li id="nav-2015"><span>2015</span><ul><li id="nav-201512"><span>December</span><ul><li class="leaf"><a href="/blog/2015/12/yesod-hosting-docker-kubernetes">Yesod hosting with Docker and Kubernetes</a></li></ul></li><li id="nav-201510"><span>October</span><ul><li class="leaf"><a href="/blog/2015/10/beginner-friendly-code-and-apis">Beginner friendly code and APIs</a></li><li class="leaf"><a href="/blog/2015/10/resurrecting-servius">Resurrecting servius</a></li><li class="leaf"><a href="/blog/2015/10/using-wais-vault">Using WAI&#39;s vault for fun and profit</a></li></ul></li><li id="nav-201509"><span>September</span><ul><li class="leaf"><a href="/blog/2015/09/true-root-pvp-debate">The true root of the PVP debate</a></li><li class="leaf"><a href="/blog/2015/09/new-runtime-hamlet-api">The new runtime Hamlet API</a></li></ul></li><li id="nav-201508"><span>August</span><ul><li class="leaf"><a href="/blog/2015/08/ssl-server-test">Getting Rating A from the SSL Server Test</a></li><li class="leaf"><a href="/blog/2015/08/thoughts-on-documentation">Some thoughts on documentation</a></li></ul></li><li id="nav-201507"><span>July</span><ul><li class="leaf"><a href="/blog/2015/07/s3-hackage-mirror-travis">S3 Hackage mirror for Travis builds</a></li><li class="leaf"><a href="/blog/2015/07/http2">Supporting HTTP/2</a></li><li class="leaf"><a href="/blog/2015/07/yesod-devel">yesod-devel</a></li><li class="leaf"><a href="/blog/2015/07/yesod-table">yesod-table</a></li></ul></li><li id="nav-201506"><span>June</span><ul><li class="leaf"><a href="/blog/2015/06/stack-support-yesod-devel">stack support for yesod devel</a></li><li class="leaf"><a href="/blog/2015/06/cleaning-up-warp-apis">Cleaning up the Warp APIs</a></li><li class="leaf"><a href="/blog/2015/06/cabals-does-not-exist-error-message">cabal&#39;s does not exist error message</a></li></ul></li><li id="nav-201505"><span>May</span><ul><li class="leaf"><a href="/blog/2015/05/deprecating-system-filepath">Deprecating system-filepath and system-fileio</a></li></ul></li><li id="nav-201504"><span>April</span><ul><li class="leaf"><a href="/blog/2015/04/announcing-stackage-update">Announcing stackage-update</a></li></ul></li><li id="nav-201503"><span>March</span><ul><li class="leaf"><a href="/blog/2015/03/designing-apis-for-extensibility">Designing APIs for Extensibility</a></li></ul></li><li id="nav-201502"><span>February</span><ul><li class="leaf"><a href="/blog/2015/02/awesome-haskell-community">The awesome Haskell community</a></li><li class="leaf"><a href="/blog/2015/02/brittle-haskell-toolchain">The brittle Haskell toolchain</a></li></ul></li><li id="nav-201501"><span>January</span><ul><li class="leaf"><a href="/blog/2015/01/polyconf-2015">PolyConf 2015</a></li></ul></li></ul></li><li id="nav-2014"><span>2014</span><ul><li id="nav-201412"><span>December</span><ul><li class="leaf"><a href="/blog/2014/12/hackage-docs-live-again">Hackage docs live again, please do the READMEs!</a></li><li class="leaf"><a href="/blog/2014/12/use-stackage-for-docs">Use Stackage for docs</a></li><li class="leaf"><a href="/blog/2014/12/minimal-yesod-multifile-site">Minimal Yesod multifile site</a></li><li class="leaf"><a href="/blog/2014/12/yesods-new-scaffolding">Yesod&#39;s new scaffolding</a></li></ul></li><li id="nav-201411"><span>November</span><ul><li class="leaf"><a href="/blog/2014/11/cabal-sandbox-stackage">Installing application dependencies using Stackage, sandboxes, and freezing</a></li><li class="leaf"><a href="/blog/2014/11/case-for-curation">The case for curation: Stackage and the PVP</a></li></ul></li><li id="nav-201410"><span>October</span><ul><li class="leaf"><a href="/blog/2014/10/slides-conduit-ghcjs">Slides on conduit and GHCJS</a></li><li class="leaf"><a href="/blog/2014/10/yesod-gitrepo">Announcing: yesod-gitrepo</a></li><li class="leaf"><a href="/blog/2014/10/classy-base-prelude">Haskell&#39;s Prelude is adding Foldable/Traversable</a></li><li class="leaf"><a href="/blog/2014/10/updating-auto-update">Updating auto-update</a></li></ul></li><li id="nav-201409"><span>September</span><ul><li class="leaf"><a href="/blog/2014/09/announcing-yesod-1-4">Announcing Yesod 1.4</a></li><li class="leaf"><a href="/blog/2014/09/persistent-2.1-released">Persistent 2.1 released</a></li><li class="leaf"><a href="/blog/2014/09/woes-multiple-package-versions">The woes of multiple package versions</a></li><li class="leaf"><a href="/blog/2014/09/persistent-2.1-rc">Persistent 2.1 Release Candidate</a></li><li class="leaf"><a href="/blog/2014/09/clarification-previous-blog-post">Clarification of previous blog post</a></li><li class="leaf"><a href="/blog/2014/09/misassigned-credit-for-conduit">Misassigned credit for conduit</a></li><li class="leaf"><a href="/blog/2014/09/planning-yesod-1-4">Planning Yesod 1.4</a></li></ul></li><li id="nav-201408"><span>August</span><ul><li class="leaf"><a href="/blog/2014/08/announcing-persistent-2">Announcing Persistent 2</a></li><li class="leaf"><a href="/blog/2014/08/deprecating-yesod-platform">Deprecating yesod-platform</a></li><li class="leaf"><a href="/blog/2014/08/announcing-auto-update">Announcing auto-update</a></li></ul></li><li id="nav-201407"><span>July</span><ul><li class="leaf"><a href="/blog/2014/07/reading-files-proc-filesystem">Reading files from the proc filesystem</a></li><li class="leaf"><a href="/blog/2014/07/rfc-new-data-conduit-process">RFC: New Data.Conduit.Process</a></li></ul></li><li id="nav-201406"><span>June</span><ul><li class="leaf"><a href="/blog/2014/06/evil-conditional-compile">Three evil ways to avoid conditional compilation</a></li><li class="leaf"><a href="/blog/2014/06/exceptions-transformers">Exceptions and monad transformers</a></li><li class="leaf"><a href="/blog/2014/06/google-email2">GoogleEmail2 auth plugin</a></li></ul></li><li id="nav-201405"><span>May</span><ul><li class="leaf"><a href="/blog/2014/05/exceptions-cont-monads">Exceptions in continuation-based monads</a></li><li class="leaf"><a href="/blog/2014/05/wai-3-0-alpha">WAI 3.0 alpha release</a></li><li class="leaf"><a href="/blog/2014/05/foldable-mapm-maybe-recursive">Foldable.mapM_, Maybe, and recursive functions</a></li></ul></li><li id="nav-201404"><span>April</span><ul><li class="leaf"><a href="/blog/2014/04/disemboweling-wai">Disemboweling WAI (aka gutting out conduit)</a></li><li class="leaf"><a href="/blog/2014/04/proposal-changes-pvp">Proposal: Changes to the PVP</a></li><li class="leaf"><a href="/blog/2014/04/consolidation-progress">Consolidation progress: shakespeare, conduit, http-client</a></li></ul></li><li id="nav-201403"><span>March</span><ul><li class="leaf"><a href="/blog/2014/03/package-consolidation">Package consolidation</a></li><li class="leaf"><a href="/blog/2014/03/efficient-directory-traversals">Efficient directory traversals</a></li><li class="leaf"><a href="/blog/2014/03/gsoc-proposals">Google Summer of Code proposals</a></li><li class="leaf"><a href="/blog/2014/03/wai-yesod-websockets">WAI 2.1 and yesod-websockets</a></li><li class="leaf"><a href="/blog/2014/03/network-conduit-async">network-conduit, async, and conduit-combinators</a></li></ul></li><li id="nav-201402"><span>February</span><ul><li class="leaf"><a href="/blog/2014/02/module-name-conflicts">Module name conflicts on Hackage</a></li><li class="leaf"><a href="/blog/2014/02/announce-mono-chunked">Announcing mono-traversable, chunked-data, and conduit-combinators</a></li><li class="leaf"><a href="/blog/2014/02/ideas-pipes-parse">Some ideas for pipes-parse</a></li><li class="leaf"><a href="/blog/2014/02/conduit-zip-source">conduit 1.0.13 and ZipSource</a></li><li class="leaf"><a href="/blog/2014/02/new-warp">Improving the performance of Warp again</a></li></ul></li><li id="nav-201401"><span>January</span><ul><li class="leaf"><a href="/blog/2014/01/new-fast-logger">Faster and scalable fast-logger</a></li><li class="leaf"><a href="/blog/2014/01/announcing-resource-monad">Announcing: the Resource monad</a></li><li class="leaf"><a href="/blog/2014/01/initializing-foundation-data">Initializing data in the foundation datatype</a></li><li class="leaf"><a href="/blog/2014/01/conduit-transformer-exception">Improved transformer and exception support in conduit</a></li><li class="leaf"><a href="/blog/2014/01/update-st-monad-conduit">Update: The ST monad and conduit</a></li><li class="leaf"><a href="/blog/2014/01/st-monad-conduit">The ST monad and conduit</a></li><li class="leaf"><a href="/blog/2014/01/psa-please-use-yesod-platform">PSA: Please use yesod-platform</a></li><li class="leaf"><a href="/blog/2014/01/lens-generator-persistent">Lens generator in Persistent</a></li></ul></li></ul></li><li id="nav-2013"><span>2013</span><ul><li id="nav-201312"><span>December</span><ul><li class="leaf"><a href="/blog/2013/12/book-updated-for-1-2">Book fully updated for 1.2</a></li><li class="leaf"><a href="/blog/2013/12/book-updates-1-2">Book updates for 1.2: almost complete!</a></li><li class="leaf"><a href="/blog/2013/12/announcing-wai-2-http-client">Announcing: WAI 2.0 and http-client</a></li></ul></li><li id="nav-201311"><span>November</span><ul><li class="leaf"><a href="/blog/2013/11/wai-2-http-client">WAI 2.0 and http-client</a></li></ul></li><li id="nav-201310"><span>October</span><ul><li class="leaf"><a href="/blog/2013/10/simpler-conduit-core">Simpler conduit core</a></li><li class="leaf"><a href="/blog/2013/10/core-flaw-pipes-conduit">The core flaw of pipes and conduit</a></li><li class="leaf"><a href="/blog/2013/10/pipes-resource-problems">pipes resource problems</a></li><li class="leaf"><a href="/blog/2013/10/segfaults">A warning about segfaults</a></li><li class="leaf"><a href="/blog/2013/10/prelude-replacements-libraries">Prelude replacements are for application developers</a></li></ul></li><li id="nav-201309"><span>September</span><ul><li class="leaf"><a href="/blog/2013/09/classy-mono">Announce: mono-traversable and classy-prelude 0.6</a></li><li class="leaf"><a href="/blog/2013/09/folding-lines-conduit">Folding lines in conduit</a></li><li class="leaf"><a href="/blog/2013/09/zipsinks-conduit-extra">ZipSinks and conduit-extra</a></li><li class="leaf"><a href="/blog/2013/09/yesod-platform-1-2-4">Yesod Platform version 1.2.4</a></li><li class="leaf"><a href="/blog/2013/09/lens-based-classy-prelude">lens-based classy-prelude</a></li></ul></li><li id="nav-201308"><span>August</span><ul><li class="leaf"><a href="/blog/2013/08/exceptions-and-monad-transformers">Exceptions and monad transformers</a></li></ul></li><li id="nav-201307"><span>July</span><ul><li class="leaf"><a href="/blog/2013/07/four-more-chapters">Four more chapters ready</a></li><li class="leaf"><a href="/blog/2013/07/catching-all-exceptions">Catching all exceptions</a></li><li class="leaf"><a href="/blog/2013/07/runtime-lucius-mixins">Runtime Lucius: now with mixins!</a></li></ul></li><li id="nav-201306"><span>June</span><ul><li class="leaf"><a href="/blog/2013/06/first-11-chapters">First 11 chapters are Yesod 1.2-compliant</a></li></ul></li><li id="nav-201305"><span>May</span><ul><li class="leaf"><a href="/blog/2013/05/yesod-1-2-released">Yesod 1.2 released</a></li></ul></li><li id="nav-201304"><span>April</span><ul><li class="leaf"><a href="/blog/2013/04/persistent-1-2-out">Persistent 1.2 is out, last call on Yesod 1.2</a></li><li class="leaf"><a href="/blog/2013/04/mixin-support-in-lucius">Mixin support in Lucius</a></li><li class="leaf"><a href="/blog/2013/04/new-chapter">New chapter: Understanding a Request</a></li><li class="leaf"><a href="/blog/2013/04/shakespeare-typescript">Shakespeare templating updates and TypeScript support</a></li><li class="leaf"><a href="/blog/2013/04/changes-to-online-book">Changes to the online book</a></li></ul></li><li id="nav-201303"><span>March</span><ul><li class="leaf"><a href="/blog/2013/03/simpler-streaming-responses">Simpler streaming responses</a></li><li class="leaf"><a href="/blog/2013/03/yesod-dispatch-version-1-2">Yesod dispatch, version 1.2</a></li><li class="leaf"><a href="/blog/2013/03/big-subsite-rewrite">Big Subsite Rewrite</a></li><li class="leaf"><a href="/blog/2013/03/yesod-1-2-cleaner-internals">Yesod 1.2&#39;s cleaner internals</a></li><li class="leaf"><a href="/blog/2013/03/resourcet-overview">ResourceT Overview</a></li><li class="leaf"><a href="/blog/2013/03/yesod-platform-1-1-8">ANNOUNCE: yesod-platform 1.1.8</a></li></ul></li><li id="nav-201302"><span>February</span><ul><li class="leaf"><a href="/blog/2013/02/announce-conduit-1-0-wai-1-4">ANNOUNCE: conduit 1.0, wai 1.4, and more</a></li><li class="leaf"><a href="/blog/2013/02/upcoming-conduit-1-0">Upcoming conduit 1.0</a></li><li class="leaf"><a href="/blog/2013/02/authentication-for-testing">Authentication during Testing</a></li><li class="leaf"><a href="/blog/2013/02/ajax-with-scaffold">Using Ajax with a Scaffolded Site</a></li></ul></li><li id="nav-201301"><span>January</span><ul><li class="leaf"><a href="/blog/2013/01/school-of-haskell">The School of Haskell</a></li><li class="leaf"><a href="/blog/2013/01/adding-css-js">Cookbook: Adding CSS and Javascript</a></li><li class="leaf"><a href="/blog/2013/01/meaning-of-power">The Meaning of Power</a></li><li class="leaf"><a href="/blog/2013/01/new-goal-yesod-1-2">New goal: Yesod 1.2</a></li><li class="leaf"><a href="/blog/2013/01/so-many-preludes">So many preludes!</a></li></ul></li></ul></li><li class="open" id="nav-2012"><span>2012</span><ul><li id="nav-201212"><span>December</span><ul><li class="leaf"><a href="/blog/2012/12/simplified-persistent-types">Simplified Persistent Types</a></li></ul></li><li id="nav-201211"><span>November</span><ul><li class="leaf"><a href="/blog/2012/11/stable-vetted-hackage">Stable, Vetted Hackage: Call for Participation</a></li><li class="leaf"><a href="/blog/2012/11/updates-julius-interpolation">Updates to Julius Interpolation</a></li><li class="leaf"><a href="/blog/2012/11/warp-posa">Warp chapter for Performance of Open Source Applications</a></li><li class="leaf"><a href="/blog/2012/11/solving-cabal-hell">Solving Cabal Hell</a></li><li class="leaf"><a href="/blog/2012/11/changes-scaffolding-system">Changes to scaffolding system</a></li></ul></li><li id="nav-201210"><span>October</span><ul><li class="leaf"><a href="/blog/2012/10/yesod-fay-js">Yesod, AngularJS and Fay</a></li><li class="leaf"><a href="/blog/2012/10/keter-updates">Keter updates</a></li><li class="leaf"><a href="/blog/2012/10/future-work-warp">Future work to improve the performance of Warp</a></li><li class="leaf"><a href="/blog/2012/10/haskell-and-ci">Haskell and Continuous Integration</a></li><li class="leaf"><a href="/blog/2012/10/measuring-warp">Measuring the performance of Warp</a></li><li class="leaf"><a href="/blog/2012/10/yesod-pure">yesod-pure: Use Yesod without Template Haskell</a></li><li class="leaf"><a href="/blog/2012/10/yesod-user-survey-2012">Yesod User Survey 2012</a></li><li class="leaf"><a href="/blog/2012/10/announcing-http-reverse-proxy">Announcing: http-reverse-proxy, unix-process-conduit, and more</a></li><li class="leaf"><a href="/blog/2012/10/jqplot-widget">Yesod composability: a jqPlot widget</a></li><li class="leaf"><a href="/blog/2012/10/generic-monoid">Generics example: creating Monoid instances</a></li><li class="leaf"><a href="/blog/2012/10/avoid-syscall">Avoiding system calls</a></li></ul></li><li id="nav-201209"><span>September</span><ul><li class="leaf"><a href="/blog/2012/09/header-composer">Composing HTTP response headers</a></li><li class="leaf"><a href="/blog/2012/09/caching-fd">Caching file descriptors</a></li><li class="leaf"><a href="/blog/2012/09/project-templates">Haskell Project Templates</a></li><li class="leaf"><a href="/blog/2012/09/header-body">Sending header and body at once</a></li><li class="leaf"><a href="/blog/2012/09/improving-warp">Improving the performance of Warp</a></li><li class="leaf"><a href="/blog/2012/09/building-haskell-ide">Building a Haskell IDE</a></li><li class="leaf"><a href="/blog/2012/09/small-status-update">Small status update</a></li></ul></li><li id="nav-201208"><span>August</span><ul><li class="leaf"><a href="/blog/2012/08/joining-forces-advance-haskell">Joining forces to advance Haskell</a></li><li class="leaf"><a href="/blog/2012/08/announcing-yesod-1-1">Announcing: Yesod 1.1, Persistent 1.0, and a new initiative</a></li><li class="leaf"><a href="/blog/2012/08/webinar-oreilly">O&#39;Reilly Webinar: Designing Type-Safe Haskell APIs</a></li><li class="leaf"><a href="/blog/2012/08/classy-prelude-good-bad-ugly">ClassyPrelude: The good, the bad, and the ugly</a></li></ul></li><li id="nav-201207"><span>July</span><ul><li class="leaf"><a href="/blog/2012/07/shelly-update">State of the Shelly (Haskell scripting lib)</a></li><li class="leaf"><a href="/blog/2012/07/resumablesource">conduit 0.5: ResumableSource and finalization</a></li><li class="leaf"><a href="/blog/2012/07/clarification-classy-prelude">Clarification: classy prelude</a></li><li class="leaf"><a href="/blog/2012/07/announcing-baseless-assertion">Announcing baseless-assertion 0.1</a></li><li class="leaf"><a href="/blog/2012/07/announcing-wai-1-3">Announcing WAI 1.3</a></li><li class="leaf"><a href="/blog/2012/07/classy-prelude">The classy prelude</a></li><li class="leaf"><a href="/blog/2012/07/haskell-vm">The Haskell Virtual Machine</a></li><li class="leaf"><a href="/blog/2012/07/new-logging-system">Yesod&#39;s new logging system</a></li></ul></li><li id="nav-201206"><span>June</span><ul><li class="leaf"><a href="/blog/2012/06/conduit-0-5">conduit 0.5: announcement and example</a></li><li class="leaf"><a href="/blog/2012/06/attoparsec-position">Position information in attoparsec</a></li><li class="leaf"><a href="/blog/2012/06/complicating-conduit">Complicating conduit?</a></li><li class="leaf"><a href="/blog/2012/06/updated-conduit-docs">Updated conduit docs</a></li></ul></li><li id="nav-201205"><span>May</span><ul><li class="leaf"><a href="/blog/2012/05/next-conduit-changes">Next set of conduit changes</a></li><li class="leaf"><a href="/blog/2012/05/response-conduit-bugs">Response to &quot;Conduit Bugs&quot;</a></li><li class="leaf"><a href="/blog/2012/05/keter-its-alive">Keter: It&#39;s Alive!</a></li><li class="leaf"><a href="/blog/2012/05/keter-app-deployment">Keter: Web App Deployment</a></li></ul></li><li id="nav-201204"><span>April</span><ul><li class="leaf"><a href="/blog/2012/04/yesod-js-todo">More Client Side Yesod: todo sample</a></li><li class="leaf"><a href="/blog/2012/04/client-side">Client Side Yesod, an FRP-inspired approach</a></li><li class="leaf"><a href="/blog/2012/04/debugging-openid">A Debugging Adventure: OpenID</a></li><li class="leaf"><a href="/blog/2012/04/skinning-conduits">Many ways to skin a conduit</a></li><li class="leaf"><a href="/blog/2012/04/working-together">Working Together</a></li><li class="leaf"><a href="/blog/2012/04/announcing-yesod-1-0">Announcing Yesod 1.0</a></li><li class="leaf"><a href="/blog/2012/04/cabal-meta">Transcending to dependency heaven</a></li><li class="leaf"><a href="/blog/2012/04/replacing-cabal">Replacing Cabal</a></li></ul></li><li id="nav-201203"><span>March</span><ul><li class="leaf"><a href="/blog/2012/03/summarizing-conduit-questions">Summarizing the conduit questions</a></li><li class="leaf"><a href="/blog/2012/03/pipes-like-conduit">pipes-like conduit</a></li><li class="leaf"><a href="/blog/2012/03/start-mezzo-haskell">Starting the Mezzo Haskell Book</a></li><li class="leaf"><a href="/blog/2012/03/announcing-conduit-0-3">Announcing conduit 0.3</a></li><li class="leaf"><a href="/blog/2012/03/announcing-yesod-platform">Announcing the Yesod Platform</a></li><li class="leaf"><a href="/blog/2012/03/shelly-for-shell-scripts">Shelly: Write your shell scripts in Haskell </a></li><li class="leaf"><a href="/blog/2012/03/cabal-nirvana">Avoid cabal hell: find nirvana</a></li><li class="leaf"><a href="/blog/2012/03/history-of-persistence">A History of Haskell persistence</a></li><li class="leaf"><a href="/blog/2012/03/more-pure-conduit">More Pure Conduit (and benchmarks!)</a></li><li class="leaf"><a href="/blog/2012/03/more-powerful-conduit">A More Powerful Conduit</a></li></ul></li><li id="nav-201202"><span>February</span><ul><li class="leaf"><a href="/blog/2012/02/simplifying-resourcet">Conduits: Simplifying ResourceT</a></li><li class="leaf"><a href="/blog/2012/02/call-for-gsoc-2012">Call for GSoC: bring Haskell to the masses</a></li><li class="leaf"><a href="/blog/2012/02/qcon-video">QCon video and book updates</a></li><li class="leaf"><a href="/blog/2012/02/release-0-10">Announcing Yesod 0.10</a></li><li class="leaf"><a href="/blog/2012/02/persistent-0-8">The New Persistent</a></li><li class="leaf"><a href="/blog/2012/02/answers-about-the-book">Answers about the Yesod book</a></li></ul></li><li class="open" id="nav-201201"><span>January</span><ul><li class="leaf"><a href="/blog/2012/01/coming-soon">Coming soon, to a bookstore near you</a></li><li class="leaf"><a href="/blog/2012/01/conduit-changes-0-2">Exciting changes coming to conduit 0.2</a></li><li class="leaf"><a href="/blog/2012/01/persisent-0-7-yesod-0-10-beta">Persistent 0.7, Yesod 0.10 beta</a></li><li class="leaf"><a href="/blog/2012/01/wiki-chat-subsite">Wiki: markdown, chat subsite, event source</a></li><li class="leaf"><a href="/blog/2012/01/new-pet-peeve">My New Pet Peeve</a></li><li class="leaf"><a href="/blog/2012/01/warp-conduits">Warp Conduits Released!</a></li><li class="leaf"><a class="current" href="/blog/2012/01/aosa-chapter">AOSA Chapter on Yesod</a></li><li class="leaf"><a href="/blog/2012/01/conduit-versus-enumerator">Conduits versus enumerators</a></li><li class="leaf"><a href="/blog/2012/01/blog-example">Blog: i18n, authentication, authorization, and database</a></li><li class="leaf"><a href="/blog/2012/01/conduits-buffering">Conduits, part 5: Buffering</a></li><li class="leaf"><a href="/blog/2012/01/http-conduit">http-conduit</a></li><li class="leaf"><a href="/blog/2012/01/conduits-conduits">Conduits, part 4: Conduits</a></li></ul></li></ul></li><li id="nav-2011"><span>2011</span><ul><li id="nav-201112"><span>December</span><ul><li class="leaf"><a href="/blog/2011/12/future-of-http-enumerator">The future of http-enumerator</a></li><li class="leaf"><a href="/blog/2011/12/conduits-sink">Conduits, part 3: Sinks</a></li><li class="leaf"><a href="/blog/2011/12/0-9-4-release">Yesod 0.9.4 Released</a></li><li class="leaf"><a href="/blog/2011/12/conduits">Conduits</a></li><li class="leaf"><a href="/blog/2011/12/resourcet">The Resource monad transformer</a></li><li class="leaf"><a href="/blog/2011/12/variable-naming-context">Good variable naming is context dependent </a></li><li class="leaf"><a href="/blog/2011/12/yesod-scaffolded-site">Scaffolding and the Site Template</a></li><li class="leaf"><a href="/blog/2011/12/please-use-packdeps">Please use Packdeps!</a></li></ul></li><li id="nav-201111"><span>November</span><ul><li class="leaf"><a href="/blog/2011/11/cabal-src">Announcing cabal-src</a></li><li class="leaf"><a href="/blog/2011/11/got-right">What Yesod got Right</a></li></ul></li><li id="nav-201110"><span>October</span><ul><li class="leaf"><a href="/blog/2011/10/code-generation-conversation">Code that writes code and conversation about conversations</a></li><li class="leaf"><a href="/blog/2011/10/frameworks-drive">Frameworks drive language adoption</a></li><li class="leaf"><a href="/blog/2011/10/xml-enumerator">xml-enumerator</a></li><li class="leaf"><a href="/blog/2011/10/yesods-monads">Yesod&#39;s Monads</a></li><li class="leaf"><a href="/blog/2011/10/settings-types">Settings Types</a></li></ul></li><li id="nav-201109"><span>September</span><ul><li class="leaf"><a href="/blog/2011/09/new-book-content">New Book Content</a></li><li class="leaf"><a href="/blog/2011/09/case-study-sphinx">Case Study: Sphinx-based Search</a></li><li class="leaf"><a href="/blog/2011/09/yesod-0.9.2">Yesod 0.9.2 - Everything Just Works</a></li><li class="leaf"><a href="/blog/2011/09/limitations-of-haskell">The Limitations of Haskell</a></li></ul></li><li id="nav-201108"><span>August</span><ul><li class="leaf"><a href="/blog/2011/08/new-forms-chapter">Forms 0.9</a></li><li class="leaf"><a href="/blog/2011/08/announcing-yesod-0.9">Yesod 0.9 Release Anouncement</a></li><li class="leaf"><a href="/blog/2011/08/persistent-0-6-0">Persistent 0.6.0</a></li><li class="leaf"><a href="/blog/2011/08/0.9-rc3-and-scaffold-upgrade">Yesod 0.9 Release Candidate 3</a></li><li class="leaf"><a href="/blog/2011/08/monad-control">monad-control</a></li><li class="leaf"><a href="/blog/2011/08/yesod-0-9-release-candidate">Announcing Yesod 0.9.0 Release Candidate</a></li><li class="leaf"><a href="/blog/2011/08/perils-partially-powered-languages">The Perils of Partially Powered Languages</a></li><li class="leaf"><a href="/blog/2011/08/shakespeare">New Shakespeare Chapter</a></li><li class="leaf"><a href="/blog/2011/08/yesod-form-overhaul">Yesod form overhaul</a></li><li class="leaf"><a href="/blog/2011/08/pdf-book">PDF version of the Yesod book</a></li></ul></li><li id="nav-201107"><span>July</span><ul><li class="leaf"><a href="/blog/2011/07/yesod-reorg">The Great Yesod Reorganization of 2011</a></li><li class="leaf"><a href="/blog/2011/07/haskell-on-heroku">Haskell on Heroku</a></li><li class="leaf"><a href="/blog/2011/07/browserid-support">BrowserID support</a></li><li class="leaf"><a href="/blog/2011/07/yesod-community">Yesod Community</a></li><li class="leaf"><a href="/blog/2011/07/syntax-highlighting">Line numbering/syntax highlighting added</a></li></ul></li><li id="nav-201106"><span>June</span><ul><li class="leaf"><a href="/blog/2011/06/yesod-docs-haskellwiki">Yesod and Haskell Docs</a></li><li class="leaf"><a href="/blog/2011/06/cookbook-part-2">Cookbook, part 2</a></li><li class="leaf"><a href="/blog/2011/06/building-better-chm">Building a Better CHM</a></li><li class="leaf"><a href="/blog/2011/06/cookbook">Cookbook</a></li></ul></li><li id="nav-201105"><span>May</span><ul><li class="leaf"><a href="/blog/2011/05/yesod-for-non-haskellers">Yesod for non-Haskellers</a></li><li class="leaf"><a href="/blog/2011/05/introducing-yesod-wiki">Introducing the Yesod Wiki</a></li><li class="leaf"><a href="/blog/2011/05/forms-api-decisions">Forms API Decisions (and some status updates)</a></li><li class="leaf"><a href="/blog/2011/05/yesod-form-revamp">Yesod Form Revamp</a></li><li class="leaf"><a href="/blog/2011/05/non-poly-hamlet-i18n">Non-Polymorphic Hamlet and I18N</a></li><li class="leaf"><a href="/blog/2011/05/warp-article-functional-web">Warp article in &quot;The Functional Web&quot;</a></li></ul></li><li id="nav-201104"><span>April</span><ul><li class="leaf"><a href="/blog/2011/04/announcing-yesod-0-8">Announcing Yesod 0.8</a></li><li class="leaf"><a href="/blog/2011/04/yesod-template-haskell">Yesod and Template Haskell</a></li><li class="leaf"><a href="/blog/2011/04/new-site-design">New site design, and some book progress</a></li><li class="leaf"><a href="/blog/2011/04/beta-yesod-0-8">Beta Release: Yesod 0.8</a></li><li class="leaf"><a href="/blog/2011/04/announcing-wai-0-4">Announcing WAI/Warp 0.4.0</a></li><li class="leaf"><a href="/blog/2011/04/rails-can-scale">Rails can scale- auto-convert it to the framework formerly known as Yesod!</a></li></ul></li><li id="nav-201103"><span>March</span><ul><li class="leaf"><a href="/blog/2011/03/improving-persistent-performance">Improving Persistent Performance</a></li><li class="leaf"><a href="/blog/2011/03/hamlet-lucius-widgets">Hamlet, Lucius and Widgets, oh my!</a></li><li class="leaf"><a href="/blog/2011/03/preliminary-warp-cross-language-benchmarks">Preliminary Warp Cross-Language Benchmarks</a></li><li class="leaf"><a href="/blog/2011/03/road-to-yesod-1-0">The Road to Yesod 1.0</a></li></ul></li><li id="nav-201102"><span>February</span><ul><li class="leaf"><a href="/blog/2011/02/warp-speed-ahead">Warp Speed Ahead</a></li><li class="leaf"><a href="/blog/2011/02/chapters-1-4">Yesod Book: Chapters 1-4 updated</a></li><li class="leaf"><a href="/blog/2011/02/routing-changes-yesod-0-7">Routing Changes in Yesod 0.7</a></li><li class="leaf"><a href="/blog/2011/02/reverse-packdeps">Reverse Packdeps</a></li><li class="leaf"><a href="/blog/2011/02/announcing-yesod-0-7">Announcing Yesod 0.7</a></li><li class="leaf"><a href="/blog/2011/02/yesod-migration-guide">Yesod 0.7 Migration Guide</a></li></ul></li><li id="nav-201101"><span>January</span><ul><li class="leaf"><a href="/blog/2011/01/hamlet6to7">Hamlet 6 to 7</a></li><li class="leaf"><a href="/blog/2011/01/announcing-warp">Announcing the Warp web server</a></li><li class="leaf"><a href="/blog/2011/01/data-object-yaml">data-object-yaml package</a></li><li class="leaf"><a href="/blog/2011/01/i18n-in-haskell">I18N in Haskell</a></li><li class="leaf"><a href="/blog/2011/01/announcing-wai-0-3">Announcing Web Application Interface 0.3.0</a></li></ul></li></ul></li><li id="nav-2010"><span>2010</span><ul><li id="nav-201012"><span>December</span><ul><li class="leaf"><a href="/blog/2010/12/announcing-yackage">Announcing Yackage: Your personal Hackage server for testing</a></li><li class="leaf"><a href="/blog/2010/12/magic-of-yesod-part2">The Magic of Yesod, part 2</a></li><li class="leaf"><a href="/blog/2010/12/magic-of-yesod-part1">The Magic of Yesod, part 1</a></li><li class="leaf"><a href="/blog/2010/12/yesod-user-survey">Yesod User Survey</a></li><li class="leaf"><a href="/blog/2010/12/announcing-xml-enumerator">Announcing XML Enumerator</a></li><li class="leaf"><a href="/blog/2010/12/serendipity-wai-http-enumerator">Serendipity: WAI and http-enumerator</a></li><li class="leaf"><a href="/blog/2010/12/yesods-own-world">Library versus Framework: Yesod&#39;s Own World</a></li><li class="leaf"><a href="/blog/2010/12/early-december-update">Early December Update</a></li></ul></li><li id="nav-201011"><span>November</span><ul><li class="leaf"><a href="/blog/2010/11/new-book-comments-system">New book comments system, and a new site design</a></li><li class="leaf"><a href="/blog/2010/11/wishlist">Wishlist</a></li><li class="leaf"><a href="/blog/2010/11/yesod-0-6-3">Yesod 0.6.3 Released</a></li><li class="leaf"><a href="/blog/2010/11/javascript-minification">Javascript Minification</a></li><li class="leaf"><a href="/blog/2010/11/atomic-field-modification-persistent">Atomic Field Modification in Persistent</a></li><li class="leaf"><a href="/blog/2010/11/please-break-yesod">Please Break Yesod</a></li></ul></li><li id="nav-201010"><span>October</span><ul><li class="leaf"><a href="/blog/2010/10/yesod-0-6">Yesod 0.6.0 Released</a></li><li class="leaf"><a href="/blog/2010/10/custom-forms">Custom Forms and the Form Monad</a></li><li class="leaf"><a href="/blog/2010/10/invertible-monads-exceptions-allocations">Invertible monads for exception handling and memory allocations</a></li><li class="leaf"><a href="/blog/2010/10/forms-chapter-written">Forms Chapter Written</a></li><li class="leaf"><a href="/blog/2010/10/announcing-zlib-bindings">Announcing zlib-bindings</a></li><li class="leaf"><a href="/blog/2010/10/enumerators-tutorial-part-3">Enumerators Tutorial Part 3: Enumeratee</a></li><li class="leaf"><a href="/blog/2010/10/haskellers-and-openid">Haskellers.com and OpenID</a></li><li class="leaf"><a href="/blog/2010/10/enumerators-tutorial-part-2">Enumerators Tutorial Part 2: Enumerator</a></li></ul></li><li id="nav-201009"><span>September</span><ul><li class="leaf"><a href="/blog/2010/09/enumerators-tutorial-part-1">Enumerators Tutorial Part 1: Iteratee</a></li><li class="leaf"><a href="/blog/2010/09/yesod-0-5-1">Yesod 0.5.1: HTML sanitization, generalized Hamlet and pluggable authentication</a></li><li class="leaf"><a href="/blog/2010/09/announcing-http-enumerator">Announcing http-enumerator</a></li><li class="leaf"><a href="/blog/2010/09/modular-authentication">Modular Authentication</a></li><li class="leaf"><a href="/blog/2010/09/wai-handler-devel">WAI development server (aka, skip the compiles)</a></li><li class="leaf"><a href="/blog/2010/09/yammer-screencast">Yammer Screencast</a></li><li class="leaf"><a href="/blog/2010/09/yo-dawg-template-haskell">Yo dawg, I heard you like Template Haskell</a></li><li class="leaf"><a href="/blog/2010/09/adding-varnish">Adding a little varnish</a></li></ul></li><li id="nav-201008"><span>August</span><ul><li class="leaf"><a href="/blog/2010/08/yesod-0-5">Yesod 0.5.0 Released</a></li><li class="leaf"><a href="/blog/2010/08/orange-roster">Orange Roster</a></li><li class="leaf"><a href="/blog/2010/08/static-file-optimizations">Static File Optimizations</a></li><li class="leaf"><a href="/blog/2010/08/typesafe-runtime-hamlet">Type-safe runtime Hamlet</a></li><li class="leaf"><a href="/blog/2010/08/whats-in-a-hamlet">What&#39;s in a Hamlet?</a></li></ul></li><li id="nav-201007"><span>July</span><ul><li class="leaf"><a href="/blog/2010/07/database-migrations">Recent update: database migrations and more</a></li><li class="leaf"><a href="/blog/2010/07/wai-handler-snap">wai-handler-snap: Run Yesod apps on the Snap server</a></li><li class="leaf"><a href="/blog/2010/07/yesod-0-4">Yesod 0.4.0 Released</a></li><li class="leaf"><a href="/blog/2010/07/wai-0-2-ideas">Web Application Interface 0.2 Ideas</a></li><li class="leaf"><a href="/blog/2010/07/sessions">Sessions</a></li><li class="leaf"><a href="/blog/2010/07/first-stab-at-widgets">First Stab at Widgets</a></li></ul></li><li id="nav-201006"><span>June</span><ul><li class="leaf"><a href="/blog/2010/06/some-plumbing-fixes">Some Plumbing Fixes</a></li><li class="leaf"><a href="/blog/2010/06/fringe-benefits-typesafe-urls">Fringe benefits of type-safe URLs</a></li><li class="leaf"><a href="/blog/2010/06/first-persistent-new-yesod">First Persistent release, new Yesod release</a></li><li class="leaf"><a href="/blog/2010/06/hamlet-and-persistent">Hamlet 0.3.0 and Persistent documentation</a></li><li class="leaf"><a href="/blog/2010/06/restful-content">RESTful Content</a></li><li class="leaf"><a href="/blog/2010/06/handler-monad">The Handler Monad</a></li><li class="leaf"><a href="/blog/2010/06/optimizing-hamlet-minor-correction">Optimizing Hamlet (a minor correction)</a></li><li class="leaf"><a href="/blog/2010/06/optimizing-hamlet">Optimizing Hamlet</a></li><li class="leaf"><a href="/blog/2010/06/formlets-meet-hamlet">Formlets meet Hamlet</a></li></ul></li><li id="nav-201005"><span>May</span><ul><li class="leaf"><a href="/blog/2010/05/persistent-blog-example">Persistent Blog Example- with Redis support!</a></li><li class="leaf"><a href="/blog/2010/05/persistent-progress">Persistent Progress</a></li><li class="leaf"><a href="/blog/2010/05/persistence-thoughts">Persistence Thoughts</a></li><li class="leaf"><a href="/blog/2010/05/bigtable-benchmarks">Bigtable Benchmarks</a></li><li class="leaf"><a href="/blog/2010/05/yesod-0-2-0-released">Yesod 0.2.0 Released</a></li><li class="leaf"><a href="/blog/2010/05/laying-the-foundation">Laying the Foundation</a></li><li class="leaf"><a href="/blog/2010/05/status-update">Status Update</a></li><li class="leaf"><a href="/blog/2010/05/really-type-safe-urls">Really type-safe URLs</a></li><li class="leaf"><a href="/blog/2010/05/hamlet-version-0-2">Hamlet Version 0.2</a></li><li class="leaf"><a href="/blog/2010/05/migrating-to-yesod-0-2">Migrating to Yesod 0.2</a></li></ul></li><li id="nav-201004"><span>April</span><ul><li class="leaf"><a href="/blog/2010/04/yesod-mini-tutorial">Yesod 0.2 Mini Tutorial</a></li><li class="leaf"><a href="/blog/2010/04/pedantic">Pedantic</a></li><li class="leaf"><a href="/blog/2010/04/hamlet-is-born">Hamlet is Born</a></li><li class="leaf"><a href="/blog/2010/04/whats-cooking-with-yesod">What&#39;s Cooking with Yesod</a></li></ul></li><li id="nav-201003"><span>March</span><ul><li class="leaf"><a href="/blog/2010/03/persistent-plugs">Persistent Plugs</a></li><li class="leaf"><a href="/blog/2010/03/persistence">Persistence</a></li><li class="leaf"><a href="/blog/2010/03/tweedle-beetle-battle">Tweedle Beetle Battle</a></li></ul></li><li id="nav-201002"><span>February</span><ul><li class="leaf"><a href="/blog/2010/02/simpler-is-better">Simpler is Better</a></li><li class="leaf"><a href="/blog/2010/02/request-body-interfaces">Four HTTP Request Body Interfaces</a></li></ul></li><li id="nav-201001"><span>January</span><ul><li class="leaf"><a href="/blog/2010/01/efficient-yaml-parsing-followup">Efficient YAML Parsing- Follow up</a></li><li class="leaf"><a href="/blog/2010/01/with-monadio">With MonadIO</a></li><li class="leaf"><a href="/blog/2010/01/efficient-yaml-parsing">Efficient YAML Parsing</a></li><li class="leaf"><a href="/blog/2010/01/new-blog-system">New Blog System</a></li></ul></li></ul></li></ul></div></section><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script><script>var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function c(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function j(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function g(t,s){var r="";for(var q=0;q<t.childNodes.length;q++){if(t.childNodes[q].nodeType==3){var p=t.childNodes[q].nodeValue;if(s){p=p.replace(/\n/g,"")}r+=p}else{if(t.childNodes[q].nodeName=="BR"){r+="\n"}else{r+=g(t.childNodes[q])}}}if(/MSIE [678]/.test(navigator.userAgent)){r=r.replace(/\r/g,"\n")}return r}function a(s){var q=s.className.split(/\s+/);q=q.concat(s.parentNode.className.split(/\s+/));for(var p=0;p<q.length;p++){var r=q[p].replace(/^language-/,"");if(d[r]||r=="no-highlight"){return r}}}function b(p){var q=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{q.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);q.push({event:"stop",offset:t,node:s.childNodes[r]})}}}return t})(p,0);return q}function l(y,z,x){var r=0;var w="";var t=[];function u(){if(y.length&&z.length){if(y[0].offset!=z[0].offset){return(y[0].offset<z[0].offset)?y:z}else{return z[0].event=="start"?y:z}}else{return y.length?y:z}}function s(C){var D="<"+C.nodeName.toLowerCase();for(var A=0;A<C.attributes.length;A++){var B=C.attributes[A];D+=" "+B.nodeName.toLowerCase();if(B.nodeValue!=undefined&&B.nodeValue!=false&&B.nodeValue!=null){D+='="'+m(B.nodeValue)+'"'}}return D+">"}while(y.length||z.length){var v=u().splice(0,1)[0];w+=m(x.substr(r,v.offset-r));r=v.offset;if(v.event=="start"){w+=s(v.node);t.push(v.node)}else{if(v.event=="stop"){var q=t.length;do{q--;var p=t[q];w+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);t.splice(q,1);while(q<t.length){w+=s(t[q]);q++}}}}w+=x.substr(r);return w}function i(){function p(u,t,v){if(u.compiled){return}if(!v){u.bR=c(t,u.b?u.b:"\\B|\\b");if(!u.e&&!u.eW){u.e="\\B|\\b"}if(u.e){u.eR=c(t,u.e)}}if(u.i){u.iR=c(t,u.i)}if(u.r==undefined){u.r=1}if(u.k){u.lR=c(t,u.l||hljs.IR,true)}for(var s in u.k){if(!u.k.hasOwnProperty(s)){continue}if(u.k[s] instanceof Object){u.kG=u.k}else{u.kG={keyword:u.k}}break}if(!u.c){u.c=[]}u.compiled=true;for(var r=0;r<u.c.length;r++){p(u.c[r],t,false)}if(u.starts){p(u.starts,t,false)}}for(var q in d){if(!d.hasOwnProperty(q)){continue}p(d[q].dM,d[q],true)}}function e(J,D){if(!i.called){i();i.called=true}function z(r,M){for(var L=0;L<M.c.length;L++){if(M.c[L].bR.test(r)){return M.c[L]}}}function w(L,r){if(C[L].e&&C[L].eR.test(r)){return 1}if(C[L].eW){var M=w(L-1,r);return M?M+1:0}return 0}function x(r,L){return L.iR&&L.iR.test(r)}function A(O,N){var M=[];for(var L=0;L<O.c.length;L++){M.push(O.c[L].b)}var r=C.length-1;do{if(C[r].e){M.push(C[r].e)}r--}while(C[r+1].eW);if(O.i){M.push(O.i)}return c(N,"("+M.join("|")+")",true)}function s(M,L){var N=C[C.length-1];if(!N.t){N.t=A(N,H)}N.t.lastIndex=L;var r=N.t.exec(M);if(r){return[M.substr(L,r.index-L),r[0],false]}else{return[M.substr(L),"",true]}}function p(O,r){var L=H.cI?r[0].toLowerCase():r[0];for(var N in O.kG){if(!O.kG.hasOwnProperty(N)){continue}var M=O.kG[N].hasOwnProperty(L);if(M){return[N,M]}}return false}function F(M,O){if(!O.k){return m(M)}var N="";var P=0;O.lR.lastIndex=0;var L=O.lR.exec(M);while(L){N+=m(M.substr(P,L.index-P));var r=p(O,L);if(r){t+=r[1];N+='<span class="'+r[0]+'">'+m(L[0])+"</span>"}else{N+=m(L[0])}P=O.lR.lastIndex;L=O.lR.exec(M)}N+=m(M.substr(P,M.length-P));return N}function K(r,M){if(M.sL&&d[M.sL]){var L=e(M.sL,r);t+=L.keyword_count;return L.value}else{return F(r,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){q+=L;M.buffer=""}else{if(M.eB){q+=m(r)+L;M.buffer=""}else{q+=L;M.buffer=r}}C.push(M);B+=M.r}function E(O,L,Q){var R=C[C.length-1];if(Q){q+=K(R.buffer+O,R);return false}var M=z(L,R);if(M){q+=K(R.buffer+O,R);I(M,L);return M.rB}var r=w(C.length-1,L);if(r){var N=R.cN?"</span>":"";if(R.rE){q+=K(R.buffer+O,R)+N}else{if(R.eE){q+=K(R.buffer+O,R)+N+m(L)}else{q+=K(R.buffer+O+L,R)+N}}while(r>1){N=C[C.length-2].cN?"</span>":"";q+=N;r--;C.length--}var P=C[C.length-1];C.length--;C[C.length-1].buffer="";if(P.starts){I(P.starts,"")}return R.rE}if(x(L,R)){throw"Illegal"}}var H=d[J];var C=[H.dM];var B=0;var t=0;var q="";try{var v=0;H.dM.buffer="";do{var y=s(D,v);var u=E(y[0],y[1],y[2]);v+=y[0].length;if(!u){v+=y[1].length}}while(!y[2]);if(C.length>1){throw"Illegal"}return{r:B,keyword_count:t,value:q}}catch(G){if(G=="Illegal"){return{r:0,keyword_count:0,value:m(D)}}else{throw G}}}function f(t){var r={keyword_count:0,r:0,value:m(t)};var q=r;for(var p in d){if(!d.hasOwnProperty(p)){continue}var s=e(p,t);s.language=p;if(s.keyword_count+s.r>q.keyword_count+q.r){q=s}if(s.keyword_count+s.r>r.keyword_count+r.r){q=r;r=s}}if(q.language){r.second_best=q}return r}function h(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function o(u,x,q){var y=g(u,q);var s=a(u);if(s=="no-highlight"){return}if(s){var w=e(s,y)}else{var w=f(y);s=w.language}var p=b(u);if(p.length){var r=document.createElement("pre");r.innerHTML=w.value;w.value=l(p,b(r),y)}w.value=h(w.value,x,q);var t=u.className;if(!t.match("(\\s|^)(language-)?"+s+"(\\s|$)")){t=t?(t+" "+s):s}if(/MSIE [678]/.test(navigator.userAgent)&&u.tagName=="CODE"&&u.parentNode.tagName=="PRE"){var r=u.parentNode;var v=document.createElement("div");v.innerHTML="<pre><code>"+w.value+"</code></pre>";u=v.firstChild.firstChild;v.firstChild.cN=r.cN;r.parentNode.replaceChild(v.firstChild,r)}else{u.innerHTML=w.value}u.className=t;u.result={language:s,kw:w.keyword_count,re:w.r};if(w.second_best){u.second_best={language:w.second_best.language,kw:w.second_best.keyword_count,re:w.second_best.r}}}function k(){if(k.called){return}k.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=j(r[p]);if(q){o(q,hljs.tabReplace)}}}function n(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",k,false);window.addEventListener("load",k,false)}else{if(window.attachEvent){window.attachEvent("onload",k)}else{window.onload=k}}}var d={};this.LANGUAGES=d;this.highlight=e;this.highlightAuto=f;this.fixMarkup=h;this.highlightBlock=o;this.initHighlighting=k;this.initHighlightingOnLoad=n;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0x[A-Za-z0-9]+|\\d+(\\.\\d+)?)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.inherit=function(p,s){var r={};for(var q in p){r[q]=p[q]}if(s){for(var q in s){r[q]=s[q]}}return r}}();hljs.LANGUAGES.bash=function(){var d={"true":1,"false":1};var b={cN:"variable",b:"\\$([a-zA-Z0-9_]+)\\b"};var a={cN:"variable",b:"\\$\\{(([^}])|(\\\\}))+\\}",c:[hljs.CNM]};var c={cN:"string",b:'"',e:'"',i:"\\n",c:[hljs.BE,b,a],r:0};var e={cN:"test_condition",b:"",e:"",c:[c,b,a,hljs.CNM],k:{literal:d},r:0};return{dM:{k:{keyword:{"if":1,then:1,"else":1,fi:1,"for":1,"break":1,"continue":1,"while":1,"in":1,"do":1,done:1,echo:1,exit:1,"return":1,set:1,declare:1},literal:d},c:[{cN:"shebang",b:"(#!\\/bin\\/bash)|(#!\\/bin\\/sh)",r:10},hljs.HCM,hljs.CNM,c,b,a,hljs.inherit(e,{b:"\\[ ",e:" \\]",r:0}),hljs.inherit(e,{b:"\\[\\[ ",e:" \\]\\]"})]}}}();hljs.LANGUAGES.javascript={dM:{k:{keyword:{"in":1,"if":1,"for":1,"while":1,"finally":1,"var":1,"new":1,"function":1,"do":1,"return":1,"void":1,"else":1,"break":1,"catch":1,"instanceof":1,"with":1,"throw":1,"case":1,"default":1,"try":1,"this":1,"switch":1,"continue":1,"typeof":1,"delete":1},literal:{"true":1,"false":1,"null":1}},c:[hljs.ASM,hljs.QSM,hljs.CLCM,hljs.CBLCLM,hljs.CNM,{b:"("+hljs.RSR+"|case|return|throw)\\s*",k:{"return":1,"throw":1,"case":1},c:[hljs.CLCM,hljs.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",c:[{b:"\\\\/"}]}],r:0},{cN:"function",b:"\\bfunction\\b",e:"{",k:{"function":1},c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[hljs.ASM,hljs.QSM,hljs.CLCM,hljs.CBLCLM]}]}]}};hljs.LANGUAGES.css=function(){var a={cN:"function",b:hljs.IR+"\\(",e:"\\)",c:[{eW:true,eE:true,c:[hljs.NM,hljs.ASM,hljs.QSM]}]};return{cI:true,dM:{i:"[=/|']",c:[hljs.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:{"font-face":1,page:1}},{cN:"at_rule",b:"@",e:"[{;]",eE:true,k:{"import":1,page:1,media:1,charset:1},c:[a,hljs.ASM,hljs.QSM,hljs.NM]},{cN:"tag",b:hljs.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[hljs.CBLCLM,{cN:"rule",b:"[^\\s]",rB:true,e:";",eW:true,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:true,i:"[^\\s]",starts:{cN:"value",eW:true,eE:true,c:[a,hljs.NM,hljs.QSM,hljs.ASM,hljs.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}}();hljs.LANGUAGES.xml=function(){var b="[A-Za-z0-9\\._:-]+";var a={eW:true,c:[{cN:"attribute",b:b,r:0},{b:'="',rB:true,e:'"',c:[{cN:"value",b:'"',eW:true}]},{b:"='",rB:true,e:"'",c:[{cN:"value",b:"'",eW:true}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:true,dM:{c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style",e:">",k:{title:{style:1}},c:[a],starts:{cN:"css",e:"</style>",rE:true,sL:"css"}},{cN:"tag",b:"<script",e:">",k:{title:{script:1}},c:[a],starts:{cN:"javascript",e:"<\/script>",rE:true,sL:"javascript"}},{cN:"vbscript",b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},a]}]}}}();hljs.LANGUAGES.java={dM:{k:{"false":1,"synchronized":1,"int":1,"abstract":1,"float":1,"private":1,"char":1,"interface":1,"boolean":1,"static":1,"null":1,"if":1,"const":1,"for":1,"true":1,"while":1,"long":1,"throw":1,strictfp:1,"finally":1,"protected":1,"extends":1,"import":1,"native":1,"final":1,"implements":1,"return":1,"void":1,"enum":1,"else":1,"break":1,"transient":1,"new":1,"catch":1,"instanceof":1,"byte":1,"super":1,"class":1,"volatile":1,"case":1,assert:1,"short":1,"package":1,"default":1,"double":1,"public":1,"try":1,"this":1,"switch":1,"continue":1,"throws":1},c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"@[A-Za-z]+"}],r:10},hljs.CLCM,hljs.CBLCLM,hljs.ASM,hljs.QSM,{cN:"class",b:"(class |interface )",e:"{",k:{"class":1,"interface":1},i:":",c:[{b:"(implements|extends)",k:{"extends":1,"implements":1},r:10},{cN:"title",b:hljs.UIR}]},hljs.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}};hljs.LANGUAGES.haskell=function(){var a={cN:"label",b:"\\b[A-Z][\\w']*",r:0};var b={cN:"container",b:"\\(",e:"\\)",c:[{cN:"label",b:"\\b[A-Z][\\w\\(\\)\\.']*"},{cN:"title",b:"[_a-z][\\w']*"}]};return{dM:{k:{keyword:{let:1,"in":1,"if":1,then:1,"else":1,"case":1,of:1,where:1,"do":1,module:1,"import":1,hiding:1,qualified:1,type:1,data:1,newtype:1,deriving:1,"class":1,instance:1,"null":1,not:1,as:1}},c:[{cN:"comment",b:"--",e:"$"},{cN:"comment",b:"{-",e:"-}"},{cN:"string",b:"\\s+'",e:"'",c:[hljs.BE],r:0},hljs.QSM,{cN:"import",b:"\\bimport",e:"$",k:{"import":1,qualified:1,as:1,hiding:1},c:[b]},{cN:"module",b:"\\bmodule",e:"where",k:{module:1,where:1},c:[b]},{cN:"class",b:"\\b(class|instance|data|(new)?type)",e:"(where|$)",k:{"class":1,where:1,instance:1,data:1,type:1,newtype:1,deriving:1},c:[a]},hljs.CNM,{cN:"shebang",b:"#!\\/usr\\/bin\\/env runhaskell",e:"$"},a,{cN:"title",b:"^[_a-z][\\w']*"}]}}}();hljs.LANGUAGES.sql={cI:true,dM:{i:"[^\\s]",c:[{cN:"operator",b:"(begin|start|commit|rollback|savepoint|lock|alter|create|drop|rename|call|delete|do|handler|insert|load|replace|select|truncate|update|set|show|pragma)\\b",e:";|$",k:{keyword:{all:1,partial:1,global:1,month:1,current_timestamp:1,using:1,go:1,revoke:1,smallint:1,indicator:1,"end-exec":1,disconnect:1,zone:1,"with":1,character:1,assertion:1,to:1,add:1,current_user:1,usage:1,input:1,local:1,alter:1,match:1,collate:1,real:1,then:1,rollback:1,get:1,read:1,timestamp:1,session_user:1,not:1,integer:1,bit:1,unique:1,day:1,minute:1,desc:1,insert:1,execute:1,like:1,ilike:2,level:1,decimal:1,drop:1,"continue":1,isolation:1,found:1,where:1,constraints:1,domain:1,right:1,national:1,some:1,module:1,transaction:1,relative:1,second:1,connect:1,escape:1,close:1,system_user:1,"for":1,deferred:1,section:1,cast:1,current:1,sqlstate:1,allocate:1,intersect:1,deallocate:1,numeric:1,"public":1,preserve:1,full:1,"goto":1,initially:1,asc:1,no:1,key:1,output:1,collation:1,group:1,by:1,union:1,session:1,both:1,last:1,language:1,constraint:1,column:1,of:1,space:1,foreign:1,deferrable:1,prior:1,connection:1,unknown:1,action:1,commit:1,view:1,or:1,first:1,into:1,"float":1,year:1,primary:1,cascaded:1,except:1,restrict:1,set:1,references:1,names:1,table:1,outer:1,open:1,select:1,size:1,are:1,rows:1,from:1,prepare:1,distinct:1,leading:1,create:1,only:1,next:1,inner:1,authorization:1,schema:1,corresponding:1,option:1,declare:1,precision:1,immediate:1,"else":1,timezone_minute:1,external:1,varying:1,translation:1,"true":1,"case":1,exception:1,join:1,hour:1,"default":1,"double":1,scroll:1,value:1,cursor:1,descriptor:1,values:1,dec:1,fetch:1,procedure:1,"delete":1,and:1,"false":1,"int":1,is:1,describe:1,"char":1,as:1,at:1,"in":1,varchar:1,"null":1,trailing:1,any:1,absolute:1,current_time:1,end:1,grant:1,privileges:1,when:1,cross:1,check:1,write:1,current_date:1,pad:1,begin:1,temporary:1,exec:1,time:1,update:1,catalog:1,user:1,sql:1,date:1,on:1,identity:1,timezone_hour:1,natural:1,whenever:1,interval:1,work:1,order:1,cascade:1,diagnostics:1,nchar:1,having:1,left:1,call:1,"do":1,handler:1,load:1,replace:1,truncate:1,start:1,lock:1,show:1,pragma:1},aggregate:{count:1,sum:1,min:1,max:1,avg:1}},c:[{cN:"string",b:"'",e:"'",c:[hljs.BE,{b:"''"}],r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE,{b:'""'}],r:0},{cN:"string",b:"`",e:"`",c:[hljs.BE]},hljs.CNM,{b:"\\n"}]},hljs.CBLCLM,{cN:"comment",b:"--",e:"$"}]}};hljs.LANGUAGES.nginx=function(){var c={cN:"variable",b:"\\$\\d+"};var b={cN:"variable",b:"\\${",e:"}"};var a={cN:"variable",b:"[\\$\\@]"+hljs.UIR};return{dM:{c:[hljs.HCM,{b:hljs.UIR,e:";|{",rE:true,k:{accept_mutex:1,accept_mutex_delay:1,access_log:1,add_after_body:1,add_before_body:1,add_header:1,addition_types:1,alias:1,allow:1,ancient_browser:1,ancient_browser:1,ancient_browser_value:1,ancient_browser_value:1,auth_basic:1,auth_basic_user_file:1,autoindex:1,autoindex_exact_size:1,autoindex_localtime:1,"break":1,charset:1,charset:1,charset_map:1,charset_map:1,charset_types:1,charset_types:1,client_body_buffer_size:1,client_body_in_file_only:1,client_body_in_single_buffer:1,client_body_temp_path:1,client_body_timeout:1,client_header_buffer_size:1,client_header_timeout:1,client_max_body_size:1,connection_pool_size:1,connections:1,create_full_put_path:1,daemon:1,dav_access:1,dav_methods:1,debug_connection:1,debug_points:1,default_type:1,deny:1,directio:1,directio_alignment:1,echo:1,echo_after_body:1,echo_before_body:1,echo_blocking_sleep:1,echo_duplicate:1,echo_end:1,echo_exec:1,echo_flush:1,echo_foreach_split:1,echo_location:1,echo_location_async:1,echo_read_request_body:1,echo_request_body:1,echo_reset_timer:1,echo_sleep:1,echo_subrequest:1,echo_subrequest_async:1,empty_gif:1,empty_gif:1,env:1,error_log:1,error_log:1,error_page:1,events:1,expires:1,fastcgi_bind:1,fastcgi_buffer_size:1,fastcgi_buffers:1,fastcgi_busy_buffers_size:1,fastcgi_cache:1,fastcgi_cache_key:1,fastcgi_cache_methods:1,fastcgi_cache_min_uses:1,fastcgi_cache_path:1,fastcgi_cache_use_stale:1,fastcgi_cache_valid:1,fastcgi_catch_stderr:1,fastcgi_connect_timeout:1,fastcgi_hide_header:1,fastcgi_ignore_client_abort:1,fastcgi_ignore_headers:1,fastcgi_index:1,fastcgi_intercept_errors:1,fastcgi_max_temp_file_size:1,fastcgi_next_upstream:1,fastcgi_param:1,fastcgi_pass:1,fastcgi_pass_header:1,fastcgi_pass_request_body:1,fastcgi_pass_request_headers:1,fastcgi_read_timeout:1,fastcgi_send_lowat:1,fastcgi_send_timeout:1,fastcgi_split_path_info:1,fastcgi_store:1,fastcgi_store_access:1,fastcgi_temp_file_write_size:1,fastcgi_temp_path:1,fastcgi_upstream_fail_timeout:1,fastcgi_upstream_max_fails:1,flv:1,geo:1,geo:1,geoip_city:1,geoip_country:1,gzip:1,gzip_buffers:1,gzip_comp_level:1,gzip_disable:1,gzip_hash:1,gzip_http_version:1,gzip_min_length:1,gzip_no_buffer:1,gzip_proxied:1,gzip_static:1,gzip_types:1,gzip_vary:1,gzip_window:1,http:1,"if":1,if_modified_since:1,ignore_invalid_headers:1,image_filter:1,image_filter_buffer:1,image_filter_jpeg_quality:1,image_filter_transparency:1,include:1,index:1,internal:1,ip_hash:1,js:1,js_load:1,js_require:1,js_utf8:1,keepalive_requests:1,keepalive_timeout:1,kqueue_changes:1,kqueue_events:1,large_client_header_buffers:1,limit_conn:1,limit_conn_log_level:1,limit_except:1,limit_rate:1,limit_rate_after:1,limit_req:1,limit_req_log_level:1,limit_req_zone:1,limit_zone:1,lingering_time:1,lingering_timeout:1,listen:1,location:1,lock_file:1,log_format:1,log_not_found:1,log_subrequest:1,map:1,map_hash_bucket_size:1,map_hash_max_size:1,master_process:1,memcached_bind:1,memcached_buffer_size:1,memcached_connect_timeout:1,memcached_next_upstream:1,memcached_pass:1,memcached_read_timeout:1,memcached_send_timeout:1,memcached_upstream_fail_timeout:1,memcached_upstream_max_fails:1,merge_slashes:1,min_delete_depth:1,modern_browser:1,modern_browser:1,modern_browser_value:1,modern_browser_value:1,more_clear_headers:1,more_clear_input_headers:1,more_set_headers:1,more_set_input_headers:1,msie_padding:1,msie_refresh:1,multi_accept:1,open_file_cache:1,open_file_cache_errors:1,open_file_cache_events:1,open_file_cache_min_uses:1,open_file_cache_retest:1,open_file_cache_valid:1,open_log_file_cache:1,optimize_server_names:1,output_buffers:1,override_charset:1,override_charset:1,perl:1,perl_modules:1,perl_require:1,perl_set:1,pid:1,port_in_redirect:1,post_action:1,postpone_gzipping:1,postpone_output:1,proxy_bind:1,proxy_buffer_size:1,proxy_buffering:1,proxy_buffers:1,proxy_busy_buffers_size:1,proxy_cache:1,proxy_cache_key:1,proxy_cache_methods:1,proxy_cache_min_uses:1,proxy_cache_path:1,proxy_cache_use_stale:1,proxy_cache_valid:1,proxy_connect_timeout:1,proxy_headers_hash_bucket_size:1,proxy_headers_hash_max_size:1,proxy_hide_header:1,proxy_ignore_client_abort:1,proxy_ignore_headers:1,proxy_intercept_errors:1,proxy_max_temp_file_size:1,proxy_method:1,proxy_next_upstream:1,proxy_pass:1,proxy_pass_header:1,proxy_pass_request_body:1,proxy_pass_request_headers:1,proxy_read_timeout:1,proxy_redirect:1,proxy_send_lowat:1,proxy_send_timeout:1,proxy_set_body:1,proxy_set_header:1,proxy_store:1,proxy_store_access:1,proxy_temp_file_write_size:1,proxy_temp_path:1,proxy_upstream_fail_timeout:1,proxy_upstream_max_fails:1,push_authorized_channels_only:1,push_channel_group:1,push_max_channel_id_length:1,push_max_channel_subscribers:1,push_max_message_buffer_length:1,push_max_reserved_memory:1,push_message_buffer_length:1,push_message_timeout:1,push_min_message_buffer_length:1,push_min_message_recipients:1,push_publisher:1,push_store_messages:1,push_subscriber:1,push_subscriber_concurrency:1,random_index:1,read_ahead:1,real_ip_header:1,recursive_error_pages:1,request_pool_size:1,reset_timedout_connection:1,resolver:1,resolver_timeout:1,"return":1,rewrite:1,rewrite_log:1,root:1,satisfy:1,satisfy_any:1,send_lowat:1,send_timeout:1,sendfile:1,sendfile_max_chunk:1,server:1,server:1,server_name:1,server_name_in_redirect:1,server_names_hash_bucket_size:1,server_names_hash_max_size:1,server_tokens:1,set:1,set_real_ip_from:1,source_charset:1,source_charset:1,ssi:1,ssi_ignore_recycled_buffers:1,ssi_min_file_chunk:1,ssi_silent_errors:1,ssi_types:1,ssi_value_length:1,ssl:1,ssl_certificate:1,ssl_certificate_key:1,ssl_ciphers:1,ssl_client_certificate:1,ssl_crl:1,ssl_dhparam:1,ssl_prefer_server_ciphers:1,ssl_protocols:1,ssl_session_cache:1,ssl_session_timeout:1,ssl_verify_client:1,ssl_verify_depth:1,sub_filter:1,sub_filter_once:1,sub_filter_types:1,tcp_nodelay:1,tcp_nopush:1,timer_resolution:1,try_files:1,types:1,types_hash_bucket_size:1,types_hash_max_size:1,underscores_in_headers:1,uninitialized_variable_warn:1,upstream:1,use:1,user:1,userid:1,userid:1,userid_domain:1,userid_domain:1,userid_expires:1,userid_expires:1,userid_mark:1,userid_name:1,userid_name:1,userid_p3p:1,userid_p3p:1,userid_path:1,userid_path:1,userid_service:1,userid_service:1,valid_referers:1,variables_hash_bucket_size:1,variables_hash_max_size:1,worker_connections:1,worker_cpu_affinity:1,worker_priority:1,worker_processes:1,worker_rlimit_core:1,worker_rlimit_nofile:1,worker_rlimit_sigpending:1,working_directory:1,xml_entities:1,xslt_stylesheet:1,xslt_types:1},r:0,c:[hljs.HCM,{b:"\\s",e:"[;{]",rB:true,rE:true,l:"[a-z/]+",k:{built_in:{on:1,off:1,yes:1,no:1,"true":1,"false":1,none:1,blocked:1,debug:1,info:1,notice:1,warn:1,error:1,crit:1,select:1,permanent:1,redirect:1,kqueue:1,rtsig:1,epoll:1,poll:1,"/dev/poll":1}},r:0,c:[hljs.HCM,{cN:"string",b:'"',e:'"',c:[hljs.BE,c,b,a],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE,c,b,a],r:0},{cN:"string",b:"([a-z]+):/",e:"[;\\s]",rE:true},{cN:"regexp",b:"\\s\\^",e:"\\s|{|;",rE:true,c:[hljs.BE,c,b,a]},{cN:"regexp",b:"~\\*?\\s+",e:"\\s|{|;",rE:true,c:[hljs.BE,c,b,a]},{cN:"regexp",b:"\\*(\\.[a-z\\-]+)+",c:[hljs.BE,c,b,a]},{cN:"regexp",b:"([a-z\\-]+\\.)+\\*",c:[hljs.BE,c,b,a]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\b"},{cN:"number",b:"\\s\\d+[kKmMgGdshdwy]*\\b",r:0},c,b,a]}]}]}}}();$(function(){
    $("#archive li").has("ul").click(function(event){
        if (event.target.id == $(this).attr("id")) $(this).toggleClass("open");
    });
});
hljs.initHighlightingOnLoad();
</script><footer id="license" style="text-align:center;font-size:0.8em">All content on this site is available under the
<a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
<br>
Content outside the book section is available under
<a href="https://raw.github.com/yesodweb/yesodweb.com/master/LICENSE">the MIT license</a>
as well.</footer>
</div></div><script>window._gaq = [['_setAccount','UA-1434510-13'],['_trackPageview'],['_trackPageLoadTime']];(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script><!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.  chromium.org/developers/how-tos/chrome-frame-getting-started --><!--[if lt IE 7 ]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script><script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script><![endif]--></body></html>