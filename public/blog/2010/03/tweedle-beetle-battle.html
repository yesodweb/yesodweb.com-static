<!doctype html><!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]--><!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]--><!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"> <!--<![endif]--><head><meta charset="UTF-8"><title>Tweedle Beetle Battle</title><meta name="description" content="Yesod is a Haskell web framework for productive development of type-safe, RESTful, high performance web applications."><meta name="viewport" content="width=device-width,initial-scale=1"><link href="/feed" type="application/atom+xml" rel="alternate" title="Yesod Web Framework Blog">
<style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio,canvas,video{display:inline-block;*display:inline;*zoom:1}audio:not([controls]){display:none}[hidden]{display:none}html{font-size:100%;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body{margin:0}body,button,input,select,textarea{font-family:sans-serif}a{color:#00e}a:visited{color:#551a8b}a:focus{outline:thin dotted}a:hover,a:active{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}blockquote{margin:1em 40px}dfn{font-style:italic}mark{background:#ff0;color:#000}pre,code,kbd,samp{font-family:"DejaVu Sans Mono", "Droid Sans Mono", consolas, "courier new", monospace;_font-family:'courier new', monospace;font-size:.85em}pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}q{quotes:none}q:before,q:after{content:'';content:none}small{font-size:75%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}ul,ol{margin:1em 0;padding:0 0 0 40px}dd{margin:0 0 0 40px}nav ul,nav ol{list-style:none;list-style-image:none}img{border:0;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}figure{margin:0}form{margin:0}fieldset{margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;*margin-left:-7px}button,input,select,textarea{font-size:100%;margin:0;vertical-align:baseline;*vertical-align:middle}button,input{line-height:normal;*overflow:visible}table button,table input{*overflow:auto}button,html input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}pre code{display:block;padding:0.5em;background:#F4F4F4}pre code,pre .ruby .subst,pre .tag .title,pre .lisp .title{color:black}pre .string,pre .title,pre .constant,pre .parent,pre .tag .value,pre .rules .value,pre .rules .value .number,pre .preprocessor,pre .ruby .symbol,pre .ruby .symbol .string,pre .ruby .symbol .keyword,pre .ruby .symbol .keymethods,pre .instancevar,pre .aggregate,pre .template_tag,pre .django .variable,pre .smalltalk .class,pre .addition,pre .flow,pre .stream,pre .bash .variable,pre .apache .tag,pre .apache .cbracket,pre .tex .command,pre .tex .special,pre .erlang_repl .function_or_atom{color:#800}pre .comment,pre .annotation,pre .template_comment,pre .diff .header,pre .chunk{color:#888}pre .number,pre .date,pre .regexp,pre .literal,pre .smalltalk .symbol,pre .smalltalk .char,pre .go .constant,pre .change{color:#080}pre .label,pre .javadoc,pre .ruby .string,pre .decorator,pre .filter .argument,pre .localvars,pre .array,pre .attr_selector,pre .important,pre .pseudo,pre .pi,pre .doctype,pre .deletion,pre .envvar,pre .shebang,pre .apache .sqbracket,pre .nginx .built_in,pre .tex .formula,pre .erlang_repl .reserved,pre .input_number{color:#88F
}pre .css .tag,pre .javadoctag,pre .phpdoc,pre .yardoctag{font-weight:bold}pre .keyword,pre .id,pre .phpdoc,pre .title,pre .built_in,pre .aggregate,pre .smalltalk .class,pre .winutils,pre .bash .variable,pre .apache .tag,pre .go .typename,pre .tex .command{font-weight:bold}pre .nginx .built_in{font-weight:normal}pre .xml .css,pre .xml .javascript,pre .xml .vbscript,pre .tex .formula{opacity:0.5}#archive li > span{cursor:pointer}#comments{margin-top:2em;border-top:1px dashed #000;padding-top:1em;font-weight:300;font-size:1.8em;color:#474f6b;font-family:Lato}code{background-color:#f4f4f4}.github-link{font-size:0.6em}.github-link a,.github-link a:visited{text-decoration:none}#main figure{border:1px solid #CCC;box-shadow:0 0 3px #CCC inset;padding:1em;margin:2ex 0}#main figure figcaption{text-size:.9em;text-align:center;color:#555}#main figure img{border:solid 1px #CCC}#container{min-width:1094px}dd,p{text-align:justify}body{font-family:'Crimson Text', serif;font-size:1.2em;background-color:#e5eef9}a,a:visited{color:#000}a:hover,a:active{color:#823}nav{box-shadow:0 -5px 20px 20px rgba(41,55,78,0.12);z-index:100;background-color:#29374e;padding:5px;font-family:'Lato';font-size:0.80em;font-weight:400;position:fixed;width:100%;top:0}nav ul{margin:0;padding:0;text-align:right}nav ul li{display:inline;margin-right:3em}nav ul li.googleplus{position:relative;top:2px;margin-right:3em}nav ul li.feedlink{position:relative;top:3px}nav a,nav a:visited{color:#eee;text-decoration:none}#spotlight{background-image:-webkit-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:-moz-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:-o-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:-ms-radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);background-image:radial-gradient(50% 50%, circle farthest-side, #fff, #e5eef9 100%);position:absolute;width:1050px;height:300px;top:0;left:50%;margin-left:-475px;z-index:-1}div.headergroup{width:1050px;margin:0 auto;padding-top:2.6em;padding-bottom:1.3em}div.headergroup a{text-decoration:none;display:flex}div.headergroup div.homepage-logo{text-align:center;width:550px;height:105px;margin-left:75px}div.headergroup div.homepage-logo div.logo-image{background:url(/static/logo-home2-no-esod-smaller2.png?etag=uBLSXtRu) no-repeat center center;width:100%;height:75px}div.headergroup div.homepage-logo div.logo-text{color:#29374e;padding-top:0.2em;font-family:'Lato';font-weight:300;font-size:1.2em;padding-bottom:0.3em}div.headergroup div.homepage-info{text-align:left;font-family:'Lato';font-weight:300;font-size:0.8em;line-height:1.6em;width:220px}div.headergroup h2{margin-bottom:0;font-size:1.4em;margin-top:0;padding-top:0.4em;padding-bottom:1em}h1,h2,h3,h4,h5,h6,dt{color:#474f6b;font-family:'Lato';font-weight:400}h1{font-weight:300;font-size:1.8em}h2,section > section > h1{font-weight:400;font-size:1.5em;margin-bottom:0.5em}h3,section > section > section > h1{font-weight:400;font-size:1.2em;margin-bottom:0.5em}h1 span{display:none}section{display:table-cell}section h2{margin-top:2.2em;margin-bottom:0}section img{max-width:100%}section section{display:block;width:auto;padding:0;margin:0}section.why{width:600px;padding-left:90px;padding-right:90px}section.why article{width:600px}section.getting-started{background-color:#f4f4f4;width:300px;padding-left:50px;padding-right:50px}section.getting-started h2{font-size:1.2em;margin-bottom:0.7em;margin-top:1.8em}section.getting-started ul{font-family:'Lato';font-size:0.75em;font-weight:500;margin-bottom:20px;line-height:2em;list-style-type:none;margin-bottom:50px;padding-left:0}section.getting-started ul ul{font-size:.9em }section.getting-started div{font-family:'Lato';padding-left:20px}#main{box-shadow:0 10px 25px 25px rgba(41,55,78,0.05);background-color:#fff;position:relative;width:1050px;margin:0 auto}aside#announcement{box-shadow:0 0 20px 10px rgba(41,55,78,0.12);height:20px;margin:0 auto;position:relative;width:1080px;background-color:#29374e;color:#eee;padding:0.5em;font-family:'Lato';font-weight:400;font-size:0.8em;z-index:50}aside#announcement div.msg{margin-left:105px}aside#announcement div.tri-left,aside#announcement div.tri-right{width:0;height:0;position:absolute;bottom:-21px;border-style:solid}aside#announcement div.tri-left{left:0;border-width:11px 11px 10px 11px;border-color:#0b1b30 #0b1b30 transparent transparent}aside#announcement div.tri-right{right:0;border-width:11px 11px 11px 10px;border-color:#0b1b30 transparent transparent #0b1b30}aside#announcement a,aside#announcement a:visited{color:#eee;text-decoration:underline}aside#announcement span.date{font-style:italic;font-size:0.8em}#feedlink{display:inline-block;height:16px;width:16px;background:url(/static/blog.png?etag=oPHrQ5qo)}#feedlink span{display:none}dt{font-weight:400;font-size:1.05em;margin-bottom:0.7em;margin-top:2.3em}dd,p{margin:0;font-size:1em;line-height:155%;margin-bottom:0.5em}p.what{display:none;font-size:1.4em;padding:0 200px}#instantclick{display:none}@media print, (max-width: 700px) {body{background-color:#fff;padding:3px}.googleplus,.feedlink,.headergroup,#announcement,#comments,#disqus_thread,#spotlight,#license,.github-link,.oreilly,.main-listing{display:none}div .headergroup{display:none}#container > nav{background-color:#fff;box-shadow:none}#container > nav > ul{text-align:left}#container > nav > ul a,#container > nav > ul a:visited{color:#00f}#main,div#container,section.why > article{width:auto;min-width:0}#main{box-shadow:none;position:static;margin:0}section.why,section.getting-started{display:block;width:auto;padding:0;background-color:#fff}hgroup h1[itemprop=name],hgroup h2,hgroup h3{margin:0}hgroup h1[itemprop=name] img,hgroup h2 img,hgroup h3 img{display:none}dd,p,dt{margin:12px}}@media print {nav{display:none}section.getting-started{display:none}}</style><!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link href="//fonts.googleapis.com/css?family=Crimson+Text:400,400italic,600,600italic,700,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic" rel="stylesheet" type="text/css"><script>document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/,'js');</script></head><body itemscope itemtype="http://schema.org/Product"><div id="spotlight"></div><div id="container"><nav><ul><li><a href="/book">book</a></li><li><a href="/wiki">cookbook</a></li><li><a href="/blog">blog</a></li><li><a href="/wiki/Home">wiki</a></li><li class="feedlink"><a href="/feed" id="feedlink"><span>newsfeed</span></a></li></ul></nav><div class="headergroup"><a href="/"><div class="homepage-logo"><div class="logo-image"></div><div class="logo-text">Yesod Web Framework</div></div><div class="homepage-info">Yesod is a Haskell web framework for productive development of type-safe, RESTful, high performance web applications.</div></a></div><aside id="announcement"><div class="tri-left"></div><div class="tri-right"></div><div class="msg"><span class="subject">Tweedle Beetle Battle</span></div></aside><div id="main" role="main"><section class="why"><h1>Tweedle Beetle Battle</h1><h2>March  5, 2010</h2><h3><img width="80" height="80" itemprop="image" src="https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?size=80" alt="Gravatar">By Michael Snoyman</h3><p class="github-link"><a href="https://github.com/yesodweb/yesodweb.com-content/tree/master/blog/2010/3/tweedle-beetle-battle.html">View source on Github</a></p><article><p>Now that <a href="http://hackage.haskell.org/package/wai">WAI has been released</a>, my next target is to release <a href="http://github.com/snoyberg/yesod">Yesod</a>, my web application framework. It's already the basis for about five sites, most of them with source code available. Nonetheless, I've been wanting to write a comprehensive tutorial of writing a real web application with it before releasing.</p>
<p>Fortunately, I just had to write the perfect sample application: a bug tracker. It's very simplistic, but does what I need while showing some of the nice features of Yesod. It also shows the very ugly side of Yesod: there is no built in model yet. That's something I hope to tackle in future versions.</p>
<p>In any event, here's the code straight from the repo. You can also <a href="http://github.com/snoyberg/yesod/blob/master/examples/tweedle.lhs">see it on Github</a>, though this version is prettier. It's just one long literate Haskell file along with three string template files.</p>
<p>I know this is a long tutorial, but don't let the size scare you off; you can skip all of the serialization code below without missing the gist of things. And yes: this is actually code I'm using in production.</p>
<hr><pre class="sourceCode haskell"><code>{-# LANGUAGE QuasiQuotes #-}
</code
  ></pre
><p>While coming up on the first release of Yesod, I realized I needed a nice, comprehensive tutorial. I didn't want to do the typical blog example, since it's so trite. I considered doing a Reddit or Twitter clone (the former became a bit of a meme a few weeks ago), but then I needed to set up a bug tracker for some commercial projects I was working on, and I decided that it would be a great example program.</p
><p>Before getting started, a quick word of warning: Yesod at this point really provides nothing in terms of data storage (aka, the model). There is wonderful integration with the data-object package, and the data-object-yaml package provides good serialization, but this is all very inefficient in practice. For simplicity, I've gone ahead and used this as the storage model; this should not be done for production code.</p
><p>There's a lot of boilerplate code at the beginning that just has to do with object storage; if you'd like to skip it, just start reading from the main function.</p
><p>Anyway, here's the import list.</p
><pre class="sourceCode haskell"><code>import Yesod
import Yesod.Helpers.Auth
import Data.Object.Yaml
import Data.Object.String
import Control.Concurrent
import qualified Safe.Failure as SF
import Data.Time
import Data.Attempt (Attempt, fromAttempt)
import Control.Arrow (second)
import qualified Network.Wai.Handler.SimpleServer
import Data.Monoid
import Data.Text (pack)
import Control.Applicative ((&lt;$&gt;), (&lt;*&gt;))
import Data.Maybe (fromMaybe)
</code
  ></pre
><p>One of the goals of Yesod is to make it work with the compiler to help you program. Instead of configuration files, it uses typeclasses to both change default behavior and enable extra features. An example of the former is error pages, while an example of the latter is authentication.</p
><p>To start with, we need a datatype to represent our program. We'll call this bug tracker &quot;Tweedle&quot;, after Dr. Seuss's &quot;Tweedle Beetle Battle&quot; in &quot;Fox in Socks&quot; (my son absolutely loves this book). We'll be putting the complete state of the bug database in an MVar within this variable; in a production setting, you might instead put a database handle.</p
><pre class="sourceCode haskell"><code>data Tweedle = Tweedle Settings (MVar Category) TemplateGroup
</code
  ></pre
><p>(For now, just ignore the TemplateGroup, its purpose becomes apparent later.)</p
><p>This issue database is fully hierarchical: each category can contain subcategories and issues. This might be too much nesting for many uses, but it's what my project demanded.</p
><p>Also, if I cared about efficiency here, a trie or map would probably be a better data structure. As stated above, it doesn't matter.</p
><pre class="sourceCode haskell"><code>data Category = Category
  { subCats :: [Category]
  , subIssues :: [Issue]
  , categoryId :: Integer
  , catName :: String
  }
</code
  ></pre
><pre class="sourceCode haskell"><code>data Issue = Issue
  { issueName :: String
  , issueMessages :: [Message]
  , issueId :: Integer
  }
</code
  ></pre
><p>Further simplifications: authors will just be represented by their OpenID URL.</p
><pre class="sourceCode haskell"><code>data Message = Message
  { messageAuthor :: OpenId
  , messageStatus :: Maybe String
  , messagePriority :: Maybe String
  , messageText :: String
  , messageCreation :: UTCTime
  }
</code
  ></pre
><pre class="sourceCode haskell"><code>type OpenId = String
</code
  ></pre
><p>We need to be able to serialize this data to and from YAML files. You can consider all of the following code boilerplate.</p
><pre class="sourceCode haskell"><code>messageToSO :: Message -&gt; StringObject
messageToSO m = Mapping $ map (second Scalar)
    [ (&quot;author&quot;, messageAuthor m)
    , (&quot;status&quot;, show $ messageStatus m)
    , (&quot;priority&quot;, show $ messagePriority m)
    , (&quot;text&quot;, messageText m)
    , (&quot;creation&quot;, show $ messageCreation m)
    ]
messageFromSO :: StringObject -&gt; Attempt Message
messageFromSO so = do
    m &lt;- fromMapping so
    a &lt;- lookupScalar &quot;author&quot; m
    s &lt;- lookupScalar &quot;status&quot; m &gt;&gt;= SF.read
    p &lt;- lookupScalar &quot;priority&quot; m &gt;&gt;= SF.read
    t &lt;- lookupScalar &quot;text&quot; m
    c &lt;- lookupScalar &quot;creation&quot; m &gt;&gt;= SF.read
    return $ Message a s p t c
issueToSO :: Issue -&gt; StringObject
issueToSO i = Mapping
  [ (&quot;name&quot;, Scalar $ issueName i)
  , (&quot;messages&quot;, Sequence $ map messageToSO $ issueMessages i)
  , (&quot;id&quot;, Scalar $ show $ issueId i)
  ]
issueFromSO :: StringObject -&gt; Attempt Issue
issueFromSO so = do
  m &lt;- fromMapping so
  n &lt;- lookupScalar &quot;name&quot; m
  i &lt;- lookupScalar &quot;id&quot; m &gt;&gt;= SF.read
  ms &lt;- lookupSequence &quot;messages&quot; m &gt;&gt;= mapM messageFromSO
  return $ Issue n ms i
categoryToSO :: Category -&gt; StringObject
categoryToSO c = Mapping
  [ (&quot;cats&quot;, Sequence $ map categoryToSO $ subCats c)
  , (&quot;issues&quot;, Sequence $ map issueToSO $ subIssues c)
  , (&quot;id&quot;, Scalar $ show $ categoryId c)
  , (&quot;name&quot;, Scalar $ catName c)
  ]
categoryFromSO :: StringObject -&gt; Attempt Category
categoryFromSO so = do
  m &lt;- fromMapping so
  cats &lt;- lookupSequence &quot;cats&quot; m &gt;&gt;= mapM categoryFromSO
  issues &lt;- lookupSequence &quot;issues&quot; m &gt;&gt;= mapM issueFromSO
  i &lt;- lookupScalar &quot;id&quot; m &gt;&gt;= SF.read
  n &lt;- lookupScalar &quot;name&quot; m
  return $ Category cats issues i n
</code
  ></pre
><p>Well, that was a mouthful. You can safely ignore all of that: it has nothing to do with actual web programming.</p
><p>Next is the Settings datatype. Normally I create a settings file so I can easily make changes between development and production systems without recompiling, but once again we are aiming for simplicity here.</p
><pre class="sourceCode haskell"><code>data Settings = Settings
</code
  ></pre
><p>Many web frameworks make the simplifying assumptions that &quot;/&quot; will be the path to the root of your application. In real life, this doesn't always happen. In Yesod, you must specify explicitly your application root and then create an instance of YesodApproot (see below). Again, the compiler will let you know this: once you use a feature that depends on knowing the approot, you'll get a compiler error if you haven't created the instance.</p
><pre class="sourceCode haskell"><code>{ sApproot :: String
  , issueFile :: FilePath
</code
  ></pre
><p>Yesod comes built in with support for HStringTemplate. You'll see later how this ties in with data-object (and in particular HtmlObject) to help avoid XSS attacks.</p
><pre class="sourceCode haskell"><code>, templatesDir :: FilePath
  }
</code
  ></pre
><p>And now we'll hardcode the settings instead of loading from a file. I'll do it in the IO monad anyway, since that would be the normal function signature.</p
><pre class="sourceCode haskell"><code>loadSettings :: IO Settings
loadSettings = return $ Settings &quot;http://localhost:3000/&quot; &quot;issues.yaml&quot; &quot;examples/tweedle-templates&quot;
</code
  ></pre
><p>And now we need a function to load up our Tweedle data type.</p
><pre class="sourceCode haskell"><code>loadTweedle :: IO Tweedle
loadTweedle = do
  settings &lt;- loadSettings
</code
  ></pre
><p>Note that this will die unless an issues file is present. We could instead check for the file and create it if missing, but instead, just put the following into issues.yaml:</p
><p>{cats: [], issues: [], id: 0, name: &quot;Top Category&quot;}</p
><pre class="sourceCode haskell"><code>issuesSO &lt;- decodeFile $ issueFile settings
  issues &lt;- fromAttempt $ categoryFromSO issuesSO
  missues &lt;- newMVar issues
  tg &lt;- loadTemplateGroup $ templatesDir settings
  return $ Tweedle settings missues tg
</code
  ></pre
><p>And now we're going to write our main function. Yesod is built on top of the Web Application Interface (wai package), so a Yesod application runs on a variety of backends. For our purposes, we're going to use the SimpleServer.</p
><pre class="sourceCode haskell"><code>main :: IO ()
main = do
  putStrLn &quot;Running at http://localhost:3000/&quot;
  tweedle &lt;- loadTweedle
  app &lt;- toWaiApp tweedle
  Network.Wai.Handler.SimpleServer.run 3000 app
</code
  ></pre
><p>Well, that was a <em>lot</em
  > of boilerplate code that had nothing to do with web programming. Now the real stuff begins. I would recommend trying to run the code up to now an see what happens. The compiler will complain that there is no instance of Yesod for Tweedle. This is what I meant by letting the compiler help us out. So now we've got to create the Yesod instance.</p
><p>The Yesod typeclass includes many functions, most of which have default implementations. I'm not going to go through all of them here, please see the documentation.</p
><pre class="sourceCode haskell"><code>instance Yesod Tweedle where
</code
  ></pre
><p>The most important function is resources: this is where all of the URL mapping will occur. Yesod adheres to Restful principles very strongly. A &quot;resource&quot; is essentially a URL. Each resource should be unique; for example, do not create /user/5/ as well as /user/by-number/5/. In addition to resources, we also determine which function should handle your request based on the request method. In other words, a POST and a GET are completely different.</p
><p>One of the middlewares that Yesod installs is called MethodOverride; please see the documentation there for more details, but essentially it allows us to work past a limitation in the form tag of HTML to use PUT and DELETE methods as well.</p
><p>Instead of using regular expressions to handle the URL mapping, Yesod uses resource patterns. A resource is a set of tokens separated by slashes. Each of those tokens can be one of:</p
><ul><li>A static string.</li
  ><li>An integer variable (begins with #), which will match any integer.</li
  ><li>A string varaible (begins with $), which will match any single value.</li
  ><li>A &quot;slurp&quot; variable, which will match all of the remaining tokens. It must be the last token.</li
  ></ul
><p>Yesod uses quasi quotation to make specifying the resource pattern simple and safe: your entire set of patterns is checked at compile time to see if you have overlapping rules.</p
><pre class="sourceCode haskell"><code>resources = [$mkResources|
</code
  ></pre
><p>Now we need to figure out all of the resources available in our application. We'll need a homepage:</p
><pre class="sourceCode haskell"><code>/:
      GET: homepageH
</code
  ></pre
><p>We will also need to allow authentication. We use the slurp pattern here and accept all request methods. The authHandler method (in the Yesod.Helpers.Auth module) will handle everything itself.</p
><pre class="sourceCode haskell"><code>/auth/*: authHandler
</code
  ></pre
><p>We're going to refer to categories and issues by their unique numerical id. We're also going to make this system append only: there is no way to change the history.</p
><pre class="sourceCode haskell"><code>/category/#id: # notice that &quot;id&quot; is ignored by Yesod
      GET: categoryDetailsH
      PUT: createCategoryH
  /category/#id/issues:
      PUT: createIssueH
  /issue/#id:
      GET: issueDetailsH
      PUT: addMessageH
  |]
</code
  ></pre
><p>So if you make a PUT request to &quot;/category/5&quot;, you will be creating a subcategory of category 5. &quot;GET /issue/27/&quot; will display details on issue 27. This is all we need.</p
><p>If you try to compile the code until this point, the compiler will tell you that you have to define all of the above-mentioned functions. We'll do that in a second; for now, if you'd like to see the rest of the error messages, uncomment this next block of code.</p
><pre class="sourceCode haskell"><code>{-
homepageH = return ()
categoryDetailsH _ = return ()
createCategoryH _ = return ()
createIssueH _ = return ()
issueDetailsH _ = return ()
addMessageH _ = return ()
-}
</code
  ></pre
><p>Now the compiler is telling us that there's no instance of YesodAuth for Tweedle. YesodAuth- as you might imagine- keeps settings on authentication. We're going to go ahead a create an instance now. The default settings work if you set up authHandler for &quot;/auth/*&quot; (which we did) and are using openid (which we are). So all we need to do is:</p
><pre class="sourceCode haskell"><code>instance YesodAuth Tweedle
</code
  ></pre
><p>Running that tells us that we're missing a YesodApproot instance as well. That's easy enough to fix:</p
><pre class="sourceCode haskell"><code>instance YesodApproot Tweedle where
  approot (Tweedle settings _ _) = sApproot settings
</code
  ></pre
><p>Congratulations, you have a working web application! Gratned, it doesn't actually do much yet, but you <em>can</em
  > use it to log in via openid. Just go to http://localhost:3000/auth/openid/.</p
><p>Now it's time to implement the real code here. We'll start with the homepage. For this program, I just want the homepage to redirect to the main category (which will be category 0). So let's create that redirect:</p
><pre class="sourceCode haskell"><code>homepageH :: Handler Tweedle ()
homepageH = do
  ar &lt;- getApproot
  redirect RedirectPermanent $ ar ++ &quot;category/0/&quot;
</code
  ></pre
><p>Simple enough. Notice that we used the getApproot function; if we wanted, we could have just assumed the approot was &quot;/&quot;, but this is more robust.</p
><p>Now the category details function. We're just going to have two lists: subcategories and direct subissues. Each one will have a name and numerical ID.</p
><p>But here's a very nice feature of Yesod: We're going to have multiple representations of this data. The main one people will use is the HTML representation. However, we're also going to provide a JSON representation. This will make it very simple to write clients or to AJAXify this application in the future.</p
><pre class="sourceCode haskell"><code>categoryDetailsH :: Integer -&gt; Handler Tweedle RepHtmlJson
</code
  ></pre
><p>That function signature tells us a lot: the parameter is the category ID, and we'll be returning something that has both an HTML and JSON representation.</p
><pre class="sourceCode haskell"><code>categoryDetailsH catId = do
</code
  ></pre
><p>getYesod returns our Tweedle data type. Remember, we wrapped it in an MVar; since this is a read-only operation, will unwrap the MVar immediately.</p
><pre class="sourceCode haskell"><code>Tweedle _ mvarTopCat _ &lt;- getYesod
  topcat &lt;- liftIO $ readMVar mvarTopCat
</code
  ></pre
><p>Next we need to find the requested category. You'll see the (boilerplate) function below. If the category doesn't exist, we want to return a 404 response page. So:</p
><pre class="sourceCode haskell"><code>(parents, cat) &lt;- maybe notFound return $ findCat catId [] topcat
</code
  ></pre
><p>Now we want to convert the category into an HtmlObject. By doing so, we will get automatic HTML entity encoding; in other words, no XSS attacks.</p
><pre class="sourceCode haskell"><code>let catHelper (Category _ _ cid name) = Mapping
          [ (&quot;name&quot;, Scalar $ Text $ pack name)
          , (&quot;id&quot;, Scalar $ Text $ pack $ show cid)
          ]
  let statusHelper = fromMaybe &quot;No status set&quot;
                   . getLast . mconcat . map (Last . messageStatus)
  let priorityHelper = fromMaybe &quot;No priority set&quot;
                     . getLast . mconcat . map (Last . messagePriority)
  let issueHelper (Issue name messages iid) = Mapping
          [ (&quot;name&quot;, Scalar $ Text $ pack name)
          , (&quot;id&quot;, Scalar $ Text $ pack $ show iid)
          , (&quot;status&quot;, Scalar $ Text $ pack $ statusHelper messages)
          , (&quot;priority&quot;, Scalar $ Text $ pack $ priorityHelper messages)
          ]
  let ho = Mapping
          [ (&quot;cats&quot;, Sequence $ map catHelper $ subCats cat)
          , (&quot;issues&quot;, Sequence $ map issueHelper $ subIssues cat)
          ]
</code
  ></pre
><p>And now we'll use a String Template to display the whole thing.</p
><pre class="sourceCode haskell"><code>templateHtmlJson &quot;category-details&quot; ho $ \_ -&gt; return
      . setHtmlAttrib &quot;cat&quot; ho
      . setHtmlAttrib &quot;name&quot; (catName cat)
      . setHtmlAttrib &quot;parents&quot; (Sequence $ map catHelper parents)
</code
  ></pre
><pre class="sourceCode haskell"><code>findCat :: Integer -&gt; [Category] -&gt; Category -&gt; Maybe ([Category], Category)
findCat i parents c@(Category cats _ i' _)
    | i == i' = Just (parents, c)
    | otherwise = getFirst $ mconcat $ map (First . findCat i (parents ++ [c])) cats
</code
  ></pre
><p>Now we get a new missing instance: YesodTemplate. As you can imagine, this is because of calling the templateHtmlJson function. This is easily enough solved (and explains why we needed TemplateGroup as part of Tweedle).</p
><pre class="sourceCode haskell"><code>instance YesodTemplate Tweedle where
  getTemplateGroup (Tweedle _ _ tg) = tg
</code
  ></pre
><p>Now we actually get some output! I'm not going to cover the syntax of string templates here, but you should read the files in the examples/tweedle-templates directory.</p
><p>Next, we need to implement createCategoryH. There are two parts to this process: parsing the form submission, and then modifying the database. Pay attention to the former, but you can ignore the latter if you wish. Also, this code does not do much for error checking, as that would needlessly complicate matters.</p
><pre class="sourceCode haskell"><code>createCategoryH :: Integer -&gt; Handler Tweedle ()
createCategoryH parentid = do
</code
  ></pre
><p>Yesod uses a formlets-style interface for parsing submissions. This following line says we want a parameter named catname, which precisely one value (required) and that value must have a non-zero length (notEmpty).</p
><pre class="sourceCode haskell"><code>catname &lt;- runFormPost $ notEmpty $ required $ input &quot;catname&quot;
  newid &lt;- modifyDB $ createCategory parentid catname
  ar &lt;- getApproot
  redirect RedirectPermanent $ ar ++ &quot;category/&quot; ++ show newid ++ &quot;/&quot;
</code
  ></pre
><p>And here's the database modification code we need. Once again, this is not web-specific.</p
><pre class="sourceCode haskell"><code>modifyDB :: (Category -&gt; (Category, x)) -&gt; Handler Tweedle x
modifyDB f = do
  Tweedle settings mcat _ &lt;- getYesod
  liftIO $ modifyMVar mcat $ \cat -&gt; do
      let (cat', x) = f cat
      encodeFile (issueFile settings) $ categoryToSO cat'
      return (cat', x)
</code
  ></pre
><pre class="sourceCode haskell"><code>createCategory :: Integer -&gt; String -&gt; Category -&gt; (Category, Integer)
createCategory parentid catname topcat =
  let newid = highCatId topcat + 1
      topcat' = addChild parentid (Category [] [] newid catname) topcat
   in (topcat', newid)
    where
      highCatId (Category cats _ i _) = maximum $ i : map highCatId cats
      addChild i' newcat (Category cats issues i name)
          | i' /= i = Category (map (addChild i' newcat) cats) issues i name
          | otherwise = Category (cats ++ [newcat]) issues i name
</code
  ></pre
><p>Next is creating an issue. This is almost identical to creating a category.</p
><pre class="sourceCode haskell"><code>createIssueH :: Integer -&gt; Handler Tweedle ()
createIssueH catid = do
  issuename &lt;- runFormPost $ notEmpty $ required $ input &quot;issuename&quot;
  newid &lt;- modifyDB $ createIssue catid issuename
  ar &lt;- getApproot
  redirect RedirectPermanent $ ar ++ &quot;issue/&quot; ++ show newid ++ &quot;/&quot;
</code
  ></pre
><pre class="sourceCode haskell"><code>createIssue :: Integer -&gt; String -&gt; Category -&gt; (Category, Integer)
createIssue catid issuename topcat =
  let newid = highIssueId topcat + 1
      topcat' = addIssue catid (Issue issuename [] newid) topcat
   in (topcat', newid)
    where
      highIssueId (Category cats issues _ _) =
          maximum $ 0 : (map issueId issues) ++ map highIssueId cats
      addIssue i' newissue (Category cats issues i name)
          | i' /= i = Category (map (addIssue i' newissue) cats) issues i name
          | otherwise = Category cats (issues ++ [newissue]) i name
</code
  ></pre
><p>Two functions to go. Now we want to show details of issues. This isn't too different from categoryDetailsH above, except for one feature: we need to know if a user is logged in. If they are logged in, we'll show an &quot;add message&quot; box; otherwise, we'll show a login box. Once again, we're getting the JSON representation easily.</p
><pre class="sourceCode haskell"><code>issueDetailsH :: Integer -&gt; Handler Tweedle RepHtmlJson
issueDetailsH iid = do
  Tweedle _ mvarTopCat _ &lt;- getYesod
  topcat &lt;- liftIO $ readMVar mvarTopCat
  (cat, issue) &lt;- maybe notFound return $ findIssue iid topcat
  let messageHelper m = Mapping $ map (second $ Scalar . Text . pack)
        $ (maybe id (\x -&gt; (:) (&quot;status&quot;, x)) $ messageStatus m)
        $ (maybe id (\x -&gt; (:) (&quot;priority&quot;, x)) $ messagePriority m)
        [ (&quot;author&quot;, messageAuthor m)
        , (&quot;text&quot;, messageText m)
        , (&quot;creation&quot;, show $ messageCreation m)
        ]
  let ho = Mapping
          [ (&quot;name&quot;, Scalar $ Text $ pack $ issueName issue)
          , (&quot;messages&quot;, Sequence $ map messageHelper $ issueMessages issue)
          ]
</code
  ></pre
><p>Now we determine is the user is logged in via the maybeIdentifier function. Later on, we'll see how we can force a user to be logged in using authIdentifier.</p
><pre class="sourceCode haskell"><code>ident &lt;- maybeIdentifier
</code
  ></pre
><pre class="sourceCode haskell"><code>templateHtmlJson &quot;issue-details&quot; ho $ \_ -&gt; return
      . setHtmlAttrib &quot;issue&quot; ho
      . maybe id (setHtmlAttrib &quot;ident&quot;) ident
      . setHtmlAttrib &quot;cat&quot; (Mapping
          [ (&quot;name&quot;, Scalar $ Text $ pack $ catName cat)
          , (&quot;id&quot;, Scalar $ Text $ pack $ show $ categoryId cat)
          ])
</code
  ></pre
><p>And now the supporting model code. This function returns the requested Issue along with the containing category.</p
><pre class="sourceCode haskell"><code>findIssue :: Integer -&gt; Category -&gt; Maybe (Category, Issue)
findIssue iid c@(Category cats issues _ _) =
  case filter (\issue -&gt; issueId issue == iid) issues of
      [] -&gt; getFirst $ mconcat $ map (First . findIssue iid) cats
      (issue:_) -&gt; Just (c, issue)
</code
  ></pre
><p>Cool, just one function left! This should probably all make sense by now. Notice, however, the use of authIdentifier: if the user is not logged in, they will be redirected to the login page automatically.</p
><pre class="sourceCode haskell"><code>addMessageH :: Integer -&gt; Handler Tweedle ()
addMessageH issueid = do
  ident &lt;- authIdentifier
  (status, priority, text) &lt;- runFormPost $
          (,,)
      &lt;$&gt; optional (input &quot;status&quot;)
      &lt;*&gt; optional (input &quot;priority&quot;)
      &lt;*&gt; required (input &quot;text&quot;)
  now &lt;- liftIO getCurrentTime
  let message = Message ident status priority text now
  modifyDB $ addMessage issueid message
  ar &lt;- getApproot
  redirect RedirectPermanent $ ar ++ &quot;issue/&quot; ++ show issueid ++ &quot;/&quot;
</code
  ></pre
><pre class="sourceCode haskell"><code>addMessage :: Integer -&gt; Message -&gt; Category -&gt; (Category, ())
addMessage issueid message (Category cats issues catid catname) =
  (Category (map (fst . addMessage issueid message) cats) (map go issues) catid catname, ())
    where
      go (Issue name messages iid)
          | iid == issueid = Issue name (messages ++ [message]) iid
          | otherwise = Issue name messages iid
</code
  ></pre
>
</article><p id="comments">Comments</p><div id="disqus_thread"></div><p><a class="dsq-brlink" href="https://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a></p></section><script type="text/javascript">var disqus_shortname = 'yesoddocs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><section class="getting-started"><h2>Archives</h2><div id="archive"><ul><li id="nav-2021"><span>2021</span><ul><li id="nav-202102"><span>February</span><ul><li class="leaf"><a href="/blog/2021/02/chatwisely-intro">We Made ChatWisely With Haskell</a></li></ul></li></ul></li><li id="nav-2020"><span>2020</span><ul><li id="nav-202005"><span>May</span><ul><li class="leaf"><a href="/blog/2020/05/blogannouncement">A new Haskell/Yesod Beginners Blog</a></li></ul></li></ul></li><li id="nav-2019"><span>2019</span><ul><li id="nav-201912"><span>December</span><ul><li class="leaf"><a href="/blog/2019/12/bookportuguese">A new Yesod book in Portuguese</a></li></ul></li><li id="nav-201902"><span>February</span><ul><li class="leaf"><a href="/blog/2019/02/deprecating-googleemail2">Deprecating GoogleEmail2</a></li></ul></li></ul></li><li id="nav-2018"><span>2018</span><ul><li id="nav-201801"><span>January</span><ul><li class="leaf"><a href="/blog/2018/01/upcoming-yesod-breaking-changes">Upcoming Yesod breaking changes</a></li></ul></li></ul></li><li id="nav-2017"><span>2017</span><ul><li id="nav-201711"><span>November</span><ul><li class="leaf"><a href="/blog/2017/11/mega-sdist">mega-sdist: the mega repo helper</a></li></ul></li><li id="nav-201706"><span>June</span><ul><li class="leaf"><a href="/blog/2017/06/updated-yesod-scaffolding">Updated Yesod Scaffolding</a></li></ul></li><li id="nav-201702"><span>February</span><ul><li class="leaf"><a href="/blog/2017/02/changes-yesods-ci">Changes to Yesod&#39;s CI</a></li></ul></li></ul></li><li id="nav-2016"><span>2016</span><ul><li id="nav-201611"><span>November</span><ul><li class="leaf"><a href="/blog/2016/11/new-yesod-devel-server">The New (Experimental) Yesod Development Server - Feedback Requested!</a></li><li class="leaf"><a href="/blog/2016/11/use-mysql-safely-in-yesod">Use MySQL Safely in Yesod Applications</a></li></ul></li><li id="nav-201609"><span>September</span><ul><li class="leaf"><a href="/blog/2016/09/better-ci-yesod-scaffoldings">Better CI for the Yesod scaffoldings</a></li></ul></li><li id="nav-201607"><span>July</span><ul><li class="leaf"><a href="/blog/2016/07/http2-server-push">Implementing HTTP/2 server push</a></li><li class="leaf"><a href="/blog/2016/07/new-http-client-mono-traversable">New http-client and mono-traversable releases</a></li></ul></li><li id="nav-201605"><span>May</span><ul><li class="leaf"><a href="/blog/2016/05/are-unused-import-warnings-harmful">Are unused import warnings harmful?</a></li></ul></li><li id="nav-201604"><span>April</span><ul><li class="leaf"><a href="/blog/2016/04/split-db">Supporting separate read and write databases in persistent</a></li><li class="leaf"><a href="/blog/2016/04/stackifying-the-cookbook">Stackifying the cookbook</a></li><li class="leaf"><a href="/blog/2016/04/fixing-monad-either">Fixing the Monad instance for Either</a></li></ul></li><li id="nav-201603"><span>March</span><ul><li class="leaf"><a href="/blog/2016/03/why-i-prefer-typeclass-based-libraries">Why I prefer typeclass-based libraries</a></li></ul></li><li id="nav-201602"><span>February</span><ul><li class="leaf"><a href="/blog/2016/02/first-class-stream-fusion">First class stream fusion</a></li></ul></li><li id="nav-201601"><span>January</span><ul><li class="leaf"><a href="/blog/2016/01/auto-generate-docbook-xml">Auto generate Docbook XML for the Yesod book</a></li></ul></li></ul></li><li id="nav-2015"><span>2015</span><ul><li id="nav-201512"><span>December</span><ul><li class="leaf"><a href="/blog/2015/12/yesod-hosting-docker-kubernetes">Yesod hosting with Docker and Kubernetes</a></li></ul></li><li id="nav-201510"><span>October</span><ul><li class="leaf"><a href="/blog/2015/10/beginner-friendly-code-and-apis">Beginner friendly code and APIs</a></li><li class="leaf"><a href="/blog/2015/10/resurrecting-servius">Resurrecting servius</a></li><li class="leaf"><a href="/blog/2015/10/using-wais-vault">Using WAI&#39;s vault for fun and profit</a></li></ul></li><li id="nav-201509"><span>September</span><ul><li class="leaf"><a href="/blog/2015/09/true-root-pvp-debate">The true root of the PVP debate</a></li><li class="leaf"><a href="/blog/2015/09/new-runtime-hamlet-api">The new runtime Hamlet API</a></li></ul></li><li id="nav-201508"><span>August</span><ul><li class="leaf"><a href="/blog/2015/08/ssl-server-test">Getting Rating A from the SSL Server Test</a></li><li class="leaf"><a href="/blog/2015/08/thoughts-on-documentation">Some thoughts on documentation</a></li></ul></li><li id="nav-201507"><span>July</span><ul><li class="leaf"><a href="/blog/2015/07/s3-hackage-mirror-travis">S3 Hackage mirror for Travis builds</a></li><li class="leaf"><a href="/blog/2015/07/http2">Supporting HTTP/2</a></li><li class="leaf"><a href="/blog/2015/07/yesod-devel">yesod-devel</a></li><li class="leaf"><a href="/blog/2015/07/yesod-table">yesod-table</a></li></ul></li><li id="nav-201506"><span>June</span><ul><li class="leaf"><a href="/blog/2015/06/stack-support-yesod-devel">stack support for yesod devel</a></li><li class="leaf"><a href="/blog/2015/06/cleaning-up-warp-apis">Cleaning up the Warp APIs</a></li><li class="leaf"><a href="/blog/2015/06/cabals-does-not-exist-error-message">cabal&#39;s does not exist error message</a></li></ul></li><li id="nav-201505"><span>May</span><ul><li class="leaf"><a href="/blog/2015/05/deprecating-system-filepath">Deprecating system-filepath and system-fileio</a></li></ul></li><li id="nav-201504"><span>April</span><ul><li class="leaf"><a href="/blog/2015/04/announcing-stackage-update">Announcing stackage-update</a></li></ul></li><li id="nav-201503"><span>March</span><ul><li class="leaf"><a href="/blog/2015/03/designing-apis-for-extensibility">Designing APIs for Extensibility</a></li></ul></li><li id="nav-201502"><span>February</span><ul><li class="leaf"><a href="/blog/2015/02/awesome-haskell-community">The awesome Haskell community</a></li><li class="leaf"><a href="/blog/2015/02/brittle-haskell-toolchain">The brittle Haskell toolchain</a></li></ul></li><li id="nav-201501"><span>January</span><ul><li class="leaf"><a href="/blog/2015/01/polyconf-2015">PolyConf 2015</a></li></ul></li></ul></li><li id="nav-2014"><span>2014</span><ul><li id="nav-201412"><span>December</span><ul><li class="leaf"><a href="/blog/2014/12/hackage-docs-live-again">Hackage docs live again, please do the READMEs!</a></li><li class="leaf"><a href="/blog/2014/12/use-stackage-for-docs">Use Stackage for docs</a></li><li class="leaf"><a href="/blog/2014/12/minimal-yesod-multifile-site">Minimal Yesod multifile site</a></li><li class="leaf"><a href="/blog/2014/12/yesods-new-scaffolding">Yesod&#39;s new scaffolding</a></li></ul></li><li id="nav-201411"><span>November</span><ul><li class="leaf"><a href="/blog/2014/11/cabal-sandbox-stackage">Installing application dependencies using Stackage, sandboxes, and freezing</a></li><li class="leaf"><a href="/blog/2014/11/case-for-curation">The case for curation: Stackage and the PVP</a></li></ul></li><li id="nav-201410"><span>October</span><ul><li class="leaf"><a href="/blog/2014/10/slides-conduit-ghcjs">Slides on conduit and GHCJS</a></li><li class="leaf"><a href="/blog/2014/10/yesod-gitrepo">Announcing: yesod-gitrepo</a></li><li class="leaf"><a href="/blog/2014/10/classy-base-prelude">Haskell&#39;s Prelude is adding Foldable/Traversable</a></li><li class="leaf"><a href="/blog/2014/10/updating-auto-update">Updating auto-update</a></li></ul></li><li id="nav-201409"><span>September</span><ul><li class="leaf"><a href="/blog/2014/09/announcing-yesod-1-4">Announcing Yesod 1.4</a></li><li class="leaf"><a href="/blog/2014/09/persistent-2.1-released">Persistent 2.1 released</a></li><li class="leaf"><a href="/blog/2014/09/woes-multiple-package-versions">The woes of multiple package versions</a></li><li class="leaf"><a href="/blog/2014/09/persistent-2.1-rc">Persistent 2.1 Release Candidate</a></li><li class="leaf"><a href="/blog/2014/09/clarification-previous-blog-post">Clarification of previous blog post</a></li><li class="leaf"><a href="/blog/2014/09/misassigned-credit-for-conduit">Misassigned credit for conduit</a></li><li class="leaf"><a href="/blog/2014/09/planning-yesod-1-4">Planning Yesod 1.4</a></li></ul></li><li id="nav-201408"><span>August</span><ul><li class="leaf"><a href="/blog/2014/08/announcing-persistent-2">Announcing Persistent 2</a></li><li class="leaf"><a href="/blog/2014/08/deprecating-yesod-platform">Deprecating yesod-platform</a></li><li class="leaf"><a href="/blog/2014/08/announcing-auto-update">Announcing auto-update</a></li></ul></li><li id="nav-201407"><span>July</span><ul><li class="leaf"><a href="/blog/2014/07/reading-files-proc-filesystem">Reading files from the proc filesystem</a></li><li class="leaf"><a href="/blog/2014/07/rfc-new-data-conduit-process">RFC: New Data.Conduit.Process</a></li></ul></li><li id="nav-201406"><span>June</span><ul><li class="leaf"><a href="/blog/2014/06/evil-conditional-compile">Three evil ways to avoid conditional compilation</a></li><li class="leaf"><a href="/blog/2014/06/exceptions-transformers">Exceptions and monad transformers</a></li><li class="leaf"><a href="/blog/2014/06/google-email2">GoogleEmail2 auth plugin</a></li></ul></li><li id="nav-201405"><span>May</span><ul><li class="leaf"><a href="/blog/2014/05/exceptions-cont-monads">Exceptions in continuation-based monads</a></li><li class="leaf"><a href="/blog/2014/05/wai-3-0-alpha">WAI 3.0 alpha release</a></li><li class="leaf"><a href="/blog/2014/05/foldable-mapm-maybe-recursive">Foldable.mapM_, Maybe, and recursive functions</a></li></ul></li><li id="nav-201404"><span>April</span><ul><li class="leaf"><a href="/blog/2014/04/disemboweling-wai">Disemboweling WAI (aka gutting out conduit)</a></li><li class="leaf"><a href="/blog/2014/04/proposal-changes-pvp">Proposal: Changes to the PVP</a></li><li class="leaf"><a href="/blog/2014/04/consolidation-progress">Consolidation progress: shakespeare, conduit, http-client</a></li></ul></li><li id="nav-201403"><span>March</span><ul><li class="leaf"><a href="/blog/2014/03/package-consolidation">Package consolidation</a></li><li class="leaf"><a href="/blog/2014/03/efficient-directory-traversals">Efficient directory traversals</a></li><li class="leaf"><a href="/blog/2014/03/gsoc-proposals">Google Summer of Code proposals</a></li><li class="leaf"><a href="/blog/2014/03/wai-yesod-websockets">WAI 2.1 and yesod-websockets</a></li><li class="leaf"><a href="/blog/2014/03/network-conduit-async">network-conduit, async, and conduit-combinators</a></li></ul></li><li id="nav-201402"><span>February</span><ul><li class="leaf"><a href="/blog/2014/02/module-name-conflicts">Module name conflicts on Hackage</a></li><li class="leaf"><a href="/blog/2014/02/announce-mono-chunked">Announcing mono-traversable, chunked-data, and conduit-combinators</a></li><li class="leaf"><a href="/blog/2014/02/ideas-pipes-parse">Some ideas for pipes-parse</a></li><li class="leaf"><a href="/blog/2014/02/conduit-zip-source">conduit 1.0.13 and ZipSource</a></li><li class="leaf"><a href="/blog/2014/02/new-warp">Improving the performance of Warp again</a></li></ul></li><li id="nav-201401"><span>January</span><ul><li class="leaf"><a href="/blog/2014/01/new-fast-logger">Faster and scalable fast-logger</a></li><li class="leaf"><a href="/blog/2014/01/announcing-resource-monad">Announcing: the Resource monad</a></li><li class="leaf"><a href="/blog/2014/01/initializing-foundation-data">Initializing data in the foundation datatype</a></li><li class="leaf"><a href="/blog/2014/01/conduit-transformer-exception">Improved transformer and exception support in conduit</a></li><li class="leaf"><a href="/blog/2014/01/update-st-monad-conduit">Update: The ST monad and conduit</a></li><li class="leaf"><a href="/blog/2014/01/st-monad-conduit">The ST monad and conduit</a></li><li class="leaf"><a href="/blog/2014/01/psa-please-use-yesod-platform">PSA: Please use yesod-platform</a></li><li class="leaf"><a href="/blog/2014/01/lens-generator-persistent">Lens generator in Persistent</a></li></ul></li></ul></li><li id="nav-2013"><span>2013</span><ul><li id="nav-201312"><span>December</span><ul><li class="leaf"><a href="/blog/2013/12/book-updated-for-1-2">Book fully updated for 1.2</a></li><li class="leaf"><a href="/blog/2013/12/book-updates-1-2">Book updates for 1.2: almost complete!</a></li><li class="leaf"><a href="/blog/2013/12/announcing-wai-2-http-client">Announcing: WAI 2.0 and http-client</a></li></ul></li><li id="nav-201311"><span>November</span><ul><li class="leaf"><a href="/blog/2013/11/wai-2-http-client">WAI 2.0 and http-client</a></li></ul></li><li id="nav-201310"><span>October</span><ul><li class="leaf"><a href="/blog/2013/10/simpler-conduit-core">Simpler conduit core</a></li><li class="leaf"><a href="/blog/2013/10/core-flaw-pipes-conduit">The core flaw of pipes and conduit</a></li><li class="leaf"><a href="/blog/2013/10/pipes-resource-problems">pipes resource problems</a></li><li class="leaf"><a href="/blog/2013/10/segfaults">A warning about segfaults</a></li><li class="leaf"><a href="/blog/2013/10/prelude-replacements-libraries">Prelude replacements are for application developers</a></li></ul></li><li id="nav-201309"><span>September</span><ul><li class="leaf"><a href="/blog/2013/09/classy-mono">Announce: mono-traversable and classy-prelude 0.6</a></li><li class="leaf"><a href="/blog/2013/09/folding-lines-conduit">Folding lines in conduit</a></li><li class="leaf"><a href="/blog/2013/09/zipsinks-conduit-extra">ZipSinks and conduit-extra</a></li><li class="leaf"><a href="/blog/2013/09/yesod-platform-1-2-4">Yesod Platform version 1.2.4</a></li><li class="leaf"><a href="/blog/2013/09/lens-based-classy-prelude">lens-based classy-prelude</a></li></ul></li><li id="nav-201308"><span>August</span><ul><li class="leaf"><a href="/blog/2013/08/exceptions-and-monad-transformers">Exceptions and monad transformers</a></li></ul></li><li id="nav-201307"><span>July</span><ul><li class="leaf"><a href="/blog/2013/07/four-more-chapters">Four more chapters ready</a></li><li class="leaf"><a href="/blog/2013/07/catching-all-exceptions">Catching all exceptions</a></li><li class="leaf"><a href="/blog/2013/07/runtime-lucius-mixins">Runtime Lucius: now with mixins!</a></li></ul></li><li id="nav-201306"><span>June</span><ul><li class="leaf"><a href="/blog/2013/06/first-11-chapters">First 11 chapters are Yesod 1.2-compliant</a></li></ul></li><li id="nav-201305"><span>May</span><ul><li class="leaf"><a href="/blog/2013/05/yesod-1-2-released">Yesod 1.2 released</a></li></ul></li><li id="nav-201304"><span>April</span><ul><li class="leaf"><a href="/blog/2013/04/persistent-1-2-out">Persistent 1.2 is out, last call on Yesod 1.2</a></li><li class="leaf"><a href="/blog/2013/04/mixin-support-in-lucius">Mixin support in Lucius</a></li><li class="leaf"><a href="/blog/2013/04/new-chapter">New chapter: Understanding a Request</a></li><li class="leaf"><a href="/blog/2013/04/shakespeare-typescript">Shakespeare templating updates and TypeScript support</a></li><li class="leaf"><a href="/blog/2013/04/changes-to-online-book">Changes to the online book</a></li></ul></li><li id="nav-201303"><span>March</span><ul><li class="leaf"><a href="/blog/2013/03/simpler-streaming-responses">Simpler streaming responses</a></li><li class="leaf"><a href="/blog/2013/03/yesod-dispatch-version-1-2">Yesod dispatch, version 1.2</a></li><li class="leaf"><a href="/blog/2013/03/big-subsite-rewrite">Big Subsite Rewrite</a></li><li class="leaf"><a href="/blog/2013/03/yesod-1-2-cleaner-internals">Yesod 1.2&#39;s cleaner internals</a></li><li class="leaf"><a href="/blog/2013/03/resourcet-overview">ResourceT Overview</a></li><li class="leaf"><a href="/blog/2013/03/yesod-platform-1-1-8">ANNOUNCE: yesod-platform 1.1.8</a></li></ul></li><li id="nav-201302"><span>February</span><ul><li class="leaf"><a href="/blog/2013/02/announce-conduit-1-0-wai-1-4">ANNOUNCE: conduit 1.0, wai 1.4, and more</a></li><li class="leaf"><a href="/blog/2013/02/upcoming-conduit-1-0">Upcoming conduit 1.0</a></li><li class="leaf"><a href="/blog/2013/02/authentication-for-testing">Authentication during Testing</a></li><li class="leaf"><a href="/blog/2013/02/ajax-with-scaffold">Using Ajax with a Scaffolded Site</a></li></ul></li><li id="nav-201301"><span>January</span><ul><li class="leaf"><a href="/blog/2013/01/school-of-haskell">The School of Haskell</a></li><li class="leaf"><a href="/blog/2013/01/adding-css-js">Cookbook: Adding CSS and Javascript</a></li><li class="leaf"><a href="/blog/2013/01/meaning-of-power">The Meaning of Power</a></li><li class="leaf"><a href="/blog/2013/01/new-goal-yesod-1-2">New goal: Yesod 1.2</a></li><li class="leaf"><a href="/blog/2013/01/so-many-preludes">So many preludes!</a></li></ul></li></ul></li><li id="nav-2012"><span>2012</span><ul><li id="nav-201212"><span>December</span><ul><li class="leaf"><a href="/blog/2012/12/simplified-persistent-types">Simplified Persistent Types</a></li></ul></li><li id="nav-201211"><span>November</span><ul><li class="leaf"><a href="/blog/2012/11/stable-vetted-hackage">Stable, Vetted Hackage: Call for Participation</a></li><li class="leaf"><a href="/blog/2012/11/updates-julius-interpolation">Updates to Julius Interpolation</a></li><li class="leaf"><a href="/blog/2012/11/warp-posa">Warp chapter for Performance of Open Source Applications</a></li><li class="leaf"><a href="/blog/2012/11/solving-cabal-hell">Solving Cabal Hell</a></li><li class="leaf"><a href="/blog/2012/11/changes-scaffolding-system">Changes to scaffolding system</a></li></ul></li><li id="nav-201210"><span>October</span><ul><li class="leaf"><a href="/blog/2012/10/yesod-fay-js">Yesod, AngularJS and Fay</a></li><li class="leaf"><a href="/blog/2012/10/keter-updates">Keter updates</a></li><li class="leaf"><a href="/blog/2012/10/future-work-warp">Future work to improve the performance of Warp</a></li><li class="leaf"><a href="/blog/2012/10/haskell-and-ci">Haskell and Continuous Integration</a></li><li class="leaf"><a href="/blog/2012/10/measuring-warp">Measuring the performance of Warp</a></li><li class="leaf"><a href="/blog/2012/10/yesod-pure">yesod-pure: Use Yesod without Template Haskell</a></li><li class="leaf"><a href="/blog/2012/10/yesod-user-survey-2012">Yesod User Survey 2012</a></li><li class="leaf"><a href="/blog/2012/10/announcing-http-reverse-proxy">Announcing: http-reverse-proxy, unix-process-conduit, and more</a></li><li class="leaf"><a href="/blog/2012/10/jqplot-widget">Yesod composability: a jqPlot widget</a></li><li class="leaf"><a href="/blog/2012/10/generic-monoid">Generics example: creating Monoid instances</a></li><li class="leaf"><a href="/blog/2012/10/avoid-syscall">Avoiding system calls</a></li></ul></li><li id="nav-201209"><span>September</span><ul><li class="leaf"><a href="/blog/2012/09/header-composer">Composing HTTP response headers</a></li><li class="leaf"><a href="/blog/2012/09/caching-fd">Caching file descriptors</a></li><li class="leaf"><a href="/blog/2012/09/project-templates">Haskell Project Templates</a></li><li class="leaf"><a href="/blog/2012/09/header-body">Sending header and body at once</a></li><li class="leaf"><a href="/blog/2012/09/improving-warp">Improving the performance of Warp</a></li><li class="leaf"><a href="/blog/2012/09/building-haskell-ide">Building a Haskell IDE</a></li><li class="leaf"><a href="/blog/2012/09/small-status-update">Small status update</a></li></ul></li><li id="nav-201208"><span>August</span><ul><li class="leaf"><a href="/blog/2012/08/joining-forces-advance-haskell">Joining forces to advance Haskell</a></li><li class="leaf"><a href="/blog/2012/08/announcing-yesod-1-1">Announcing: Yesod 1.1, Persistent 1.0, and a new initiative</a></li><li class="leaf"><a href="/blog/2012/08/webinar-oreilly">O&#39;Reilly Webinar: Designing Type-Safe Haskell APIs</a></li><li class="leaf"><a href="/blog/2012/08/classy-prelude-good-bad-ugly">ClassyPrelude: The good, the bad, and the ugly</a></li></ul></li><li id="nav-201207"><span>July</span><ul><li class="leaf"><a href="/blog/2012/07/shelly-update">State of the Shelly (Haskell scripting lib)</a></li><li class="leaf"><a href="/blog/2012/07/resumablesource">conduit 0.5: ResumableSource and finalization</a></li><li class="leaf"><a href="/blog/2012/07/clarification-classy-prelude">Clarification: classy prelude</a></li><li class="leaf"><a href="/blog/2012/07/announcing-baseless-assertion">Announcing baseless-assertion 0.1</a></li><li class="leaf"><a href="/blog/2012/07/announcing-wai-1-3">Announcing WAI 1.3</a></li><li class="leaf"><a href="/blog/2012/07/classy-prelude">The classy prelude</a></li><li class="leaf"><a href="/blog/2012/07/haskell-vm">The Haskell Virtual Machine</a></li><li class="leaf"><a href="/blog/2012/07/new-logging-system">Yesod&#39;s new logging system</a></li></ul></li><li id="nav-201206"><span>June</span><ul><li class="leaf"><a href="/blog/2012/06/conduit-0-5">conduit 0.5: announcement and example</a></li><li class="leaf"><a href="/blog/2012/06/attoparsec-position">Position information in attoparsec</a></li><li class="leaf"><a href="/blog/2012/06/complicating-conduit">Complicating conduit?</a></li><li class="leaf"><a href="/blog/2012/06/updated-conduit-docs">Updated conduit docs</a></li></ul></li><li id="nav-201205"><span>May</span><ul><li class="leaf"><a href="/blog/2012/05/next-conduit-changes">Next set of conduit changes</a></li><li class="leaf"><a href="/blog/2012/05/response-conduit-bugs">Response to &quot;Conduit Bugs&quot;</a></li><li class="leaf"><a href="/blog/2012/05/keter-its-alive">Keter: It&#39;s Alive!</a></li><li class="leaf"><a href="/blog/2012/05/keter-app-deployment">Keter: Web App Deployment</a></li></ul></li><li id="nav-201204"><span>April</span><ul><li class="leaf"><a href="/blog/2012/04/yesod-js-todo">More Client Side Yesod: todo sample</a></li><li class="leaf"><a href="/blog/2012/04/client-side">Client Side Yesod, an FRP-inspired approach</a></li><li class="leaf"><a href="/blog/2012/04/debugging-openid">A Debugging Adventure: OpenID</a></li><li class="leaf"><a href="/blog/2012/04/skinning-conduits">Many ways to skin a conduit</a></li><li class="leaf"><a href="/blog/2012/04/working-together">Working Together</a></li><li class="leaf"><a href="/blog/2012/04/announcing-yesod-1-0">Announcing Yesod 1.0</a></li><li class="leaf"><a href="/blog/2012/04/cabal-meta">Transcending to dependency heaven</a></li><li class="leaf"><a href="/blog/2012/04/replacing-cabal">Replacing Cabal</a></li></ul></li><li id="nav-201203"><span>March</span><ul><li class="leaf"><a href="/blog/2012/03/summarizing-conduit-questions">Summarizing the conduit questions</a></li><li class="leaf"><a href="/blog/2012/03/pipes-like-conduit">pipes-like conduit</a></li><li class="leaf"><a href="/blog/2012/03/start-mezzo-haskell">Starting the Mezzo Haskell Book</a></li><li class="leaf"><a href="/blog/2012/03/announcing-conduit-0-3">Announcing conduit 0.3</a></li><li class="leaf"><a href="/blog/2012/03/announcing-yesod-platform">Announcing the Yesod Platform</a></li><li class="leaf"><a href="/blog/2012/03/shelly-for-shell-scripts">Shelly: Write your shell scripts in Haskell </a></li><li class="leaf"><a href="/blog/2012/03/cabal-nirvana">Avoid cabal hell: find nirvana</a></li><li class="leaf"><a href="/blog/2012/03/history-of-persistence">A History of Haskell persistence</a></li><li class="leaf"><a href="/blog/2012/03/more-pure-conduit">More Pure Conduit (and benchmarks!)</a></li><li class="leaf"><a href="/blog/2012/03/more-powerful-conduit">A More Powerful Conduit</a></li></ul></li><li id="nav-201202"><span>February</span><ul><li class="leaf"><a href="/blog/2012/02/simplifying-resourcet">Conduits: Simplifying ResourceT</a></li><li class="leaf"><a href="/blog/2012/02/call-for-gsoc-2012">Call for GSoC: bring Haskell to the masses</a></li><li class="leaf"><a href="/blog/2012/02/qcon-video">QCon video and book updates</a></li><li class="leaf"><a href="/blog/2012/02/release-0-10">Announcing Yesod 0.10</a></li><li class="leaf"><a href="/blog/2012/02/persistent-0-8">The New Persistent</a></li><li class="leaf"><a href="/blog/2012/02/answers-about-the-book">Answers about the Yesod book</a></li></ul></li><li id="nav-201201"><span>January</span><ul><li class="leaf"><a href="/blog/2012/01/coming-soon">Coming soon, to a bookstore near you</a></li><li class="leaf"><a href="/blog/2012/01/conduit-changes-0-2">Exciting changes coming to conduit 0.2</a></li><li class="leaf"><a href="/blog/2012/01/persisent-0-7-yesod-0-10-beta">Persistent 0.7, Yesod 0.10 beta</a></li><li class="leaf"><a href="/blog/2012/01/wiki-chat-subsite">Wiki: markdown, chat subsite, event source</a></li><li class="leaf"><a href="/blog/2012/01/new-pet-peeve">My New Pet Peeve</a></li><li class="leaf"><a href="/blog/2012/01/warp-conduits">Warp Conduits Released!</a></li><li class="leaf"><a href="/blog/2012/01/aosa-chapter">AOSA Chapter on Yesod</a></li><li class="leaf"><a href="/blog/2012/01/conduit-versus-enumerator">Conduits versus enumerators</a></li><li class="leaf"><a href="/blog/2012/01/blog-example">Blog: i18n, authentication, authorization, and database</a></li><li class="leaf"><a href="/blog/2012/01/conduits-buffering">Conduits, part 5: Buffering</a></li><li class="leaf"><a href="/blog/2012/01/http-conduit">http-conduit</a></li><li class="leaf"><a href="/blog/2012/01/conduits-conduits">Conduits, part 4: Conduits</a></li></ul></li></ul></li><li id="nav-2011"><span>2011</span><ul><li id="nav-201112"><span>December</span><ul><li class="leaf"><a href="/blog/2011/12/future-of-http-enumerator">The future of http-enumerator</a></li><li class="leaf"><a href="/blog/2011/12/conduits-sink">Conduits, part 3: Sinks</a></li><li class="leaf"><a href="/blog/2011/12/0-9-4-release">Yesod 0.9.4 Released</a></li><li class="leaf"><a href="/blog/2011/12/conduits">Conduits</a></li><li class="leaf"><a href="/blog/2011/12/resourcet">The Resource monad transformer</a></li><li class="leaf"><a href="/blog/2011/12/variable-naming-context">Good variable naming is context dependent </a></li><li class="leaf"><a href="/blog/2011/12/yesod-scaffolded-site">Scaffolding and the Site Template</a></li><li class="leaf"><a href="/blog/2011/12/please-use-packdeps">Please use Packdeps!</a></li></ul></li><li id="nav-201111"><span>November</span><ul><li class="leaf"><a href="/blog/2011/11/cabal-src">Announcing cabal-src</a></li><li class="leaf"><a href="/blog/2011/11/got-right">What Yesod got Right</a></li></ul></li><li id="nav-201110"><span>October</span><ul><li class="leaf"><a href="/blog/2011/10/code-generation-conversation">Code that writes code and conversation about conversations</a></li><li class="leaf"><a href="/blog/2011/10/frameworks-drive">Frameworks drive language adoption</a></li><li class="leaf"><a href="/blog/2011/10/xml-enumerator">xml-enumerator</a></li><li class="leaf"><a href="/blog/2011/10/yesods-monads">Yesod&#39;s Monads</a></li><li class="leaf"><a href="/blog/2011/10/settings-types">Settings Types</a></li></ul></li><li id="nav-201109"><span>September</span><ul><li class="leaf"><a href="/blog/2011/09/new-book-content">New Book Content</a></li><li class="leaf"><a href="/blog/2011/09/case-study-sphinx">Case Study: Sphinx-based Search</a></li><li class="leaf"><a href="/blog/2011/09/yesod-0.9.2">Yesod 0.9.2 - Everything Just Works</a></li><li class="leaf"><a href="/blog/2011/09/limitations-of-haskell">The Limitations of Haskell</a></li></ul></li><li id="nav-201108"><span>August</span><ul><li class="leaf"><a href="/blog/2011/08/new-forms-chapter">Forms 0.9</a></li><li class="leaf"><a href="/blog/2011/08/announcing-yesod-0.9">Yesod 0.9 Release Anouncement</a></li><li class="leaf"><a href="/blog/2011/08/persistent-0-6-0">Persistent 0.6.0</a></li><li class="leaf"><a href="/blog/2011/08/0.9-rc3-and-scaffold-upgrade">Yesod 0.9 Release Candidate 3</a></li><li class="leaf"><a href="/blog/2011/08/monad-control">monad-control</a></li><li class="leaf"><a href="/blog/2011/08/yesod-0-9-release-candidate">Announcing Yesod 0.9.0 Release Candidate</a></li><li class="leaf"><a href="/blog/2011/08/perils-partially-powered-languages">The Perils of Partially Powered Languages</a></li><li class="leaf"><a href="/blog/2011/08/shakespeare">New Shakespeare Chapter</a></li><li class="leaf"><a href="/blog/2011/08/yesod-form-overhaul">Yesod form overhaul</a></li><li class="leaf"><a href="/blog/2011/08/pdf-book">PDF version of the Yesod book</a></li></ul></li><li id="nav-201107"><span>July</span><ul><li class="leaf"><a href="/blog/2011/07/yesod-reorg">The Great Yesod Reorganization of 2011</a></li><li class="leaf"><a href="/blog/2011/07/haskell-on-heroku">Haskell on Heroku</a></li><li class="leaf"><a href="/blog/2011/07/browserid-support">BrowserID support</a></li><li class="leaf"><a href="/blog/2011/07/yesod-community">Yesod Community</a></li><li class="leaf"><a href="/blog/2011/07/syntax-highlighting">Line numbering/syntax highlighting added</a></li></ul></li><li id="nav-201106"><span>June</span><ul><li class="leaf"><a href="/blog/2011/06/yesod-docs-haskellwiki">Yesod and Haskell Docs</a></li><li class="leaf"><a href="/blog/2011/06/cookbook-part-2">Cookbook, part 2</a></li><li class="leaf"><a href="/blog/2011/06/building-better-chm">Building a Better CHM</a></li><li class="leaf"><a href="/blog/2011/06/cookbook">Cookbook</a></li></ul></li><li id="nav-201105"><span>May</span><ul><li class="leaf"><a href="/blog/2011/05/yesod-for-non-haskellers">Yesod for non-Haskellers</a></li><li class="leaf"><a href="/blog/2011/05/introducing-yesod-wiki">Introducing the Yesod Wiki</a></li><li class="leaf"><a href="/blog/2011/05/forms-api-decisions">Forms API Decisions (and some status updates)</a></li><li class="leaf"><a href="/blog/2011/05/yesod-form-revamp">Yesod Form Revamp</a></li><li class="leaf"><a href="/blog/2011/05/non-poly-hamlet-i18n">Non-Polymorphic Hamlet and I18N</a></li><li class="leaf"><a href="/blog/2011/05/warp-article-functional-web">Warp article in &quot;The Functional Web&quot;</a></li></ul></li><li id="nav-201104"><span>April</span><ul><li class="leaf"><a href="/blog/2011/04/announcing-yesod-0-8">Announcing Yesod 0.8</a></li><li class="leaf"><a href="/blog/2011/04/yesod-template-haskell">Yesod and Template Haskell</a></li><li class="leaf"><a href="/blog/2011/04/new-site-design">New site design, and some book progress</a></li><li class="leaf"><a href="/blog/2011/04/beta-yesod-0-8">Beta Release: Yesod 0.8</a></li><li class="leaf"><a href="/blog/2011/04/announcing-wai-0-4">Announcing WAI/Warp 0.4.0</a></li><li class="leaf"><a href="/blog/2011/04/rails-can-scale">Rails can scale- auto-convert it to the framework formerly known as Yesod!</a></li></ul></li><li id="nav-201103"><span>March</span><ul><li class="leaf"><a href="/blog/2011/03/improving-persistent-performance">Improving Persistent Performance</a></li><li class="leaf"><a href="/blog/2011/03/hamlet-lucius-widgets">Hamlet, Lucius and Widgets, oh my!</a></li><li class="leaf"><a href="/blog/2011/03/preliminary-warp-cross-language-benchmarks">Preliminary Warp Cross-Language Benchmarks</a></li><li class="leaf"><a href="/blog/2011/03/road-to-yesod-1-0">The Road to Yesod 1.0</a></li></ul></li><li id="nav-201102"><span>February</span><ul><li class="leaf"><a href="/blog/2011/02/warp-speed-ahead">Warp Speed Ahead</a></li><li class="leaf"><a href="/blog/2011/02/chapters-1-4">Yesod Book: Chapters 1-4 updated</a></li><li class="leaf"><a href="/blog/2011/02/routing-changes-yesod-0-7">Routing Changes in Yesod 0.7</a></li><li class="leaf"><a href="/blog/2011/02/reverse-packdeps">Reverse Packdeps</a></li><li class="leaf"><a href="/blog/2011/02/announcing-yesod-0-7">Announcing Yesod 0.7</a></li><li class="leaf"><a href="/blog/2011/02/yesod-migration-guide">Yesod 0.7 Migration Guide</a></li></ul></li><li id="nav-201101"><span>January</span><ul><li class="leaf"><a href="/blog/2011/01/hamlet6to7">Hamlet 6 to 7</a></li><li class="leaf"><a href="/blog/2011/01/announcing-warp">Announcing the Warp web server</a></li><li class="leaf"><a href="/blog/2011/01/data-object-yaml">data-object-yaml package</a></li><li class="leaf"><a href="/blog/2011/01/i18n-in-haskell">I18N in Haskell</a></li><li class="leaf"><a href="/blog/2011/01/announcing-wai-0-3">Announcing Web Application Interface 0.3.0</a></li></ul></li></ul></li><li class="open" id="nav-2010"><span>2010</span><ul><li id="nav-201012"><span>December</span><ul><li class="leaf"><a href="/blog/2010/12/announcing-yackage">Announcing Yackage: Your personal Hackage server for testing</a></li><li class="leaf"><a href="/blog/2010/12/magic-of-yesod-part2">The Magic of Yesod, part 2</a></li><li class="leaf"><a href="/blog/2010/12/magic-of-yesod-part1">The Magic of Yesod, part 1</a></li><li class="leaf"><a href="/blog/2010/12/yesod-user-survey">Yesod User Survey</a></li><li class="leaf"><a href="/blog/2010/12/announcing-xml-enumerator">Announcing XML Enumerator</a></li><li class="leaf"><a href="/blog/2010/12/serendipity-wai-http-enumerator">Serendipity: WAI and http-enumerator</a></li><li class="leaf"><a href="/blog/2010/12/yesods-own-world">Library versus Framework: Yesod&#39;s Own World</a></li><li class="leaf"><a href="/blog/2010/12/early-december-update">Early December Update</a></li></ul></li><li id="nav-201011"><span>November</span><ul><li class="leaf"><a href="/blog/2010/11/new-book-comments-system">New book comments system, and a new site design</a></li><li class="leaf"><a href="/blog/2010/11/wishlist">Wishlist</a></li><li class="leaf"><a href="/blog/2010/11/yesod-0-6-3">Yesod 0.6.3 Released</a></li><li class="leaf"><a href="/blog/2010/11/javascript-minification">Javascript Minification</a></li><li class="leaf"><a href="/blog/2010/11/atomic-field-modification-persistent">Atomic Field Modification in Persistent</a></li><li class="leaf"><a href="/blog/2010/11/please-break-yesod">Please Break Yesod</a></li></ul></li><li id="nav-201010"><span>October</span><ul><li class="leaf"><a href="/blog/2010/10/yesod-0-6">Yesod 0.6.0 Released</a></li><li class="leaf"><a href="/blog/2010/10/custom-forms">Custom Forms and the Form Monad</a></li><li class="leaf"><a href="/blog/2010/10/invertible-monads-exceptions-allocations">Invertible monads for exception handling and memory allocations</a></li><li class="leaf"><a href="/blog/2010/10/forms-chapter-written">Forms Chapter Written</a></li><li class="leaf"><a href="/blog/2010/10/announcing-zlib-bindings">Announcing zlib-bindings</a></li><li class="leaf"><a href="/blog/2010/10/enumerators-tutorial-part-3">Enumerators Tutorial Part 3: Enumeratee</a></li><li class="leaf"><a href="/blog/2010/10/haskellers-and-openid">Haskellers.com and OpenID</a></li><li class="leaf"><a href="/blog/2010/10/enumerators-tutorial-part-2">Enumerators Tutorial Part 2: Enumerator</a></li></ul></li><li id="nav-201009"><span>September</span><ul><li class="leaf"><a href="/blog/2010/09/enumerators-tutorial-part-1">Enumerators Tutorial Part 1: Iteratee</a></li><li class="leaf"><a href="/blog/2010/09/yesod-0-5-1">Yesod 0.5.1: HTML sanitization, generalized Hamlet and pluggable authentication</a></li><li class="leaf"><a href="/blog/2010/09/announcing-http-enumerator">Announcing http-enumerator</a></li><li class="leaf"><a href="/blog/2010/09/modular-authentication">Modular Authentication</a></li><li class="leaf"><a href="/blog/2010/09/wai-handler-devel">WAI development server (aka, skip the compiles)</a></li><li class="leaf"><a href="/blog/2010/09/yammer-screencast">Yammer Screencast</a></li><li class="leaf"><a href="/blog/2010/09/yo-dawg-template-haskell">Yo dawg, I heard you like Template Haskell</a></li><li class="leaf"><a href="/blog/2010/09/adding-varnish">Adding a little varnish</a></li></ul></li><li id="nav-201008"><span>August</span><ul><li class="leaf"><a href="/blog/2010/08/yesod-0-5">Yesod 0.5.0 Released</a></li><li class="leaf"><a href="/blog/2010/08/orange-roster">Orange Roster</a></li><li class="leaf"><a href="/blog/2010/08/static-file-optimizations">Static File Optimizations</a></li><li class="leaf"><a href="/blog/2010/08/typesafe-runtime-hamlet">Type-safe runtime Hamlet</a></li><li class="leaf"><a href="/blog/2010/08/whats-in-a-hamlet">What&#39;s in a Hamlet?</a></li></ul></li><li id="nav-201007"><span>July</span><ul><li class="leaf"><a href="/blog/2010/07/database-migrations">Recent update: database migrations and more</a></li><li class="leaf"><a href="/blog/2010/07/wai-handler-snap">wai-handler-snap: Run Yesod apps on the Snap server</a></li><li class="leaf"><a href="/blog/2010/07/yesod-0-4">Yesod 0.4.0 Released</a></li><li class="leaf"><a href="/blog/2010/07/wai-0-2-ideas">Web Application Interface 0.2 Ideas</a></li><li class="leaf"><a href="/blog/2010/07/sessions">Sessions</a></li><li class="leaf"><a href="/blog/2010/07/first-stab-at-widgets">First Stab at Widgets</a></li></ul></li><li id="nav-201006"><span>June</span><ul><li class="leaf"><a href="/blog/2010/06/some-plumbing-fixes">Some Plumbing Fixes</a></li><li class="leaf"><a href="/blog/2010/06/fringe-benefits-typesafe-urls">Fringe benefits of type-safe URLs</a></li><li class="leaf"><a href="/blog/2010/06/first-persistent-new-yesod">First Persistent release, new Yesod release</a></li><li class="leaf"><a href="/blog/2010/06/hamlet-and-persistent">Hamlet 0.3.0 and Persistent documentation</a></li><li class="leaf"><a href="/blog/2010/06/restful-content">RESTful Content</a></li><li class="leaf"><a href="/blog/2010/06/handler-monad">The Handler Monad</a></li><li class="leaf"><a href="/blog/2010/06/optimizing-hamlet-minor-correction">Optimizing Hamlet (a minor correction)</a></li><li class="leaf"><a href="/blog/2010/06/optimizing-hamlet">Optimizing Hamlet</a></li><li class="leaf"><a href="/blog/2010/06/formlets-meet-hamlet">Formlets meet Hamlet</a></li></ul></li><li id="nav-201005"><span>May</span><ul><li class="leaf"><a href="/blog/2010/05/persistent-blog-example">Persistent Blog Example- with Redis support!</a></li><li class="leaf"><a href="/blog/2010/05/persistent-progress">Persistent Progress</a></li><li class="leaf"><a href="/blog/2010/05/persistence-thoughts">Persistence Thoughts</a></li><li class="leaf"><a href="/blog/2010/05/bigtable-benchmarks">Bigtable Benchmarks</a></li><li class="leaf"><a href="/blog/2010/05/yesod-0-2-0-released">Yesod 0.2.0 Released</a></li><li class="leaf"><a href="/blog/2010/05/laying-the-foundation">Laying the Foundation</a></li><li class="leaf"><a href="/blog/2010/05/status-update">Status Update</a></li><li class="leaf"><a href="/blog/2010/05/really-type-safe-urls">Really type-safe URLs</a></li><li class="leaf"><a href="/blog/2010/05/hamlet-version-0-2">Hamlet Version 0.2</a></li><li class="leaf"><a href="/blog/2010/05/migrating-to-yesod-0-2">Migrating to Yesod 0.2</a></li></ul></li><li id="nav-201004"><span>April</span><ul><li class="leaf"><a href="/blog/2010/04/yesod-mini-tutorial">Yesod 0.2 Mini Tutorial</a></li><li class="leaf"><a href="/blog/2010/04/pedantic">Pedantic</a></li><li class="leaf"><a href="/blog/2010/04/hamlet-is-born">Hamlet is Born</a></li><li class="leaf"><a href="/blog/2010/04/whats-cooking-with-yesod">What&#39;s Cooking with Yesod</a></li></ul></li><li class="open" id="nav-201003"><span>March</span><ul><li class="leaf"><a href="/blog/2010/03/persistent-plugs">Persistent Plugs</a></li><li class="leaf"><a href="/blog/2010/03/persistence">Persistence</a></li><li class="leaf"><a class="current" href="/blog/2010/03/tweedle-beetle-battle">Tweedle Beetle Battle</a></li></ul></li><li id="nav-201002"><span>February</span><ul><li class="leaf"><a href="/blog/2010/02/simpler-is-better">Simpler is Better</a></li><li class="leaf"><a href="/blog/2010/02/request-body-interfaces">Four HTTP Request Body Interfaces</a></li></ul></li><li id="nav-201001"><span>January</span><ul><li class="leaf"><a href="/blog/2010/01/efficient-yaml-parsing-followup">Efficient YAML Parsing- Follow up</a></li><li class="leaf"><a href="/blog/2010/01/with-monadio">With MonadIO</a></li><li class="leaf"><a href="/blog/2010/01/efficient-yaml-parsing">Efficient YAML Parsing</a></li><li class="leaf"><a href="/blog/2010/01/new-blog-system">New Blog System</a></li></ul></li></ul></li></ul></div></section><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script><script>var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function c(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function j(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function g(t,s){var r="";for(var q=0;q<t.childNodes.length;q++){if(t.childNodes[q].nodeType==3){var p=t.childNodes[q].nodeValue;if(s){p=p.replace(/\n/g,"")}r+=p}else{if(t.childNodes[q].nodeName=="BR"){r+="\n"}else{r+=g(t.childNodes[q])}}}if(/MSIE [678]/.test(navigator.userAgent)){r=r.replace(/\r/g,"\n")}return r}function a(s){var q=s.className.split(/\s+/);q=q.concat(s.parentNode.className.split(/\s+/));for(var p=0;p<q.length;p++){var r=q[p].replace(/^language-/,"");if(d[r]||r=="no-highlight"){return r}}}function b(p){var q=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{q.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);q.push({event:"stop",offset:t,node:s.childNodes[r]})}}}return t})(p,0);return q}function l(y,z,x){var r=0;var w="";var t=[];function u(){if(y.length&&z.length){if(y[0].offset!=z[0].offset){return(y[0].offset<z[0].offset)?y:z}else{return z[0].event=="start"?y:z}}else{return y.length?y:z}}function s(C){var D="<"+C.nodeName.toLowerCase();for(var A=0;A<C.attributes.length;A++){var B=C.attributes[A];D+=" "+B.nodeName.toLowerCase();if(B.nodeValue!=undefined&&B.nodeValue!=false&&B.nodeValue!=null){D+='="'+m(B.nodeValue)+'"'}}return D+">"}while(y.length||z.length){var v=u().splice(0,1)[0];w+=m(x.substr(r,v.offset-r));r=v.offset;if(v.event=="start"){w+=s(v.node);t.push(v.node)}else{if(v.event=="stop"){var q=t.length;do{q--;var p=t[q];w+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);t.splice(q,1);while(q<t.length){w+=s(t[q]);q++}}}}w+=x.substr(r);return w}function i(){function p(u,t,v){if(u.compiled){return}if(!v){u.bR=c(t,u.b?u.b:"\\B|\\b");if(!u.e&&!u.eW){u.e="\\B|\\b"}if(u.e){u.eR=c(t,u.e)}}if(u.i){u.iR=c(t,u.i)}if(u.r==undefined){u.r=1}if(u.k){u.lR=c(t,u.l||hljs.IR,true)}for(var s in u.k){if(!u.k.hasOwnProperty(s)){continue}if(u.k[s] instanceof Object){u.kG=u.k}else{u.kG={keyword:u.k}}break}if(!u.c){u.c=[]}u.compiled=true;for(var r=0;r<u.c.length;r++){p(u.c[r],t,false)}if(u.starts){p(u.starts,t,false)}}for(var q in d){if(!d.hasOwnProperty(q)){continue}p(d[q].dM,d[q],true)}}function e(J,D){if(!i.called){i();i.called=true}function z(r,M){for(var L=0;L<M.c.length;L++){if(M.c[L].bR.test(r)){return M.c[L]}}}function w(L,r){if(C[L].e&&C[L].eR.test(r)){return 1}if(C[L].eW){var M=w(L-1,r);return M?M+1:0}return 0}function x(r,L){return L.iR&&L.iR.test(r)}function A(O,N){var M=[];for(var L=0;L<O.c.length;L++){M.push(O.c[L].b)}var r=C.length-1;do{if(C[r].e){M.push(C[r].e)}r--}while(C[r+1].eW);if(O.i){M.push(O.i)}return c(N,"("+M.join("|")+")",true)}function s(M,L){var N=C[C.length-1];if(!N.t){N.t=A(N,H)}N.t.lastIndex=L;var r=N.t.exec(M);if(r){return[M.substr(L,r.index-L),r[0],false]}else{return[M.substr(L),"",true]}}function p(O,r){var L=H.cI?r[0].toLowerCase():r[0];for(var N in O.kG){if(!O.kG.hasOwnProperty(N)){continue}var M=O.kG[N].hasOwnProperty(L);if(M){return[N,M]}}return false}function F(M,O){if(!O.k){return m(M)}var N="";var P=0;O.lR.lastIndex=0;var L=O.lR.exec(M);while(L){N+=m(M.substr(P,L.index-P));var r=p(O,L);if(r){t+=r[1];N+='<span class="'+r[0]+'">'+m(L[0])+"</span>"}else{N+=m(L[0])}P=O.lR.lastIndex;L=O.lR.exec(M)}N+=m(M.substr(P,M.length-P));return N}function K(r,M){if(M.sL&&d[M.sL]){var L=e(M.sL,r);t+=L.keyword_count;return L.value}else{return F(r,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){q+=L;M.buffer=""}else{if(M.eB){q+=m(r)+L;M.buffer=""}else{q+=L;M.buffer=r}}C.push(M);B+=M.r}function E(O,L,Q){var R=C[C.length-1];if(Q){q+=K(R.buffer+O,R);return false}var M=z(L,R);if(M){q+=K(R.buffer+O,R);I(M,L);return M.rB}var r=w(C.length-1,L);if(r){var N=R.cN?"</span>":"";if(R.rE){q+=K(R.buffer+O,R)+N}else{if(R.eE){q+=K(R.buffer+O,R)+N+m(L)}else{q+=K(R.buffer+O+L,R)+N}}while(r>1){N=C[C.length-2].cN?"</span>":"";q+=N;r--;C.length--}var P=C[C.length-1];C.length--;C[C.length-1].buffer="";if(P.starts){I(P.starts,"")}return R.rE}if(x(L,R)){throw"Illegal"}}var H=d[J];var C=[H.dM];var B=0;var t=0;var q="";try{var v=0;H.dM.buffer="";do{var y=s(D,v);var u=E(y[0],y[1],y[2]);v+=y[0].length;if(!u){v+=y[1].length}}while(!y[2]);if(C.length>1){throw"Illegal"}return{r:B,keyword_count:t,value:q}}catch(G){if(G=="Illegal"){return{r:0,keyword_count:0,value:m(D)}}else{throw G}}}function f(t){var r={keyword_count:0,r:0,value:m(t)};var q=r;for(var p in d){if(!d.hasOwnProperty(p)){continue}var s=e(p,t);s.language=p;if(s.keyword_count+s.r>q.keyword_count+q.r){q=s}if(s.keyword_count+s.r>r.keyword_count+r.r){q=r;r=s}}if(q.language){r.second_best=q}return r}function h(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function o(u,x,q){var y=g(u,q);var s=a(u);if(s=="no-highlight"){return}if(s){var w=e(s,y)}else{var w=f(y);s=w.language}var p=b(u);if(p.length){var r=document.createElement("pre");r.innerHTML=w.value;w.value=l(p,b(r),y)}w.value=h(w.value,x,q);var t=u.className;if(!t.match("(\\s|^)(language-)?"+s+"(\\s|$)")){t=t?(t+" "+s):s}if(/MSIE [678]/.test(navigator.userAgent)&&u.tagName=="CODE"&&u.parentNode.tagName=="PRE"){var r=u.parentNode;var v=document.createElement("div");v.innerHTML="<pre><code>"+w.value+"</code></pre>";u=v.firstChild.firstChild;v.firstChild.cN=r.cN;r.parentNode.replaceChild(v.firstChild,r)}else{u.innerHTML=w.value}u.className=t;u.result={language:s,kw:w.keyword_count,re:w.r};if(w.second_best){u.second_best={language:w.second_best.language,kw:w.second_best.keyword_count,re:w.second_best.r}}}function k(){if(k.called){return}k.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=j(r[p]);if(q){o(q,hljs.tabReplace)}}}function n(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",k,false);window.addEventListener("load",k,false)}else{if(window.attachEvent){window.attachEvent("onload",k)}else{window.onload=k}}}var d={};this.LANGUAGES=d;this.highlight=e;this.highlightAuto=f;this.fixMarkup=h;this.highlightBlock=o;this.initHighlighting=k;this.initHighlightingOnLoad=n;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0x[A-Za-z0-9]+|\\d+(\\.\\d+)?)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.inherit=function(p,s){var r={};for(var q in p){r[q]=p[q]}if(s){for(var q in s){r[q]=s[q]}}return r}}();hljs.LANGUAGES.bash=function(){var d={"true":1,"false":1};var b={cN:"variable",b:"\\$([a-zA-Z0-9_]+)\\b"};var a={cN:"variable",b:"\\$\\{(([^}])|(\\\\}))+\\}",c:[hljs.CNM]};var c={cN:"string",b:'"',e:'"',i:"\\n",c:[hljs.BE,b,a],r:0};var e={cN:"test_condition",b:"",e:"",c:[c,b,a,hljs.CNM],k:{literal:d},r:0};return{dM:{k:{keyword:{"if":1,then:1,"else":1,fi:1,"for":1,"break":1,"continue":1,"while":1,"in":1,"do":1,done:1,echo:1,exit:1,"return":1,set:1,declare:1},literal:d},c:[{cN:"shebang",b:"(#!\\/bin\\/bash)|(#!\\/bin\\/sh)",r:10},hljs.HCM,hljs.CNM,c,b,a,hljs.inherit(e,{b:"\\[ ",e:" \\]",r:0}),hljs.inherit(e,{b:"\\[\\[ ",e:" \\]\\]"})]}}}();hljs.LANGUAGES.javascript={dM:{k:{keyword:{"in":1,"if":1,"for":1,"while":1,"finally":1,"var":1,"new":1,"function":1,"do":1,"return":1,"void":1,"else":1,"break":1,"catch":1,"instanceof":1,"with":1,"throw":1,"case":1,"default":1,"try":1,"this":1,"switch":1,"continue":1,"typeof":1,"delete":1},literal:{"true":1,"false":1,"null":1}},c:[hljs.ASM,hljs.QSM,hljs.CLCM,hljs.CBLCLM,hljs.CNM,{b:"("+hljs.RSR+"|case|return|throw)\\s*",k:{"return":1,"throw":1,"case":1},c:[hljs.CLCM,hljs.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",c:[{b:"\\\\/"}]}],r:0},{cN:"function",b:"\\bfunction\\b",e:"{",k:{"function":1},c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[hljs.ASM,hljs.QSM,hljs.CLCM,hljs.CBLCLM]}]}]}};hljs.LANGUAGES.css=function(){var a={cN:"function",b:hljs.IR+"\\(",e:"\\)",c:[{eW:true,eE:true,c:[hljs.NM,hljs.ASM,hljs.QSM]}]};return{cI:true,dM:{i:"[=/|']",c:[hljs.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:{"font-face":1,page:1}},{cN:"at_rule",b:"@",e:"[{;]",eE:true,k:{"import":1,page:1,media:1,charset:1},c:[a,hljs.ASM,hljs.QSM,hljs.NM]},{cN:"tag",b:hljs.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[hljs.CBLCLM,{cN:"rule",b:"[^\\s]",rB:true,e:";",eW:true,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:true,i:"[^\\s]",starts:{cN:"value",eW:true,eE:true,c:[a,hljs.NM,hljs.QSM,hljs.ASM,hljs.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}}();hljs.LANGUAGES.xml=function(){var b="[A-Za-z0-9\\._:-]+";var a={eW:true,c:[{cN:"attribute",b:b,r:0},{b:'="',rB:true,e:'"',c:[{cN:"value",b:'"',eW:true}]},{b:"='",rB:true,e:"'",c:[{cN:"value",b:"'",eW:true}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:true,dM:{c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style",e:">",k:{title:{style:1}},c:[a],starts:{cN:"css",e:"</style>",rE:true,sL:"css"}},{cN:"tag",b:"<script",e:">",k:{title:{script:1}},c:[a],starts:{cN:"javascript",e:"<\/script>",rE:true,sL:"javascript"}},{cN:"vbscript",b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},a]}]}}}();hljs.LANGUAGES.java={dM:{k:{"false":1,"synchronized":1,"int":1,"abstract":1,"float":1,"private":1,"char":1,"interface":1,"boolean":1,"static":1,"null":1,"if":1,"const":1,"for":1,"true":1,"while":1,"long":1,"throw":1,strictfp:1,"finally":1,"protected":1,"extends":1,"import":1,"native":1,"final":1,"implements":1,"return":1,"void":1,"enum":1,"else":1,"break":1,"transient":1,"new":1,"catch":1,"instanceof":1,"byte":1,"super":1,"class":1,"volatile":1,"case":1,assert:1,"short":1,"package":1,"default":1,"double":1,"public":1,"try":1,"this":1,"switch":1,"continue":1,"throws":1},c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"@[A-Za-z]+"}],r:10},hljs.CLCM,hljs.CBLCLM,hljs.ASM,hljs.QSM,{cN:"class",b:"(class |interface )",e:"{",k:{"class":1,"interface":1},i:":",c:[{b:"(implements|extends)",k:{"extends":1,"implements":1},r:10},{cN:"title",b:hljs.UIR}]},hljs.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}};hljs.LANGUAGES.haskell=function(){var a={cN:"label",b:"\\b[A-Z][\\w']*",r:0};var b={cN:"container",b:"\\(",e:"\\)",c:[{cN:"label",b:"\\b[A-Z][\\w\\(\\)\\.']*"},{cN:"title",b:"[_a-z][\\w']*"}]};return{dM:{k:{keyword:{let:1,"in":1,"if":1,then:1,"else":1,"case":1,of:1,where:1,"do":1,module:1,"import":1,hiding:1,qualified:1,type:1,data:1,newtype:1,deriving:1,"class":1,instance:1,"null":1,not:1,as:1}},c:[{cN:"comment",b:"--",e:"$"},{cN:"comment",b:"{-",e:"-}"},{cN:"string",b:"\\s+'",e:"'",c:[hljs.BE],r:0},hljs.QSM,{cN:"import",b:"\\bimport",e:"$",k:{"import":1,qualified:1,as:1,hiding:1},c:[b]},{cN:"module",b:"\\bmodule",e:"where",k:{module:1,where:1},c:[b]},{cN:"class",b:"\\b(class|instance|data|(new)?type)",e:"(where|$)",k:{"class":1,where:1,instance:1,data:1,type:1,newtype:1,deriving:1},c:[a]},hljs.CNM,{cN:"shebang",b:"#!\\/usr\\/bin\\/env runhaskell",e:"$"},a,{cN:"title",b:"^[_a-z][\\w']*"}]}}}();hljs.LANGUAGES.sql={cI:true,dM:{i:"[^\\s]",c:[{cN:"operator",b:"(begin|start|commit|rollback|savepoint|lock|alter|create|drop|rename|call|delete|do|handler|insert|load|replace|select|truncate|update|set|show|pragma)\\b",e:";|$",k:{keyword:{all:1,partial:1,global:1,month:1,current_timestamp:1,using:1,go:1,revoke:1,smallint:1,indicator:1,"end-exec":1,disconnect:1,zone:1,"with":1,character:1,assertion:1,to:1,add:1,current_user:1,usage:1,input:1,local:1,alter:1,match:1,collate:1,real:1,then:1,rollback:1,get:1,read:1,timestamp:1,session_user:1,not:1,integer:1,bit:1,unique:1,day:1,minute:1,desc:1,insert:1,execute:1,like:1,ilike:2,level:1,decimal:1,drop:1,"continue":1,isolation:1,found:1,where:1,constraints:1,domain:1,right:1,national:1,some:1,module:1,transaction:1,relative:1,second:1,connect:1,escape:1,close:1,system_user:1,"for":1,deferred:1,section:1,cast:1,current:1,sqlstate:1,allocate:1,intersect:1,deallocate:1,numeric:1,"public":1,preserve:1,full:1,"goto":1,initially:1,asc:1,no:1,key:1,output:1,collation:1,group:1,by:1,union:1,session:1,both:1,last:1,language:1,constraint:1,column:1,of:1,space:1,foreign:1,deferrable:1,prior:1,connection:1,unknown:1,action:1,commit:1,view:1,or:1,first:1,into:1,"float":1,year:1,primary:1,cascaded:1,except:1,restrict:1,set:1,references:1,names:1,table:1,outer:1,open:1,select:1,size:1,are:1,rows:1,from:1,prepare:1,distinct:1,leading:1,create:1,only:1,next:1,inner:1,authorization:1,schema:1,corresponding:1,option:1,declare:1,precision:1,immediate:1,"else":1,timezone_minute:1,external:1,varying:1,translation:1,"true":1,"case":1,exception:1,join:1,hour:1,"default":1,"double":1,scroll:1,value:1,cursor:1,descriptor:1,values:1,dec:1,fetch:1,procedure:1,"delete":1,and:1,"false":1,"int":1,is:1,describe:1,"char":1,as:1,at:1,"in":1,varchar:1,"null":1,trailing:1,any:1,absolute:1,current_time:1,end:1,grant:1,privileges:1,when:1,cross:1,check:1,write:1,current_date:1,pad:1,begin:1,temporary:1,exec:1,time:1,update:1,catalog:1,user:1,sql:1,date:1,on:1,identity:1,timezone_hour:1,natural:1,whenever:1,interval:1,work:1,order:1,cascade:1,diagnostics:1,nchar:1,having:1,left:1,call:1,"do":1,handler:1,load:1,replace:1,truncate:1,start:1,lock:1,show:1,pragma:1},aggregate:{count:1,sum:1,min:1,max:1,avg:1}},c:[{cN:"string",b:"'",e:"'",c:[hljs.BE,{b:"''"}],r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE,{b:'""'}],r:0},{cN:"string",b:"`",e:"`",c:[hljs.BE]},hljs.CNM,{b:"\\n"}]},hljs.CBLCLM,{cN:"comment",b:"--",e:"$"}]}};hljs.LANGUAGES.nginx=function(){var c={cN:"variable",b:"\\$\\d+"};var b={cN:"variable",b:"\\${",e:"}"};var a={cN:"variable",b:"[\\$\\@]"+hljs.UIR};return{dM:{c:[hljs.HCM,{b:hljs.UIR,e:";|{",rE:true,k:{accept_mutex:1,accept_mutex_delay:1,access_log:1,add_after_body:1,add_before_body:1,add_header:1,addition_types:1,alias:1,allow:1,ancient_browser:1,ancient_browser:1,ancient_browser_value:1,ancient_browser_value:1,auth_basic:1,auth_basic_user_file:1,autoindex:1,autoindex_exact_size:1,autoindex_localtime:1,"break":1,charset:1,charset:1,charset_map:1,charset_map:1,charset_types:1,charset_types:1,client_body_buffer_size:1,client_body_in_file_only:1,client_body_in_single_buffer:1,client_body_temp_path:1,client_body_timeout:1,client_header_buffer_size:1,client_header_timeout:1,client_max_body_size:1,connection_pool_size:1,connections:1,create_full_put_path:1,daemon:1,dav_access:1,dav_methods:1,debug_connection:1,debug_points:1,default_type:1,deny:1,directio:1,directio_alignment:1,echo:1,echo_after_body:1,echo_before_body:1,echo_blocking_sleep:1,echo_duplicate:1,echo_end:1,echo_exec:1,echo_flush:1,echo_foreach_split:1,echo_location:1,echo_location_async:1,echo_read_request_body:1,echo_request_body:1,echo_reset_timer:1,echo_sleep:1,echo_subrequest:1,echo_subrequest_async:1,empty_gif:1,empty_gif:1,env:1,error_log:1,error_log:1,error_page:1,events:1,expires:1,fastcgi_bind:1,fastcgi_buffer_size:1,fastcgi_buffers:1,fastcgi_busy_buffers_size:1,fastcgi_cache:1,fastcgi_cache_key:1,fastcgi_cache_methods:1,fastcgi_cache_min_uses:1,fastcgi_cache_path:1,fastcgi_cache_use_stale:1,fastcgi_cache_valid:1,fastcgi_catch_stderr:1,fastcgi_connect_timeout:1,fastcgi_hide_header:1,fastcgi_ignore_client_abort:1,fastcgi_ignore_headers:1,fastcgi_index:1,fastcgi_intercept_errors:1,fastcgi_max_temp_file_size:1,fastcgi_next_upstream:1,fastcgi_param:1,fastcgi_pass:1,fastcgi_pass_header:1,fastcgi_pass_request_body:1,fastcgi_pass_request_headers:1,fastcgi_read_timeout:1,fastcgi_send_lowat:1,fastcgi_send_timeout:1,fastcgi_split_path_info:1,fastcgi_store:1,fastcgi_store_access:1,fastcgi_temp_file_write_size:1,fastcgi_temp_path:1,fastcgi_upstream_fail_timeout:1,fastcgi_upstream_max_fails:1,flv:1,geo:1,geo:1,geoip_city:1,geoip_country:1,gzip:1,gzip_buffers:1,gzip_comp_level:1,gzip_disable:1,gzip_hash:1,gzip_http_version:1,gzip_min_length:1,gzip_no_buffer:1,gzip_proxied:1,gzip_static:1,gzip_types:1,gzip_vary:1,gzip_window:1,http:1,"if":1,if_modified_since:1,ignore_invalid_headers:1,image_filter:1,image_filter_buffer:1,image_filter_jpeg_quality:1,image_filter_transparency:1,include:1,index:1,internal:1,ip_hash:1,js:1,js_load:1,js_require:1,js_utf8:1,keepalive_requests:1,keepalive_timeout:1,kqueue_changes:1,kqueue_events:1,large_client_header_buffers:1,limit_conn:1,limit_conn_log_level:1,limit_except:1,limit_rate:1,limit_rate_after:1,limit_req:1,limit_req_log_level:1,limit_req_zone:1,limit_zone:1,lingering_time:1,lingering_timeout:1,listen:1,location:1,lock_file:1,log_format:1,log_not_found:1,log_subrequest:1,map:1,map_hash_bucket_size:1,map_hash_max_size:1,master_process:1,memcached_bind:1,memcached_buffer_size:1,memcached_connect_timeout:1,memcached_next_upstream:1,memcached_pass:1,memcached_read_timeout:1,memcached_send_timeout:1,memcached_upstream_fail_timeout:1,memcached_upstream_max_fails:1,merge_slashes:1,min_delete_depth:1,modern_browser:1,modern_browser:1,modern_browser_value:1,modern_browser_value:1,more_clear_headers:1,more_clear_input_headers:1,more_set_headers:1,more_set_input_headers:1,msie_padding:1,msie_refresh:1,multi_accept:1,open_file_cache:1,open_file_cache_errors:1,open_file_cache_events:1,open_file_cache_min_uses:1,open_file_cache_retest:1,open_file_cache_valid:1,open_log_file_cache:1,optimize_server_names:1,output_buffers:1,override_charset:1,override_charset:1,perl:1,perl_modules:1,perl_require:1,perl_set:1,pid:1,port_in_redirect:1,post_action:1,postpone_gzipping:1,postpone_output:1,proxy_bind:1,proxy_buffer_size:1,proxy_buffering:1,proxy_buffers:1,proxy_busy_buffers_size:1,proxy_cache:1,proxy_cache_key:1,proxy_cache_methods:1,proxy_cache_min_uses:1,proxy_cache_path:1,proxy_cache_use_stale:1,proxy_cache_valid:1,proxy_connect_timeout:1,proxy_headers_hash_bucket_size:1,proxy_headers_hash_max_size:1,proxy_hide_header:1,proxy_ignore_client_abort:1,proxy_ignore_headers:1,proxy_intercept_errors:1,proxy_max_temp_file_size:1,proxy_method:1,proxy_next_upstream:1,proxy_pass:1,proxy_pass_header:1,proxy_pass_request_body:1,proxy_pass_request_headers:1,proxy_read_timeout:1,proxy_redirect:1,proxy_send_lowat:1,proxy_send_timeout:1,proxy_set_body:1,proxy_set_header:1,proxy_store:1,proxy_store_access:1,proxy_temp_file_write_size:1,proxy_temp_path:1,proxy_upstream_fail_timeout:1,proxy_upstream_max_fails:1,push_authorized_channels_only:1,push_channel_group:1,push_max_channel_id_length:1,push_max_channel_subscribers:1,push_max_message_buffer_length:1,push_max_reserved_memory:1,push_message_buffer_length:1,push_message_timeout:1,push_min_message_buffer_length:1,push_min_message_recipients:1,push_publisher:1,push_store_messages:1,push_subscriber:1,push_subscriber_concurrency:1,random_index:1,read_ahead:1,real_ip_header:1,recursive_error_pages:1,request_pool_size:1,reset_timedout_connection:1,resolver:1,resolver_timeout:1,"return":1,rewrite:1,rewrite_log:1,root:1,satisfy:1,satisfy_any:1,send_lowat:1,send_timeout:1,sendfile:1,sendfile_max_chunk:1,server:1,server:1,server_name:1,server_name_in_redirect:1,server_names_hash_bucket_size:1,server_names_hash_max_size:1,server_tokens:1,set:1,set_real_ip_from:1,source_charset:1,source_charset:1,ssi:1,ssi_ignore_recycled_buffers:1,ssi_min_file_chunk:1,ssi_silent_errors:1,ssi_types:1,ssi_value_length:1,ssl:1,ssl_certificate:1,ssl_certificate_key:1,ssl_ciphers:1,ssl_client_certificate:1,ssl_crl:1,ssl_dhparam:1,ssl_prefer_server_ciphers:1,ssl_protocols:1,ssl_session_cache:1,ssl_session_timeout:1,ssl_verify_client:1,ssl_verify_depth:1,sub_filter:1,sub_filter_once:1,sub_filter_types:1,tcp_nodelay:1,tcp_nopush:1,timer_resolution:1,try_files:1,types:1,types_hash_bucket_size:1,types_hash_max_size:1,underscores_in_headers:1,uninitialized_variable_warn:1,upstream:1,use:1,user:1,userid:1,userid:1,userid_domain:1,userid_domain:1,userid_expires:1,userid_expires:1,userid_mark:1,userid_name:1,userid_name:1,userid_p3p:1,userid_p3p:1,userid_path:1,userid_path:1,userid_service:1,userid_service:1,valid_referers:1,variables_hash_bucket_size:1,variables_hash_max_size:1,worker_connections:1,worker_cpu_affinity:1,worker_priority:1,worker_processes:1,worker_rlimit_core:1,worker_rlimit_nofile:1,worker_rlimit_sigpending:1,working_directory:1,xml_entities:1,xslt_stylesheet:1,xslt_types:1},r:0,c:[hljs.HCM,{b:"\\s",e:"[;{]",rB:true,rE:true,l:"[a-z/]+",k:{built_in:{on:1,off:1,yes:1,no:1,"true":1,"false":1,none:1,blocked:1,debug:1,info:1,notice:1,warn:1,error:1,crit:1,select:1,permanent:1,redirect:1,kqueue:1,rtsig:1,epoll:1,poll:1,"/dev/poll":1}},r:0,c:[hljs.HCM,{cN:"string",b:'"',e:'"',c:[hljs.BE,c,b,a],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE,c,b,a],r:0},{cN:"string",b:"([a-z]+):/",e:"[;\\s]",rE:true},{cN:"regexp",b:"\\s\\^",e:"\\s|{|;",rE:true,c:[hljs.BE,c,b,a]},{cN:"regexp",b:"~\\*?\\s+",e:"\\s|{|;",rE:true,c:[hljs.BE,c,b,a]},{cN:"regexp",b:"\\*(\\.[a-z\\-]+)+",c:[hljs.BE,c,b,a]},{cN:"regexp",b:"([a-z\\-]+\\.)+\\*",c:[hljs.BE,c,b,a]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\b"},{cN:"number",b:"\\s\\d+[kKmMgGdshdwy]*\\b",r:0},c,b,a]}]}]}}}();$(function(){
    $("#archive li").has("ul").click(function(event){
        if (event.target.id == $(this).attr("id")) $(this).toggleClass("open");
    });
});
hljs.initHighlightingOnLoad();
</script><footer id="license" style="text-align:center;font-size:0.8em">All content on this site is available under the
<a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
<br>
Content outside the book section is available under
<a href="https://raw.github.com/yesodweb/yesodweb.com/master/LICENSE">the MIT license</a>
as well.</footer>
</div></div><script>window._gaq = [['_setAccount','UA-1434510-13'],['_trackPageview'],['_trackPageLoadTime']];(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script><!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.  chromium.org/developers/how-tos/chrome-frame-getting-started --><!--[if lt IE 7 ]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script><script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script><![endif]--></body></html>